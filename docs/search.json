[
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler.html",
    "href": "posts/20240127-Notes on Hartley and Sandler.html",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "",
    "text": "Introduction\n\nThe chapter reviews literature on defence contracts and competitive procurement, exploring various contract types and the decision-making processes in defence equipment acquisition.\nThe complexity of contracting involves transaction costs related to acquiring information, organizing competitions, bargaining, and enforcing contracts.\nThe government, as a buyer or principal, must specify requirements and ensure that contractors pursue the principal’s goals.\nContracts that cannot detail all buyer requirements may lead to discretionary behaviour by contractors, influenced by their preferences.\nMonitoring and enforcing contracts require measurable outputs, and incentives and penalties in contracts impact the behaviour of agents.\nThe chapter reviews traditional approaches to defence contracting, cost-estimating relationships, and various contract types, including recent theoretical developments.\nFocus is given to market features, agent behaviour, and responses to contractual incentives and regulatory constraints.\n\n\n\n2.1 Market Failure\n\nDefence equipment markets function similarly to other markets by connecting buyers (defence ministries and armed forces) with sellers (defence industries).\nThe demand for defence equipment comes from national defence ministries, armed forces, and overseas governments, while defence industries, both nationally and internationally, supply the equipment.\nThe interaction between demand and supply is formalized through legally binding contracts, where buyers commit to paying a specified price for a product delivered on time.\nGovernments, acting as buyers, may impose regulatory requirements on contractors, such as profit controls, adding a layer of oversight.\nThe text introduces Figure 5.1, illustrating the market situation with a UK example.\nDespite similarities, defence equipment markets have unique characteristics, including the central role of * governments, cost trends, technical progress, cost curves, and regulatory aspects.\nThe government’s role is crucial in determining technical progress, choosing equipment, and deciding whether to import or buy domestically.\nCost trends indicate that defence equipment, especially high-tech items, tends to become costlier over time.\nTechnical progress is a distinctive feature, leading to new products and markets, but also resulting in a smaller number of large firms dominating high-tech sectors.\nCost curves show that production costs of defence equipment increase over time, leading to downward pressures on the size and structure of armed forces.\nRegulation plays a significant role in defence markets, with governments determining market openness, monitoring costs, and regulating profits on defence contracts.\nThe text refers to previous work by Peck and Scherer in 1963, highlighting the enduring relevance of these considerations in defence equipment markets.\n\nGovernment Influence in Defence Markets and Policy Objectives.\n\nAs a monopsonist, the government determines technical progress by choosing equipment and decides whether to import or buy domestically.\nGovernment influence extends to determining the size and composition of its domestic defence capabilities.\nThe choice of defence equipment, including combat aircraft, missiles, submarines, and tanks, impacts the industry’s structure, entry and exit, prices, exports, and profits.\nSome advocate for an interventionist approach, using defence procurement to support “key” technologies and back industry winners as part of national industrial policy.\nSupporters of free markets, such as Austrian economists, criticize this interventionist stance, emphasizing the uncertainty of the future and the unintended consequences of government involvement.\nPublic choice analysis predicts potential government failures in efforts to improve economic performance.\nThe use of defence procurement as an instrument of industrial policy raises fundamental questions about the objectives of defence policy.\nQuestions arise regarding whether defence procurement aims at efficiently acquiring equipment for national defence or pursuing broader economic and social objectives, including protecting the national defence industrial base.\n\nChallenges of Rising Costs in Defence Equipment and Adaptive Procurement Policies.\n\nHigh technology defence equipment is costly and experiencing rising costs in real terms.\nExamples include the estimated $35 billion cost for fifteen American B2 stealth bombers and approximately $130 million per copy for the US F-22 advanced tactical fighter aircraft (1991-2 prices).\nDespite increased costs, new equipment is more productive than previous generations.\nReal unit production costs of defence equipment, including aircraft, helicopters, missiles, warships, and submarines, increase by about 10 percent per annum.\nThis cost trend implies a doubling in cost approximately every 7.25 years.\nDefence budgets often fail to match these cost increases, leading to downward pressures on the size and structure of armed forces.\nThere is a need to reshape defence industries supplying the forces, evident in long-term trends like a one-ship navy and a one-aircraft air force.\nEfforts are made to address these challenges through adaptive procurement policies, such as competition policy, aiming to postpone some of the adjustment effects associated with rising costs.\n\nEvolution of Defence Equipment Markets and the Impact of Technical Progress.\n\nTechnical progress is a distinctive feature of defence equipment markets.\nMajor advances, such as in jet engines, missiles, electronics, and helicopters, create new markets.\nFirms must invest in new development and production facilities with a focus on research and development (R & D).\nSince 1945, there’s a long-term trend towards fewer, larger firms, seen through mergers and exits from the defence sector.\nHigh technology sectors, like aerospace and avionics, often have one or a few large national suppliers, forming a monopoly or oligopoly.\nThis market structure deviates significantly from the economists’ model of perfect competition.\nDefence spending cuts in the USA, UK, and the EU during the 1990s contribute to exits from the industry and restructuring around fewer large defence contractors.\nEU states may maintain competition by opening their national markets to foreign suppliers.\n\nEconomies of Scale and Competitiveness in High Technology Defence Sectors.\n\nSome defence industries, especially high-tech sectors, exhibit decreasing costs, emphasizing economies of scale.\nA national market in such sectors may only support one firm, resembling a monopoly.\nQuantity becomes a critical factor in determining unit costs and overall competitiveness.\nLong production runs allow for spreading high fixed research and development (R & D) costs over a larger volume.\nScale and learning economies in production contribute to cost efficiency and competitiveness in high-tech defence sectors.\n\nGovernment Regulation and Profit Controls in Defence Markets.\n\nDefence markets and industries are subject to government regulation.\nGovernments have the authority to determine whether national markets should be open or closed.\nMonitoring costs and profit controls on defence contracts are common regulatory practices.\nProfit controls aim to prevent excessive profits or losses on defence business and maintain a domestic industrial base.\nProfit levels may not serve as a standard signalling mechanism for entry or exit due to regulatory constraints.\nProfit-conscious firms may adapt by increasing expenditure on unregulated items, such as luxury offices, company cars, and hoarding scientists and engineers.\nThe Tisdell and Hartley (1981) reference provides further insights into microeconomic policy in this context.\n\n\n\n2.2 Demand: procurement policy\n\nProcurement Policy:\n\nRepresents the demand side of the defence equipment market.\nInvolves choices, with defence contracts being one element in the choice set.\n\nEquipment Choices:\n\nImplications for technical progress.\nInvolves choosing between competing demands from armed forces with a limited defence budget.\nDecisions often made on the principle of “Buggin’s Turn.”\n\nChoice of Contractor:\n\nSelection based on direct negotiation or competition.\nMarket can be restricted to domestic firms or open to foreign suppliers.\nPublic choice analysis predicts opposition from domestic firms against foreign suppliers.\n\nChoice of Contract:\n\nOptions include firm or fixed-price contracts, cost-plus contracts, or intermediate arrangements.\nFirm price contracts have no variations, while fixed-price contracts allow for agreed variations.\nCost-plus contracts can lead to inefficiency, cost escalation, and “gold-plating.”\n\nIncentives to Choose:\n\nEfficient solutions depend on incentives and penalties in employment contracts of procurement staff.\nLack of inducements to economize may lead to overspending.\n\nDecision-Making Process:\n\nEquipment choices often made by a committee.\nCommittee size, objectives, composition, chairman’s background, and voting arrangements are crucial.\n\nPublic Choice Analysis:\n\nPredicts government policies favouring producers over consumers in defence contracting.\nBudget-maximizing bureaucracies are expected to be inefficient.\n\nEconomist’s Evaluation of Procurement Policy:\n\nTraditional application of standard economic models of free trade and competition.\nCompetitive bidding opportunities considered in various project life cycle stages.\n\nHistorical Context:\n\nPioneering contributions in microeconomics of defence emerged in the 1960s, particularly by American economists, with the Rand Corporation in the forefront.\nHitch and McKean’s classic text briefly covered defence contracting in 1960.\n\n\n\n\n2.3 Competition, firm behavior, bargaining, and contract types\n\nThe Weapons Acquisition Process: Economic Incentives (Scherer, 1964)\n\nDefines economic aspects of defence contracting.\nServes as a benchmark for subsequent developments in defence contracting theory and policy.\n\nFeatures of the Weapons Acquisition Process:\n\nDevelopment work involves uncertainty, shifting financial risks from contractors to the government.\nContractors gain specialized information and assets, leading to a bilateral monopoly bargaining situation.\nConventional market system not feasible; relies on a non-market, quasi-administrative relationship.\nGovernment intervention required through controls or incentive mechanisms for successful acquisition.\n\nIncentives:\n\nCan be competitive (via breakout and second sourcing) or contractual.\nBreakouts in the 1960s showed price reductions of 20% compared to non-competitive negotiations.\nSecond sourcing involves selecting multiple firms to produce a weapon system, reducing costs but not without challenges.\nContractual incentives used for monitoring and policing contractors.\n\nDefence Contract Agreement:\n\nReflects preferences of government procurement agency and contractor.\nGovernments aim to balance contractor efficiency incentives, risk of excessive profits, and contract outlays.\nConflict between fixed-price contracts (efficiency vs. profit risk) and cost reimbursement contracts (minimize profit risk but remove efficiency incentives).\nIncentive contracts provide a compromise solution.\n\nNegotiation Process:\n\nContractor’s knowledge of costs gives them a bargaining advantage.\nGovernment can use competition from national or foreign firms to check on a contractor’s price bid.\nIncompleteness in contracts may allow contractors to make cost-quality trade-offs.\n\nBargaining Dynamics:\n\nOutcome reflects bargaining power, strategies, and tactics of both parties.\nContractors seek favourable cost and price targets, shifting risks and maximizing profits.\nGovernment has power through competition, but contractor knowledge of costs remains a challenge.\n\n\n\n\n2.4 Cost-estimating relationships\n\nPurpose of Cost Estimates:\n\nUsed by industry and defence procurement agencies for planning, bidding, and checking cost estimates.\nApplied in the initial planning phase, firm’s project bids, and validation of cost estimates by defence agencies.\n\nReliability of Early Estimates:\n\nEarly estimates for advanced technology defence projects are typically unreliable.\nStudies show projects often experience a 40-70% real cost increase from initial estimates to completion.\nCost escalation attributed to modifications, changes in requirements, technical uncertainties, and contractor optimism.\nGovernments’ belief in awarding contracts to the lowest bidder may contribute to cost escalation.\n\nChallenges in Early Cost Estimates:\n\nLow estimates may create conditions for cost escalation.\nRecognizes the unreliability of early cost estimates, suggesting the need for better techniques or alternative procurement policies.\nCaution recommended as no single method or strategy suits all situations.\n\nMethods for Cost Estimation:\n\nEngineering estimates\nComparative methods\nParametric methods\nLearning curves\n\nEngineering Estimates:\n\nBased on estimated costs of materials, equipment, components, labour, and overheads.\nFox (1974) and Sissons (1986) referenced in this method.\n\nComparative Methods:\n\nRelies on historical comparisons of similar projects (e.g., combat aircraft, transport aircraft).\nGraphs show trends over time, such as the positive and increasing trend in technical man hours per pound of empty weight for UK combat aircraft development work.\nRules of thumb used for estimating development cost to unit production cost ratios (e.g., 1,000:1 for guided weapons, 100:1 for combat aircraft with an existing engine).\nRules of thumb also applied to estimate life-cycle costs, considering acquisition and ownership costs (R&D, production, operating, maintenance, and disposal costs).\nUK evidence provides specific ratios for warships and combat aircraft life cycle costs.\nCaution advised in using rules of thumb, as adjustments may be needed for variations in program complexity compared to “typical” projects.\n\nParametric Methods:\n\nForecast future R&D project costs based on cost profiles of historical R&D project data.\nProject R&D costs front-loaded, rising steeply toward midpoint, then falling with production.\nOptimal control model by Cavin (1991) aligns with empirical data.\nMultiple regression analysis used in parametric methods, often from US Rand Corporation.\nLog-linear equations estimate engineering and manufacturing hours based on aircraft weight, speed, and production quantity.\nRand study identifies most accurate cost-estimating relationships based on empty weight and speed.\nChanges in technology, materials, and design concepts may affect conventional cost-estimating relationships.\nSimilar models developed for estimating cost changes in US Navy ship-building programs.\n\nLearning Curves:\n\nApply to production programs and used for cost-estimating and contract negotiations.\nReflect productivity increase with experience, expressed as y = aX^-b.\n80% learning curve indicates 20% decline in direct labour inputs for each doubling of cumulative output.\nDistinction between unit and cumulative average learning curves.\nExamples of labour learning curves based on European experience shown in table 5.1.\nEvidence of learning limit, especially for warships, occurring between four and twelve units.\nLearning curves not unit cost curves; effect on unit production costs depends on the share of labour costs.\nChallenges in estimating parameters (a and b), uncertainty about continuous learning, and potential impacts of modifications on learning.\nVarious hypotheses exist about operator and management learning, machine-intensive operations, assembly work, labour turnover, and payment systems.\n\nDeficiencies in Cost-Estimating Relationships:\n\nLack of quality industrial economics case studies in defence industries.\nNeed evidence on long-run average cost curves, minimum efficient scale, relative position of cost curves between nations, and the relationship between scale and learning curves (refer to chapter 7).\n\nScale Differences and Unit Costs:\n\nConsiderable differences in output scale between the USA and EU member states impact unit costs.\nEfficient production crucial as nations reduce defence spending and extend production programs to maintain domestic defence industrial base.\nAttention given in the USA to cost implications of stretching-out production and evaluating if defence plants are “too large.”\nEvidence on minimum and maximum economic annual production rates for combat aircraft, missiles, and land equipment in the USA.\nDecreasing production rates by 50% could increase real unit costs by 7-50%, while a 50% increase could reduce unit costs by 3-18% (CBO 1987).\n\nEfficiency Savings and Excess Capacity:\n\nNations reducing defence spending likely to examine cost implications of current scale and excess capacity in domestic defence plants.\nWidely held view in the defence community that weapons production occurs in plants too large relative to outputs produced.\nUS evidence suggests inefficient production, with excess capacity and steeply declining short-run average cost curves indicating large plants.\nRogerson (1991a and b) highlights the potential for more cost-effective production in smaller-scale plants.\n\n\n\n\n2.5 The new economics of defense procurement and contracting\n\nTheoretical Developments in Defence Contracting (Since 1964):\n\nBuyer-seller relationship treated in a principal-agent framework.\n\nDefence ministry as the principal (buyer and regulator).\nPrime contractor as the agent (supplier and regulated firm).\n\nTransaction costs and contract theory.\n\nTransactions involve costs due to bounded rationality and opportunism.\nContracts are often incompletely specified (Williamson, 1986).\n\nInformation asymmetries between the buyer and contractor.\n\nAdverse selection, moral hazard, and risk-sharing in uncertain procurement situations (Cummins, 1977).\nGame theory used to analyse strategic behaviour by both purchaser and contractors.\n\nRecognition that defence contractors may not always be profit maximizers.\n\nEspecially in imperfect and regulated markets (Williamson, 1986).\n\nEfficient outcomes don’t necessarily require a large number of firms (contestability over industry structure).\n\nThreat of rivalry (Baumol, 1982).\n\nPublic choice analysis and economic models of regulation offer insights into procurement policy (Cowen and Lee, 1992; Leitzel 1992; Lichtenberg, 1989).\n\nSurvey and Implications:\n\nThe following sections will explore these theoretical developments.\nImplications for understanding defence contracting problems and contributions to policy formulation.\nRegulation-related issues reviewed later in this chapter (refer to Hartley and Hooper, 1990, pp. 440-99).\n\n\n\n\n2.6 Game theory and procurement\n\nIncorporation of Games in Analysis (Chapters 2-4):\n\nGames play a prominent role in the analysis.\nGames involve two or more agents (players) determining payoffs or outcomes.\nNon-cooperative games characterized by players, strategies, and outcomes.\nNash equilibrium used for simultaneous determination of defence levels, influencing demand curves (chapters 2-3).\nChapter 4 introduces interdependent defence level choices in static and dynamic game representations.\nArms races occur when one nation’s arming induces the other to follow suit.\n\nAgents in Defence Procurement Analysis:\n\nThree relevant agents: government (e.g., Congress), military (DoD, MoD), and the firm.\nMilitary often referred to as the consumer; the firm as the producer or supplier.\nResearch often focuses on interactions between two agents while suppressing the third.\nFormulations emphasize interactions between Congress and military, Congress and the firm, or military and the firm.\nGame analyses emphasize sequential nature or information structure, or both.\nSequential games often depicted as two-period games where one player decides a choice variable in anticipation of the other player’s optimizing choice in the second period.\nSolving the game backward involves agents anticipating each other’s reactions to their behaviour.\n\n\nAsymmetric Information in Procurement: - Relevant when one player is informed, and the other is not about a random variable. - Applies to principal-agent problems where the agent knows its own effort, but the principal cannot observe effort. - Ex-post cost (\\(c_j\\)) consists of three components: 1. Agent’s expected cost of the project (\\(c_i^*\\)). 2. Additive random variable (\\(\\psi\\)). 3. Cost-reducing effort (\\(e_i\\)). - Equation: \\(c_i=c_i^*+\\psi-e_i\\).\n\nMonitoring Ex-Post Cost:\n\nThe contractor (principal) can monitor ex-post cost, but component values are only known to the agent.\nHigh ex-post cost may result from low effort, a bad draw of the random factor, or both.\nPrincipal unable to determine whether nature or the agent causes cost overruns.\n\nIncentive Scheme or Contract Design:\n\nTo motivate the agent, the principal must design an incentive scheme or contract.\nThe scheme should make expending high effort a dominant strategy, rewarding the agent with higher payoffs regardless of the state of nature.\n\nBidding for Defence Procurement Contracts (McAfee and McMillan, 1986a, 1986b):\n\nExamined in a principal-agent framework with n potential agents.\nIf agents are risk averse and the principal is risk neutral, the optimal incentive-compatible contract is usually not cost-plus but an incentive contract with shared risks.\nIncentive contract details:\n\nAgent receives a fixed price (bid price) and a proportion of the cost overrun.\nMotivates the agent to keep costs down post-contract.\nAgent adjusts bid during competition to balance cost overrun sharing.\nOptimal contract fixes risk-sharing proportion for equilibrium.\n\nThree-step problem-solving approach:\n\nAscertain the agent’s effort choice for a given sharing proportion and bid to maximize expected utility of profit.\nDetermine the agent’s optimal bid for each sharing proportion, constrained by the effort choices from step one.\nPrincipal chooses the sharing proportion to minimize expected cost, considering the agent’s optimizing bid and effort choices.\n\nNon-cooperative game involving strategic interactions between military (contractor) and the firm (the agent).\nPrincipal moves first, fixing the contract parameter; the agent then decides bid and effort choice if successful.\nBackwards game solving, finding the solution in reverse order.\n\nSequential Game Representations of Procurement Process (William Rogerson, 1990, 1991b):\n\nTwo sequential game representations presented for the procurement process.\nAsymmetric goals: Military maximizes military value, Congress maximizes net (of cost) military value.\nRogerson (1990) representation:\n\nMilitary chooses quality or sophistication of a weapon system.\nCongress chooses output level, considering military’s quality choice.\nOrganizational selling results in a greater-than-first-best level for quality.\nQuantity level depends on substitutability of quality and quantity.\n\nRogerson’s (1991a) game analysis:\n\nFocus on weapons procurement with decisions on plant scale and output levels.\nMilitary and Congress are players.\nEquilibrium shows plant scale and output are too high, leading to higher per-unit cost.\nMilitary better informed about technical design decisions, Congress delegates scale decision to military.\nMilitary induces Congress to choose a larger output level by selecting a larger plant scale.\n\nMathematical representations and assumptions:\n\nFirst-best problem and second-best scale minimizes cost for a given output level.\nEquations and conditions defining first-best and second-best solutions.\nEquilibrium analysis involving the military choosing scale to maximize military value and Congress choosing output.\nEquilibrium results in greater-than-first-best scale and output.\n\n\nFirst-Best Problem:\nObjective function: \\(\\max_{x, s}[V(x) - C(x, s)]\\)\nVariables:\n\n\\(x\\): Output\n\\(s\\): Plant scale\n\nFunctions:\n\n\\(V(.)\\): Military value function of weapons\n\\(C(., .)\\): Cost function\n\nAssumptions:\n\n\\(V(.)\\) is an increasing, strictly concave function\n\\(C(., .)\\) is a strictly convex function increasing in output\n\nFirst-best solution: Unique \\((x^*, s^*)\\) assumed to exist and is strictly preferred to \\((0, 0)\\)\nSecond-best scale: \\(\\min_s C(x, s)\\) for a given output level\n\nDenoted as \\(\\psi(x)\\) for \\(x &gt; 0\\)\n\nSecond-best output level: \\(\\max[V(x) - C(x, s)]\\)\n\nDenoted as \\(\\Omega(s)\\) (associated with equation (5.6))\n\nCapacity level to scale: \\(\\bar{s}\\)\n\nNegative net social surpluses for \\(s &gt; \\bar{s}\\)\n\\(V(\\Omega(s)) - C(\\Omega(s), s) \\geq 0 \\iff s \\geq \\bar{s}\\)\n\nInterior second-best output level: \\(\\bar{x} = \\Omega(\\bar{s})\\)\nAssumption: \\(G_x(x, s) &lt; 0\\)\n\nImplies marginal cost of output falls with scale\n\\(\\phi^{\\prime}(x) &gt; 0\\), indicating larger scale optimally chosen for a larger output level\nSign of \\(\\phi^{\\prime}(x)\\) derived from differentiating the first-order conditions (equation 4)\n\nEquilibrium Analysis:\n\nMilitary’s Move:\n\nMaximizes \\(V(x)\\)\nConcerned with military benefits\n\\(V^{\\prime}(x) &gt; 0\\) (prefers more weapons)\n\nCongress’s Move:\n\nDecides output to maximize net social surplus\nPays for production facilities only if procurement is non-zero\n\nSequential Steps:\n\nCongress chooses second-best output level \\(\\Theta(s)\\) based on \\(s\\)\n\n\n\\(\\Theta(s) = \\begin{cases} \\Omega(s), & s &lt; \\bar{s} \\\\ \\{0, \\bar{x}\\}, & s = \\bar{s} \\\\ 0, & s &gt; \\bar{s} \\end{cases}\\)\n\n\nMilitary then chooses \\(s\\) to maximize \\(V(\\Theta(s))\\)\n\nEquilibrium Program:\n\n\\(\\max_{x, s} V(x)\\) subject to \\(x \\in \\Theta(s)\\)\nConsistent choices: \\(x^e = \\Theta(s^e)\\), \\(s^e = \\phi(x^e)\\) (equilibrium values)\n\nMilitary’s Strategy:\n\nChooses \\(s = \\bar{s}\\) to maximize \\(x\\) (output)\n\nConditions for Equilibrium:\n\nFirst-order condition for interior maximum: \\(V^{\\prime}(x) - C_x(x, s) = 0\\)\n\n\nDefines \\(\\Omega(s)\\)\n\n\nDerivative of \\(x\\) with respect to \\(s\\): \\(\\frac{dx}{ds} = \\frac{C_{xs}(x, s)}{V^{\\prime \\prime}(x) - C_{xx}(x, s)} &gt; 0\\)\n\n\nIndicates larger scale increases Congress’s optimal choice of output up to \\(\\bar{s}\\)\n\n\nEquilibrium at \\((\\bar{x}, \\bar{s})\\): Military exploits first-mover advantage, extracting all social surplus\n\nEquilibrium Outcome:\n\nGreater than first-best scale and output: \\(\\bar{x} &gt; x^*\\), \\(\\bar{s} &gt; s^*\\)\n\nFirst best condition:\n\n\\(V^{\\prime}(x) - C_x(x, s) = 0\\) evaluated at \\((\\bar{x}, \\bar{s})\\): \\(V^{\\prime}(\\bar{x}) - C_x(\\bar{x}, \\bar{s}) &lt; 0\\)\n\nDue to concavity, \\(\\bar{x}\\) needs adjustment, leading to smaller level satisfying (5.14)\n\nSimilar demonstration for \\(\\bar{s} &gt; s^*\\)\n\n\nRogerson Game Analysis Insights:\n\nProcurement Decision Organization:\n\nMay lead to strategic interactions not aligned with society’s interest\n\nImportance of Insight:\n\nHelps in designing more optimal procurement structures\n\nExample:\n\nRogerson (1990, 1991a) investigated fixing a budget prior to the sequential game\nWith sufficient foresight, budget setting could result in a first-best outcome\n\nMisalignment of Interests:\n\nWhen players have different objective functions, strategic interactions are crucial\n\nAdditional Constraints:\n\nIntroduction of constraints like incentive-compatible mechanisms can improve outcomes\n\nGame Theory in Procurement:\n\nParticularly suitable for analysing procurement\n\n\n\n\n\n2.7 The Impact of Market Failure of Contracting\n\nGovernment Strategies for Defense Contracts:\n\nObjective:\n\nEnsure private firms fulfill defense contracts at reasonable cost, timely manner, and with suitable quality\n\nStrategies (Burnett and Kovacic, 1989; Laffont and Tirole, 1993; Rob, 1986):\n\nIncentive contracts\nRegulatory arrangements for cost disclosure and profit control\nUse of competition at various project life cycle stages\n\n\nNew Economics of Defense Contracting:\n\nStarts from Distinctive Features of Defense Market:\n\nDominance of a single large customer in the domestic market\nHigh uncertainty due to rapidly changing, high technology\nInformation gaps and asymmetries\nLong-term contractual relationships (design, development, production, in-service support)\n\n\nChallenges and Considerations in Defense Contracts:\n\nUncertainty:\n\nAbout buyer requirements, cost, and performance\n\nInformation Gaps:\n\nAccentuated by differences in information available to buyers and sellers\n\nLong-term Contracts:\n\nInevitably incomplete due to impossibility of anticipating all future contingencies\n\nSpecific Investments:\n\nSuppliers invest in human and physical capital, limiting alternatives for buyers\n\nEx Post Opportunism:\n\nOccurs on both sides of the buyer-seller relationship\n\nTradeoff:\n\nFinding optimal balance between flexibility and prevention of opportunism\n\n\nLong-Term Contracts and Incentives:\n\nIncentives to bid low for development contracts and earn monopoly rents on production work\nModel suggests that raising profit policy mark-up can reduce expected contractor profit and government expenditure\nEmphasis on competitive initial contracts with subsequent profit regulation\n\nIndustry Characteristics:\n\nMonopoly or oligopoly on the supply side for high technology projects\nMulti-product firms with product cost measurement challenges\nIndustry regulation on cost estimating, accountancy practices, and profitability\nRegulatory requirements to prevent dishonesty and shirking by firms\n\nDistinctive Features Impacting Contractual Relationships:\n\nSimple for standard items, complex for long-term contracts under uncertainty\nComplicated by asymmetrical information, adverse selection, moral hazard, risk sharing, and monitoring\n\nPolicy Instruments:\n\nFixed-price, cost reimbursement, and incentive contracts used to address procurement problems\n\n\n\nFixed Price Contracts\n\nAdoption Conditions:\n\nUsually adopted under competition or sole-source purchasing\nAppropriate when few technological and economic uncertainties exist\nReluctance when there are information asymmetries\n\nChallenges with Fixed-Price Contracts:\n\nGovernments may be ignorant about a firm’s cost conditions\nFirms can earn informational rents due to this ignorance\nOptimal incentive contracts tend toward fixed-price as demand increases\n\n\n\n\nCost Plus Contracts\n\nRisk and Cost Maximization:\n\nAvoid excessive profits but potential for cost maximization\nGovernment acts as an insurer, providing full insurance to the firm\nOptimal risk-sharing arrangement for risk-averse firms and risk-neutral governments\n\nFormula for Contractor Profitability:\n\n\\[\\Pi_a = \\Pi_t + s(C_t - C_a)\\]\nWhere:\n\n\\(\\Pi_a =\\) actual contractor profitability\n\\(\\Pi_t =\\) target profit allowed by the government\n\\(s =\\) sharing ratio\n\\(C_t =\\) target or estimated costs\n\\(C_a =\\) actual costs\n\n\\(s = 1\\) for fixed-price contracts, \\(s = 0\\) for cost-plus contracts, and \\(s\\) varies between 0 and 1 for incentive contracts\n\n\n\n\nIncentive Contracts\n\nCompromise Between Fixed-Price and Cost-Plus:\n\nViewed as a compromise between the extremes of fixed-price and cost-plus\nOptimal contract is usually incentive, not cost-plus, according to McAfee and McMillan\nResult in cost savings compared to fixed-price contracts\n\nBargaining and Control Measures:\n\nBargaining involves target cost, target profit, sharing ratio, and maximum price liability\nBudget-based schemes proposed to control high-cost targets and encourage reporting incentives\nGovernment receives useful information for budget-planning through budget-based schemes\n\n\n\n\nEfficiency Insights and Models\n\nEfficiency Properties of Different Contracts:\n\nFigure 5.2: Relationship between fixed-price, cost-plus, and incentive contracts\nFigure 5.3: Role of pressure, sharing ratio, firm effort, and implications for efficiency\n\nComplexity and No Universal Rule:\n\nShubik’s conclusion: No simple rule universally optimal for large-scale procurement\nAuctions efficient for many commodities, fixed-price contracts attractive but have risk-sharing problems, cost-plus offers simplicity but poor incentives\n\n\n\n\n\n2.8 Regulation\n\n\n2.9 Competition, contracts, and performance\n\n\n2.10 Conclusion: the results of competition"
  },
  {
    "objectID": "posts/20240127-NLP with ChatGPT/20240127-NLP with ChatGPT.html",
    "href": "posts/20240127-NLP with ChatGPT/20240127-NLP with ChatGPT.html",
    "title": "NLP with Chat GPT",
    "section": "",
    "text": "Code\n# Load Lines and Split YAML and MD\nlines &lt;- readLines(\"pac.md\")\nyaml_index &lt;- (stringr::str_detect(lines, \"---\") |&gt;\n  which())[1:2]\nyaml &lt;- lines[yaml_index[1]:yaml_index[2]]\nmd &lt;- lines[(yaml_index[2]+1):length(lines)]\n\n\n\n\nCode\n# Extract Questions and Individual\ndf &lt;- dplyr::tibble(text = md) |&gt;\n  dplyr::summarise(text = paste(text, collapse = \"\\n\")) |&gt;\n  dplyr::mutate(text = stringr::str_split(text, \"\\n\\n\")) |&gt;\n  tidyr::unnest(text) |&gt;\n  dplyr::slice(8:457) |&gt;\n  dplyr::mutate(paragraph_id = 1:dplyr::n()) |&gt;\n  dplyr::mutate(question = stringr::str_extract(text, \"^Q[1-9] |^Q[1-9][0-9] |Q[1-9][0-9]{2} \")) |&gt;\n  dplyr::mutate(person = stringr::str_locate(text, \": \")[,\"start\"]) |&gt;\n  dplyr::mutate(person = substr(text, 1, person-1)) |&gt;\n  dplyr::mutate(text = ifelse(!is.na(person), stringr::str_remove(text, paste0(person, \": \")), text)) |&gt;\n  tidyr::fill(question, person) |&gt;\n  dplyr::mutate(person = trimws(stringr::str_remove(person, question))) |&gt;\n  dplyr::mutate(question = trimws(question))\n\ndf |&gt;\n  dplyr::filter(text == \"\")\n\n\n# A tibble: 0 × 4\n# ℹ 4 variables: text &lt;chr&gt;, paragraph_id &lt;int&gt;, question &lt;chr&gt;, person &lt;chr&gt;\n\n\n\n\nCode\n# Setup Open AI\nimport os\nfrom openai import OpenAI\nfrom tqdm import tqdm\nn = len(r.df[\"text\"])\nclient = OpenAI(\n    # This is the default and can be omitted\n    api_key=os.environ.get(\"OPENAI_API_KEY\"),\n)\n\n\n\n\nCode\n# Extract the keywords\nkeywords = []\nfor i in tqdm(range(0, n)):\n  para = r.df[\"text\"][i]\n  chat_completion = client.chat.completions.create(\n    messages=[\n        {\n            \"role\": \"user\",\n             \"content\": f\"Label the topics being discussed in the following paragraph using words or a short phrase, separate the topic labels with a comma:\\n {para}\\n\",\n        }\n    ],\n    model=\"gpt-3.5-turbo\",\n    )\n  keywords.append(chat_completion.choices[0].message.content)\n\n\n\n\nCode\nsentiment = []\nfor i in tqdm(range(0, n)):\n  para = r.df[\"text\"][i]\n  chat_completion = client.chat.completions.create(\n    messages=[\n        {\n            \"role\": \"user\",\n             \"content\": f\":Rate the sentiment expressed in the following paragraph on a scale of 1 to 10 where 1 is very negative and 10 is very positive:\\n {para}\\n\",\n        }\n    ],\n    model=\"gpt-3.5-turbo\",\n    )\n  sentiment.append(chat_completion.choices[0].message.content)\n\n\n\n\nCode\ndf = r.df\ndf[\"keywords\"] = keywords\ndf[\"sentiment\"] = sentiment\ndf.to_csv(\"out.csv\", index=False)\n\n\n\n\nCode\nlibrary(ggplot2)\ndf &lt;- readr::read_csv(\"out.csv\")\n\n\nRows: 450 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): text, question, person, keywords, sentiment\ndbl (1): paragraph_id\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\nna &lt;- c(\"I'm sorry, but without any specific sentiment mentioned in the paragraph, it is not possible to rate it on a scale of 1 to 10. The paragraph simply asks for clarification regarding the timeframe of something, and does not express any positive or negative sentiment.\",    \n\"As an AI language model, I do not possess personal opinions or emotions. Therefore, I am unable to rate the sentiment expressed in the given statement.\" ,\n\"Without any additional context, it is difficult to accurately rate the sentiment expressed in the given statement.\",\n\"Without any context provided, it is impossible to determine the sentiment expressed in the given phrase.\",\n\"Since the given statement is an incomplete sentence, it is difficult to determine the exact sentiment being expressed. Therefore, it is not possible to rate the sentiment on a scale of 1 to 10.\",\n\"It is difficult to accurately rate the sentiment expressed in this paragraph since it is incomplete and lacks emotional context. Without further information, it is not possible to determine whether the sentiment is positive or negative.\",\n\"I'm sorry, but the given sentence \\\"It is 2032.\\\" does not convey any sentiment, as it is a neutral statement indicating a specific year. Therefore, it would not be accurate to rate it on a scale of 1 to 10.\", \n\"Without the complete sentence, it is difficult to accurately rate the sentiment expressed in the paragraph. Please provide the full sentence for a more accurate assessment.\",\n\"I am sorry, but the given phrase does not convey any specific sentiment. It appears to be incomplete and lacks context.\",\n\"There is no clear sentiment expressed in the sentence \\\"Yes.\\\" Therefore, it is not possible to rate its sentiment on a scale from 1 to 10.\"\n)    \n\n\ndf &lt;- df |&gt; \n  dplyr::mutate(sentiment_score = as.numeric(stringr::str_extract(sentiment, \"[1-9].5|[1-9]|10\"))) |&gt;\n  dplyr::mutate(sentiment_score = ifelse(sentiment %in% na, 5, sentiment_score)) |&gt; \n  dplyr::mutate(question = as.numeric(stringr::str_remove(question, \"Q\"))) \n\nggplot(df) + geom_line(aes(paragraph_id, sentiment_score))\n\n\n\n\n\nCode\nggplot(df) + geom_boxplot(aes(person, sentiment_score)) + coord_flip()\n\n\nWarning: Removed 4 rows containing non-finite values (`stat_boxplot()`).\n\n\n\n\n\n\n\nCode\nlibrary(plotly)\n\n\n\nAttaching package: 'plotly'\n\n\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n\n\nThe following object is masked from 'package:stats':\n\n    filter\n\n\nThe following object is masked from 'package:graphics':\n\n    layout\n\n\nCode\ndf$split_text &lt;- purrr::map_chr(df$text, ~{\n  # Locate Spaces\n  spaces &lt;- stringr::str_locate_all(.x, \"\\\\s\")[[1]][,\"start\"]\n  \n  # Locate Space Closest to Every N Characters\n  n &lt;- 100\n  if(max(spaces)&lt;n) {\n    from &lt;- 1\n    to &lt;- nchar(.x)\n  } else{\n    splits &lt;- purrr::map_int(seq(n, nchar(.x), by = n), ~{\n      spaces[which(abs(spaces-.x) == min(abs(spaces-.x)))][1]\n    })\n    from &lt;- head(c(1, splits, nchar(.x)), -1)\n    to &lt;- tail(c(1, splits, nchar(.x)), -1)\n  }\n  \n  new_text &lt;- character()\n  for(j in seq_along(from)){\n    new_text &lt;- paste0(new_text, paste0(substr(.x, from[j], to[j])), \"&lt;br&gt;\")\n  }\n  new_text\n  \n\n})\n\n\nWarning in max(spaces): no non-missing arguments to max; returning -Inf\n\nWarning in max(spaces): no non-missing arguments to max; returning -Inf\n\nWarning in max(spaces): no non-missing arguments to max; returning -Inf\n\nWarning in max(spaces): no non-missing arguments to max; returning -Inf\n\nWarning in max(spaces): no non-missing arguments to max; returning -Inf\n\n\nCode\nplot_ly(df, x = ~question, \n        y = ~factor(person,rev(unique(person))), \n        z = ~sentiment_score, type = \"heatmap\",\n        text = ~split_text,\n        hovertemplate = \"%{text}&lt;extra&gt;&lt;/extra&gt;\") |&gt;\n  layout(yaxis = list(title = \"Person\"),\n         xaxis = list(title = \"Question\")) \n\n\n\n\n\n\n\n\n\nCode\nquestion_text2 &lt;- df |&gt; \n  dplyr::group_by(question) |&gt; \n  dplyr::group_split() |&gt;\n  purrr::map(~{\n    dplyr::tibble(\n      question = .x$question[1], \n      text = paste(paste(paste0(.x$person,\":\"), .x$text), collapse = \"\\n\")\n    )\n    }) |&gt;\n  dplyr::bind_rows() \n\n\n\n\nCode\n# Extract the keywords\ntopics = []\nn = len(r.question_text2[\"text\"])\nfor i in tqdm(range(0, n)):\n  para = r.question_text[\"text\"][i]\n  chat_completion = client.chat.completions.create(\n    messages=[\n        {\n            \"role\": \"user\",\n             \"content\": f\"Label the topic being discussed in the given context using only a single word or very short phrase. Context:\\n {para}\\n\",\n        }\n    ],\n    model=\"gpt-3.5-turbo\",\n    )\n  topics.append(chat_completion.choices[0].message.content)\n\n\n\n\nCode\nlibrary(reticulate)\n\nq_sent_topic &lt;- df |&gt; \n  dplyr::group_by(question) |&gt; \n  dplyr::group_split() |&gt;\n  purrr::map(~{\n    dplyr::tibble(\n      question = .x$question[1], \n      text = paste(paste(paste0(.x$person,\":\"), .x$text), collapse = \"\\n\"),\n      avg_sentiment = mean(.x$sentiment_score, na.rm = TRUE)\n    )\n    }) |&gt;\n  dplyr::bind_rows() |&gt;\n  dplyr::mutate(topic = py$topics) \n\nwrite.csv(q_sent_topic, \"q_sent_topic.csv\", row.names = FALSE)\n\n\n\n\nCode\nq_sent_topic &lt;- readr::read_csv(\"q_sent_topic.csv\")\n\n\nRows: 138 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): text, topic\ndbl (2): question, avg_sentiment\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\nq_sent_topic |&gt;\n  dplyr::mutate(topic = paste0(\"Q\", question, \" \", topic)) |&gt;\n  dplyr::select(topic, question, text, avg_sentiment) |&gt;\n  dplyr::mutate(topic = factor(topic, unique(topic))) |&gt;\n  DT::datatable(filter = \"top\", rownames = FALSE)\n\n\n\n\n\n\n\nCode\npdf &lt;- q_sent_topic |&gt;\n  dplyr::mutate(id = paste(question, topic))  |&gt;\n  dplyr::mutate(avg_sentiment = avg_sentiment-5) |&gt;\n  dplyr::mutate(positive = avg_sentiment&gt;0)\n\npdf |&gt;\n  dplyr::slice(1:50) |&gt;\n  ggplot() + geom_bar(aes(factor(id,rev(unique(id))), avg_sentiment, fill = positive), stat = \"identity\") + \n  coord_flip() +\n  scale_y_continuous(breaks = -4:4,\n                     limits = c(-4, 4))\n\n\n\n\n\nCode\npdf |&gt;\n  dplyr::slice(51:100) |&gt;\n  ggplot() + geom_bar(aes(factor(id,rev(unique(id))), avg_sentiment, fill = positive), stat = \"identity\") + \n  coord_flip() +\n  scale_y_continuous(breaks = -4:4,\n                     limits = c(-4, 4))\n\n\n\n\n\nCode\npdf |&gt;\n  dplyr::slice(101:150) |&gt;\n  ggplot() + geom_bar(aes(factor(id,rev(unique(id))), avg_sentiment, fill = positive), stat = \"identity\") + \n  coord_flip() +\n  scale_y_continuous(breaks = -4:4,\n                     limits = c(-4, 4))"
  },
  {
    "objectID": "posts/20230829-Synthetic Control Methods/synthetic-control.html",
    "href": "posts/20230829-Synthetic Control Methods/synthetic-control.html",
    "title": "Synthetic Control Methods",
    "section": "",
    "text": "Use of historical data to construct a ‘synthetic clone’ of a group receiving a particular intervention. Differences between the performance of the actual group and its synthetic clone may be used as evidence that the intervention has had an effect. Most commonly applied to interventions applied at an area level (Treasury 2020)."
  },
  {
    "objectID": "posts/20230829-Synthetic Control Methods/synthetic-control.html#inference",
    "href": "posts/20230829-Synthetic Control Methods/synthetic-control.html#inference",
    "title": "Synthetic Control Methods",
    "section": "Inference",
    "text": "Inference\nFor inference, the method relies on repeating the method for every donor in the donor pool exactly as was done for the treated unit — i.e. generating placebo synthetic controls). By setting generate_placebos = TRUE when initializing the synth pipeline with synthetic_control(), placebo cases are automatically generated when constructing the synthetic control of interest. This makes it easy to explore how unique difference between the observed and synthetic unit is when compared to the placebos.\n\n\nCode\nsmoking_out %&gt;% plot_placebos()\n\n\n\n\n\nNote that the plot_placebos() function automatically prunes any placebos that poorly fit the data in the pre-intervention period. The reason for doing so is purely visual: those units tend to throw off the scale when plotting the placebos. To prune, the function looks at the pre-intervention period mean squared prediction error (MSPE) (i.e. a metric that reflects how well the synthetic control maps to the observed outcome time series in pre-intervention period). If a placebo control has a MSPE that is two times beyond the target case (e.g. “California”), then it’s dropped. To turn off this behavior, set prune = FALSE.\n\n\nCode\nsmoking_out %&gt;% plot_placebos(prune = FALSE)\n\n\n\n\n\nFinally, Adabie et al. 2010 outline a way of constructing Fisher’s Exact P-values by dividing the post-intervention MSPE by the pre-intervention MSPE and then ranking all the cases by this ratio in descending order. A p-value is then constructed by taking the rank/total.1 The idea is that if the synthetic control fits the observed time series well (low MSPE in the pre-period) and diverges in the post-period (high MSPE in the post-period) then there is a meaningful effect due to the intervention. If the intervention had no effect, then the post-period and pre-period should continue to map onto one another fairly well, yielding a ratio close to 1. If the placebo units fit the data similarly, then we can’t reject the hull hypothesis that there is no effect brought about by the intervention.\nThis ratio can be easily plotted using plot_mspe_ratio(), offering insight into the rarity of the case where the intervention actually occurred.\n\n\nCode\nsmoking_out %&gt;% plot_mspe_ratio()\n\n\n\n\n\nFor more specific information, there is a significance table that can be extracted with one of the many grab_ prefix functions.\n\n\nCode\nsmoking_out %&gt;% grab_significance()\n\n\n# A tibble: 39 × 8\n   unit_name      type  pre_mspe post_mspe mspe_ratio  rank fishers_exact_pvalue\n   &lt;chr&gt;          &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;int&gt;                &lt;dbl&gt;\n 1 California     Trea…     3.17     392.      124.       1               0.0256\n 2 Georgia        Donor     3.79     179.       47.2      2               0.0513\n 3 Indiana        Donor    25.2      770.       30.6      3               0.0769\n 4 West Virginia  Donor     9.52     284.       29.8      4               0.103 \n 5 Wisconsin      Donor    11.1      268.       24.1      5               0.128 \n 6 Missouri       Donor     3.03      67.8      22.4      6               0.154 \n 7 Texas          Donor    14.4      277.       19.3      7               0.179 \n 8 South Carolina Donor    12.6      234.       18.6      8               0.205 \n 9 Virginia       Donor     9.81      96.4       9.83     9               0.231 \n10 Nebraska       Donor     6.30      52.9       8.40    10               0.256 \n# ℹ 29 more rows\n# ℹ 1 more variable: z_score &lt;dbl&gt;"
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#introduction",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#introduction",
    "title": "Regression Discontinuity Design",
    "section": "Introduction",
    "text": "Introduction\n\nSocial programmes often have eligability indices that determine who can and cannot signup.\nExamples include targeted antipoverty programmes based on means. Tests scores.\n\n\nRegression discontinuity design (RDD) is an impact evaluation method that is adequate for programs that use a continuous index to rank potential participants and that have a cutoff point along the index that determines whether or not potential participants are eligible to receive the program."
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#conditions",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#conditions",
    "title": "Regression Discontinuity Design",
    "section": "Conditions",
    "text": "Conditions\nTo apply RDD 4 main conditions must be met:\n\nThe index must rank people in a continuous way. By contrast, variables that have discrete categories cannot be ranked.\nThere must be a clear defined cutoff score. The value above or below that the population is eligable for the programme.\nThe cutoff must be unique to the programme of interest. There must be no other programme, apart from the one to be evaluated that uses the same cutoff score.\nThe score of a particular individual or unit cannot be manipuated by data collectors, beneficiaries, administrators, or politicians.\n\nRDD esitmate impact around the eligability cutoff as difference between average outcome for units on the treated side of eligability cutoff and average outcome of units on the untreated (comparison) side of the cutoff.\nAn example based on agriculture where the scheme is determine by hectare of land is provided.\nIt makes the point that since the comparison group is made up of farm just above the eligability threshold, teh impact given by RDD is valid only locally. Therefore we obtain an estimate of the Local Average Treatment Effect (LATE). The RDD will not be able to identify the impact on the smallest farms.\nAn advantage is that when the eligability rule is applied, not eligable units need ot be left untreated for the purpose of the impact evaluation. The trade off is that observations far away from the cutoff will not be known."
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#fuzzy-rdd",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#fuzzy-rdd",
    "title": "Regression Discontinuity Design",
    "section": "Fuzzy RDD",
    "text": "Fuzzy RDD\nFuzzy RDD. Some units who qualify for the programme may not opt to participate. Or others may find a way to participate even if they are on the other side of the line.\nWhen all units comply with the assignment that corresponds to them on the basis of their eligibility index, we say that the RDD is “sharp,” while if there is noncompliance on either side of the cutoff , then we say that the RDD is “fuzzy”.\nIf the RDD is fuzzy, we can use the instrumental variable approach to correct for the noncompliance. In the case of randomized assignment with noncompliance, we used the randomized assignment as the instrumental variable that helped us correct for noncompliance.\nIn the case of RDD, we can use the original assignment based on the eligibility index as the instrumental variable. Doing so has a drawback, though: our instrumental RDD impact estimate will be further localized—in the sense that it is no longer valid to all observations close to the cutoff , but instead represents the impact for the subgroup of the population that is located close to the cutoff point and that participates in the program only because of the eligibility criteria.\n\n\n\nGertler et al 2016 Figure 6.3"
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#testing-validity-of-rdd",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#testing-validity-of-rdd",
    "title": "Regression Discontinuity Design",
    "section": "Testing Validity of RDD",
    "text": "Testing Validity of RDD\nFor RDD to provide unbiased estimates of LATE there must be no manipulation of the eligibility index around the cutoff.\nA tell tale sign of manipuation is where there is bunching around the cutoff, e.g. look at the percentage of households at the cuttoff. A second test is to plot the eligability index against the outcome index at baseline and check there are no discontinuities or jump right around the cutoff."
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#limitations-and-interpretations",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#limitations-and-interpretations",
    "title": "Regression Discontinuity Design",
    "section": "Limitations and Interpretations",
    "text": "Limitations and Interpretations\nBecause the RDD method estimates the impact of the program around the cutoff score, or locally, the estimate cannot necessarily be generalized to units whose scores are further away from the cutoff score: that is, where eligible and ineligible individuals may not be as similar."
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#checklist",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#checklist",
    "title": "Regression Discontinuity Design",
    "section": "Checklist",
    "text": "Checklist\n\nIs the index continuous around the cutoff score at the time of the baseline?\nIs there any evidence of noncompliance with the rule that determines eligibility for treatment? Test whether all eligible units and no ineligible units have received the treatment. If you find noncompliance, you will need to combine RDD with an instrumental variable approach to correct for this \"fuzzy discontinuity.\"\nIs there any evidence that index scores may have been manipulated in order to influence who qualified for the program? Test whether the distribution of the index score is smooth at the cutoff point. If you fi nd evidence of \"bunching\" of index scores either above or below the cutoff point, this might indicate manipulation.\nIs the cutoff unique to the program being evaluated, or is the cutoff used by other programs as well?\n\nFor a review of practical issues in implementing RDD, see Imbens and Lemieux (2008)"
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#how-is-it-performed",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#how-is-it-performed",
    "title": "Regression Discontinuity Design",
    "section": "How is it performed?",
    "text": "How is it performed?\n\\[Y = \\beta_0 + \\beta_1 (Running-Cutoff) + \\beta_2 Treated + \\beta_3 (Running - Cutoff) * Treated + \\varepsilon\\]\nThis is a simple linear approach to regression discontinuity, where \\(\\Running\\) is the running variable which we have centred around the cutoff using \\((Running-Cutoff)\\). This takes a negative value to the left of the cutoff, zero at the cutoff, and a positive value to the right. We’re talking about a sharp regression discontinuity here, so \\(Treated\\) is both an indicator for being treated and an indicator for being above the cutoff - these are the same thing. The model is generally estimated using heteroskedasticity-robust standard errors, as one might expect the discontinuity and general shape of the line we’re fitting to exhibit heteroskedasticity in most cases.We’ll ignore the issue of a bandwidth for now and come back to it later - this regression approach can be applied whether you use all the data or limit yourself to a bandwidth around the cutoff.\nNotice the lack of control variables In most other chapters, when I do this it’s to help focus your attention on the design. Here, it’s very intentional. The whole idea of regression discontinuity is that you have nearly random assignment on either side of the cutoff. You shouldn’t need control variables because the design itself should close any back doors. No open back doors? No need for controls. Adding controls implies you don’t believe the assumptions necessary for the regression discontinuity method to work, and makes the whole thing becomes a bit suspicious to any readers."
  },
  {
    "objectID": "posts/20230618-Regression Discontinuity Design/rdd.html#r-code",
    "href": "posts/20230618-Regression Discontinuity Design/rdd.html#r-code",
    "title": "Regression Discontinuity Design",
    "section": "R code",
    "text": "R code\nLet’s code up some regression discontinuity! I’m going to do this in two ways. First I’m going to run a plain-ol’ ordinary least squares model with a bandwidth and kernel weight applied, with heteroskedasticity-robust standard errors. However, there are a number of other adjustments we’ll be talking about in this chapter, and it can be a good idea to pass this task off to a package that knows what it’s doing. I see no point in showing you code you’re unlikely to use just because we haven’t gotten to the relevant point in the chapter yet. So we’ll be using those specialized commands as well, and I’ll talk later about some of the extra stuff they’re doing for us.\nFor this example we’re going to use data from Government Transfers and Political Support by Manacorda, Miguel, and Vigorito (2011Manacorda, Marco, Edward Miguel, and Andrea Vigorito. 2011. “Government Transfers and Political Support.” American Economic Journal: Applied Economics 3 (3): 1–28.). This paper looks at a large poverty alleviation program in Uruguay which cut a sizeable check to a large portion of the population. They are interested in whether receiving those funds made people more likely to support the newly-installed center-left government that sent them.\nWho got the payments? You had to have an income low enough. But they didn’t exactly use income as a running variable; that might have been too easy to manipulate. Instead, the government used a bunch of factors - housing, work, reported income, schooling - and predicted what your income would be from that. Then, the predicted income was the running variable, and treatment was assigned based on being below a cutoff. About 14% of the population ended up getting payments.\nThe researchers polled a bunch of people near the income cutoff to check their support for the government afterwards. Did people just below the income cutoff support the government more than those just above?\nThe data set we have on government transfers comes with the predicted-income variable pre-centered so the cutoff is at zero. Then, support for the government takes three values: you think they’re better than the previous government (1), the same (1/2) or worse (0). The data only includes individuals near the cutoff - the centered-income variable in the data only goes from -.02 to .02.\nBefore we estimate our model, let’s do a nearly-compulsory graphical regression discontinuity check so we can confirm that there does appear to be some sort of discontinuity where we expect it. This is a “plot of binned means.” There are some preprogrammed ways to do this like rdplot in R or Stata in the rdrobust package or binscatter in Stata from the binscatter package, but this is easy enough that we may as well do it by hand and flex those graphing muscles.\nFor one of these graphs, you generally want to (1) slice the running variable up into bins (making sure the cutoff is the edge between two bins), (2) take the mean of the outcome within each of the bins, and (3) plot the result, with a vertical line at the cutoff so you can see where the cutoff is. Then you’d generally repeat the process with treatment instead of the outcome to produce a graph like below.\n\n\nCode\nlibrary(tidyverse)\ngt &lt;- causaldata::gov_transfers\n\n# Use cut() to create bins, using breaks to make sure it breaks at 0\n# (-15:15)*.02/15 gives 15 breaks from -.02 to .02\nbinned &lt;- gt %&gt;%\n    mutate(Inc_Bins = cut(Income_Centered,\n           breaks = (-15:15)*(.02/15))) %&gt;%\n    group_by(Inc_Bins) %&gt;%\n    summarize(Support = mean(Support),\n    Income = mean(Income_Centered))\n# Taking the mean of Income lets us plot data roughly at the bin midpoints\n\nggplot(binned, aes(x = Income, y = Support)) + \n    geom_line() + \n    # Add a cutoff line\n    geom_vline(aes(xintercept = 0), linetype = 'dashed')\n\n\n\n\n\nNow that we have our graph in mind, we can actually estimate our model. We’ll start doing it with OLS and a second-order polynomial, and then we’ll do a linear model with a triangular kernel weight, limiting the bandwidth around the cutoff to .01 on either side. The bandwidth in this case isn’t super necessary - the data is already limited to .02 on either side around the cutoff - but this is just a demonstration.\nIt’s important to note that the first step of doing regression discontinuity with OLS is to center the running variable around the cutoff. This is as simple as making the variable \\(RunningVariable - Cutoff\\), translated into whatever language you use. The second step would then be to create a “treated” variable \\(RunningVariable &lt; Cutoff\\) (since treatment is applied below the cutoff in this instance). But in this case, the running variable comes pre-centered (\\(IncomeCentred\\)) and the below-cutoff treatment variable is already in the data (\\(Participation\\) ) so I’ll leave those parts out.\n\n\nCode\nlibrary(tidyverse); library(modelsummary)\n\n\nWarning: package 'modelsummary' was built under R version 4.3.1\n\n\nCode\ngt &lt;- causaldata::gov_transfers\n\n# Linear term and a squared term with \"treated\" interactions\nm &lt;- lm(Support ~ Income_Centered*Participation +\n       I(Income_Centered^2)*Participation, data = gt)\n\n# Add a triangular kernel weight\nkweight &lt;- function(x) {\n    # To start at a weight of 0 at x = 0, and impose a bandwidth of .01, \n    # we need a \"slope\" of -1/.01 = 100, \n    # and to go in either direction use the absolute value\n    w &lt;- 1 - 100*abs(x)\n    # if further away than .01, the weight is 0, not negative\n    w &lt;- ifelse(w &lt; 0, 0, w)\n    return(w)\n}\n\n# Run the same model but with the weight\nmw &lt;- lm(Support ~ Income_Centered*Participation, data = gt,\n         weights = kweight(Income_Centered))\n\n# See the results with heteroskedasticity-robust SEs\nmsummary(list('Quadratic' = m, 'Linear with Kernel Weight' = mw), \n    stars = c('*' = .1, '**' = .05, '***' = .01), vcov = 'robust')\n\n\nWarning in residuals^2/(1 - diaghat)^2: longer object length is not a multiple\nof shorter object length\n\n\nWarning in residuals^2/(1 - diaghat)^2: longer object length is not a multiple\nof shorter object length\n\n\n\n\n\n\n\nhttps://rdpackages.github.io/\n\n\nCode\nlibrary(tidyverse); library(rdrobust)\n\n\nWarning: package 'rdrobust' was built under R version 4.3.1\n\n\nCode\ngt &lt;- causaldata::gov_transfers\n\n# Estimate regression discontinuity and plot it\nm &lt;- rdrobust(gt$Support, gt$Income_Centered, c = 0)\n\n\nWarning in rdrobust(gt$Support, gt$Income_Centered, c = 0): Mass points\ndetected in the running variable.\n\n\nCode\nsummary(m)\n\n\nSharp RD estimates using local polynomial regression.\n\nNumber of Obs.                 1948\nBW type                       mserd\nKernel                   Triangular\nVCE method                       NN\n\nNumber of Obs.                 1127          821\nEff. Number of Obs.             291          194\nOrder est. (p)                    1            1\nOrder bias  (q)                   2            2\nBW est. (h)                   0.005        0.005\nBW bias (b)                   0.010        0.010\nrho (h/b)                     0.509        0.509\nUnique Obs.                     841          639\n\n=============================================================================\n        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       \n=============================================================================\n  Conventional     0.025     0.062     0.396     0.692    [-0.098 , 0.147]     \n        Robust         -         -     0.624     0.533    [-0.097 , 0.188]     \n=============================================================================\n\n\nCode\n# Note, by default, rdrobust and rdplot use different numbers\n# of polynomial terms. You can set the p option to standardize them.\nrdplot(gt$Support, gt$Income_Centered)\n\n\n[1] \"Mass points detected in the running variable.\"\n\n\n\n\n\n\n\nCode\nlibrary(tidyverse); library(fixest); library(modelsummary)\n\n\nWarning: package 'fixest' was built under R version 4.3.1\n\n\nCode\nvet &lt;- causaldata::mortgages\n\n# Create an \"above-cutoff\" variable as the instrument\nvet &lt;- vet %&gt;% mutate(above = qob_minus_kw &gt; 0)\n\n# Impose a bandwidth of 12 quarters on either side\nvet &lt;- vet %&gt;%  filter(abs(qob_minus_kw) &lt; 12)\n\nm &lt;- feols(home_ownership ~\n    nonwhite  | # Control for race\n    bpl + qob | # fixed effect controls\n    qob_minus_kw*vet_wwko ~ # Instrument our standard RDD\n    qob_minus_kw*above, # with being above the cutoff\n    se = 'hetero', # heteroskedasticity-robust SEs\n    data = vet) \n\n# And look at the results\nmsummary(m, stars = c('*' = .1, '**' = .05, '***' = .01))\n\n\n\n\n\n\n\n\n\nCode\nlibrary(tidyverse); library(rdrobust)\nvet &lt;- causaldata::mortgages\n\n# It will apply a bandwidth anyway, but having it\n# check the whole bandwidth space will be slow. So let's\n# pre-limit it to a reasonable range of 12 quarters\nvet &lt;- vet %&gt;%\n    filter(abs(qob_minus_kw) &lt;= 12)\n\n# Create our matrix of controls\ncontrols &lt;- vet %&gt;%\n    select(nonwhite, bpl, qob) %&gt;%\n    mutate(qob = factor(qob))\n# and make it a matrix with dummies\nconmatrix &lt;- model.matrix(~., data = controls)\n\n# This is fairly slow due to the controls, beware!\nm &lt;- rdrobust(vet$home_ownership,\n              vet$qob_minus_kw,\n              fuzzy = vet$vet_wwko,\n              c = 0,\n              covs = conmatrix)\n\n\nWarning in rdrobust(vet$home_ownership, vet$qob_minus_kw, fuzzy = vet$vet_wwko,\n: Multicollinearity issue detected in covs. Redundant covariates dropped.\n\n\nWarning in rdrobust(vet$home_ownership, vet$qob_minus_kw, fuzzy = vet$vet_wwko,\n: Mass points detected in the running variable.\n\n\nCode\nsummary(m)\n\n\nCovariate-adjusted Fuzzy RD estimates using local polynomial regression.\n\nNumber of Obs.                56901\nBW type                       mserd\nKernel                   Triangular\nVCE method                       NN\n\nNumber of Obs.                28776        28125\nEff. Number of Obs.            6911         6756\nOrder est. (p)                    1            1\nOrder bias  (q)                   2            2\nBW est. (h)                   3.387        3.387\nBW bias (b)                   5.354        5.354\nrho (h/b)                     0.633        0.633\nUnique Obs.                      12           12\n\nFirst-stage estimates.\n\n=============================================================================\n        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       \n=============================================================================\n  Conventional     0.018     0.018     0.964     0.335    [-0.018 , 0.053]     \n        Robust         -         -     2.244     0.025     [0.006 , 0.094]     \n=============================================================================\n\nTreatment effect estimates.\n\n=============================================================================\n        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       \n=============================================================================\n  Conventional    -5.377     5.716    -0.941     0.347   [-16.581 , 5.827]     \n        Robust         -         -     0.513     0.608   [-10.182 , 17.408]    \n=============================================================================\n\n\nHeiss (2020)"
  },
  {
    "objectID": "posts/20230519-Voluntary Job Separation Rates/20230519-vjs-rates.html",
    "href": "posts/20230519-Voluntary Job Separation Rates/20230519-vjs-rates.html",
    "title": "Calculate Voluntary Job Separation Rates",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\n\n\nWarning: package 'ggplot2' was built under R version 4.3.2\n\n\nCode\n# This script calculates voluntary and involuntary job separations from the \n# labour market. \n\n#+ Setup ----\n\n# Connect to Database\ncon &lt;- DBI::dbConnect(\n  odbc::odbc(), driver = \"PostgreSQL ODBC Driver(Unicode)\", \n  database = \"lfs\", uid = \"lheley\", host = \"localhost\", pwd = \"lheley\", \n  port = 5432, maxvarcharsize = 0\n)\n\n# Extract Meta Data\nstudy_meta &lt;- con |&gt; \n    dplyr::tbl(\"2qlfs_index\") |&gt;\n    dplyr::select(1:4) |&gt;\n    dplyr::collect() |&gt;\n    dplyr::left_join(\n      con |&gt;\n        dplyr::tbl(\"study_filename_lu\") |&gt;\n        dplyr::collect() |&gt;\n        dplyr::rename(SN = study) |&gt;\n        dplyr::mutate(SN = as.numeric(SN)),\n      by = \"SN\"\n    )\n\n\n#+ Define Variables ----\n# These variables were defined through comparison of the previous\n# ONS publications. \n\n# Where the question or possible responses to a question have changed\n# the variable is updated. \n\nwnleft &lt;- c(\"WNEFT112\",\"WNLEFT2\")\nrelft &lt;- c(\"REDYL112\",\"REDYL132\",\"REDYLFT2\")\nsector &lt;- \"PUBLICR1\"\nemployment &lt;- \"ILODEFR1\"\nage &lt;- \"AGE1\"\nid &lt;- c(\"PERSID\")\nlgwt &lt;- c(\"LGWT\",\"LGWT18\", \"LGWT20\") # This responds to different population weights.\nindustry &lt;- \"INDD07M1\"\nvars &lt;- c(id, lgwt, wnleft, relft, sector, employment, age, industry)\n\ntbls &lt;- DBI::dbListTables(con)\ntbls &lt;- tbls[grepl(\"sn_\", tbls)]\n\nvariables &lt;- tbls |&gt;\n  purrr::map_df(function(tbl){\n    variables &lt;- con |&gt;\n      dplyr::tbl(tbl) |&gt;\n      dplyr::select(tidyselect::any_of(vars)) |&gt;\n      head() |&gt;\n      dplyr::collect() |&gt;\n      names()\n    \n    tibble::tibble(study = substr(tbl, 4, 9), variables)\n  })\n\n#+ Select tables the contain the variables we need -----\ntbls &lt;- paste0(\"sn_\", variables |&gt; \n                 dplyr::filter(variables %in% vars) |&gt;\n                 dplyr::mutate(variables2 = dplyr::case_when(\n                   variables %in% relft ~ \"REDYLFT\",\n                   variables %in% wnleft ~ \"WNLEFT\",\n                   variables %in% lgwt ~ \"LGWT\",\n                   TRUE ~ variables\n                 )) |&gt;\n                 dplyr::select(-variables) |&gt;\n                 dplyr::mutate(value = 1) |&gt;\n                 tidyr::pivot_wider(names_from = variables2, values_from = value)  |&gt;\n                 na.omit() |&gt;\n                 dplyr::select(study) |&gt; dplyr::pull())\n\n\n#+ Calculate Statistics ------\n# Loop through the table. \n# Calculate the number of people that reason for leaving was voluntary separation\n# Calculate the overall people\n# This can be extended to include involuntary job separations\n\n\n# This code chunk loops through the selected tables\n# It selects variables which match our specified variables in 'vars'\n# It then renames variables with inconsistent names\n# Then filters between 16 and 65\n# It recode reason left to determine voluntary job separations\n# It calculates whether individual left employmnet in last three months\n# It then groups by sector and calculate the weighted and unweighted number of \n#  voluntary job separates by total sector size\nvjs &lt;- tbls |&gt;\n  purrr::map_df(function(tbl){\n    sql_tbl &lt;- con |&gt; dplyr::tbl(tbl) \n    sql_tbl |&gt;\n      dplyr::select(tidyselect::any_of(vars)) |&gt;\n      dplyr::rename(REDYLFT = tidyselect::any_of(relft)) |&gt;\n      dplyr::rename(WNLEFT = tidyselect::any_of(wnleft)) |&gt;\n      dplyr::rename(LGWT = tidyselect::any_of(lgwt))|&gt;\n      dplyr::filter(AGE1 &gt;= 16 & AGE1 &lt; 65) |&gt;\n      dplyr::collect() |&gt;\n      dplyr::mutate(VJS = dplyr::case_when(\n        \"REDYLFT2\" %in% dplyr::tbl_vars(sql_tbl) ~  REDYLFT %in% 4:9,\n        \"REDYL112\" %in% dplyr::tbl_vars(sql_tbl) ~  REDYLFT %in% 4:10,\n        \"REDYL132\" %in% dplyr::tbl_vars(sql_tbl) ~  REDYLFT %in% c(3, 5:11)\n      )) |&gt;\n      dplyr::mutate(LFT3M = WNLEFT == 1 & ILODEFR1 == 1) |&gt; \n      dplyr::mutate(VJS_3M =  VJS & LFT3M) |&gt;\n      dplyr::mutate(EMP = ILODEFR1 == 1) |&gt;\n      dplyr::mutate(PUBLIC = PUBLICR1 == 2) |&gt;\n      dplyr::mutate(PRIVATE = PUBLICR1 == 1) |&gt;\n      dplyr::mutate(SECTOR = ifelse(PUBLIC, \"Public\", ifelse(PRIVATE, \"Private\", NA))) |&gt;\n      dplyr::group_by(SECTOR) |&gt;\n      dplyr::summarise(vjs_3m_w = crossprod(LGWT, VJS_3M)[1],\n                       vjs_3m = sum(VJS_3M),\n                       n_w = crossprod(EMP, LGWT)[1],\n                       n = sum(EMP), tbl = tbl)\n  })\n\nvjs_total &lt;- study_meta |&gt; \n  dplyr::select(tbl = SN, sitdate = End) |&gt;\n  dplyr::mutate(tbl = paste(\"sn\", tbl, sep = \"_\")) |&gt;\n  dplyr::collect() |&gt;\n  dplyr::left_join(vjs, by = \"tbl\")  |&gt;\n  dplyr::group_by(sitdate) |&gt;\n  dplyr::summarise(vjs_3m_w = sum(vjs_3m_w),\n                   n_w = sum(n_w)) |&gt;\n  dplyr::mutate(vjs_rate = vjs_3m_w / n_w) \n\nvjs_sector &lt;- study_meta |&gt; \n  dplyr::select(tbl = SN, sitdate = End) |&gt;\n  dplyr::mutate(tbl = paste(\"sn\", tbl, sep = \"_\")) |&gt;\n  dplyr::collect() |&gt;\n  dplyr::left_join(vjs, by = \"tbl\")  |&gt;\n  dplyr::filter(!is.na(SECTOR)) |&gt;\n  dplyr::group_by(sitdate, sector = SECTOR) |&gt;\n  dplyr::summarise(vjs_3m_w = sum(vjs_3m_w),\n                   n_w = sum(n_w)) |&gt;\n  dplyr::mutate(vjs_rate = vjs_3m_w / n_w) \n\n\n`summarise()` has grouped output by 'sitdate'. You can override using the\n`.groups` argument.\n\n\nCode\nvjs_total$vjs_rate[vjs_total$vjs_rate == 0] &lt;- NA\nvjs_sector$vjs_rate[vjs_sector$vjs_rate == 0] &lt;- NA\n\n\nggplot(vjs_total) + \n  geom_smooth(aes(sitdate, vjs_rate)) +\n  geom_line(aes(sitdate, vjs_rate))\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\nWarning: Removed 71 rows containing non-finite values (`stat_smooth()`).\n\n\nWarning: Removed 68 rows containing missing values (`geom_line()`).\n\n\n\n\n\nCode\nggplot(vjs_sector) +\n  geom_smooth(aes(sitdate, vjs_rate)) +\n  geom_line(aes(sitdate, vjs_rate)) +\n  facet_wrap(~sector)\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\nWarning: Removed 4 rows containing non-finite values (`stat_smooth()`).\n\n\n\n\n\nCode\nDBI::dbDisconnect(con)\n\nwrite.csv(vjs_total, \"vjs_total.csv\", row.names=FALSE)\nwrite.csv(vjs_sector, \"vjs_sector.csv\", row.names = FALSE)"
  },
  {
    "objectID": "posts/20230518-Guardian-What-We-Know-Ukraine/20230518-Extract-People-from-Text.html",
    "href": "posts/20230518-Guardian-What-We-Know-Ukraine/20230518-Extract-People-from-Text.html",
    "title": "Natural Language Processing",
    "section": "",
    "text": "Code\ndf &lt;- readr::read_csv(\"2023-05-18-guardian-ukraine-what-we-know.csv\",\n                      col_types = readr::cols())\n\n\n\n\nCode\npeople &lt;- purrr::map(df$fields.body,~{\n  text &lt;- .x |&gt;\n    xml2::read_html() |&gt;\n    xml2::xml_find_all(\"//p\") |&gt;\n    xml2::xml_text()\n    \n  s &lt;- NLP::String(paste(text, collapse = \"\\n\"))\n\n  ## Need sentence and word token annotations.\n  sent_token_annotator &lt;- openNLP::Maxent_Sent_Token_Annotator()\n  word_token_annotator &lt;- openNLP::Maxent_Word_Token_Annotator()\n  a2 &lt;- NLP::annotate(s, list(sent_token_annotator, word_token_annotator))\n\n## Entity recognition for persons.\n  entity_annotator &lt;- openNLP::Maxent_Entity_Annotator()\n\n  s[entity_annotator(s, a2)]\n})\n\n\n\n\nCode\norg &lt;- purrr::map(df$fields.body,~{\n  text &lt;- .x |&gt;\n    xml2::read_html() |&gt;\n    xml2::xml_find_all(\"//p\") |&gt;\n    xml2::xml_text()\n    \n  s &lt;- NLP::String(paste(text, collapse = \"\\n\"))\n\n  ## Need sentence and word token annotations.\n  sent_token_annotator &lt;- openNLP::Maxent_Sent_Token_Annotator()\n  word_token_annotator &lt;- openNLP::Maxent_Word_Token_Annotator()\n  a2 &lt;- NLP::annotate(s, list(sent_token_annotator, word_token_annotator))\n\n## Entity recognition for persons.\n  entity_annotator &lt;- openNLP::Maxent_Entity_Annotator(kind = \"organization\")\n\n  s[entity_annotator(s, a2)]\n}, .progress = TRUE)\n\n\n\n\nCode\nloc &lt;- purrr::map(df$fields.body,~{\n  text &lt;- .x |&gt;\n    xml2::read_html() |&gt;\n    xml2::xml_find_all(\"//p\") |&gt;\n    xml2::xml_text()\n    \n  s &lt;- NLP::String(paste(text, collapse = \"\\n\"))\n\n  ## Need sentence and word token annotations.\n  sent_token_annotator &lt;- openNLP::Maxent_Sent_Token_Annotator()\n  word_token_annotator &lt;- openNLP::Maxent_Word_Token_Annotator()\n  a2 &lt;- NLP::annotate(s, list(sent_token_annotator, word_token_annotator))\n\n## Entity recognition for persons.\n  entity_annotator &lt;- openNLP::Maxent_Entity_Annotator(kind = \"location\")\n\n  s[entity_annotator(s, a2)]\n}, .progress = TRUE)"
  },
  {
    "objectID": "posts/20230401-wikidata-extract-preceded-by/20230401-extract-preceded-by.html",
    "href": "posts/20230401-wikidata-extract-preceded-by/20230401-extract-preceded-by.html",
    "title": "Extract of UK Frigates and Their Precendents",
    "section": "",
    "text": "Objective\nExtract list of UK Frigates and their precedents.\n\n\nData\nWe use wikidata to first extract the different types of warship\n\nq &lt;- '\nSELECT ?ship_type ?ship_typeLabel WHERE {\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  ?ship_type wdt:P31 wd:Q2235308;\n    wdt:P279 wd:Q3114762.\n  \n  OPTIONAL {  }\n}\n  '\n\nWikidataQueryServiceR::query_wikidata(q)\n\nRows: 55 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): ship_type, ship_typeLabel\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n# A tibble: 55 × 2\n   ship_type                              ship_typeLabel  \n   &lt;chr&gt;                                  &lt;chr&gt;           \n 1 http://www.wikidata.org/entity/Q17205  aircraft carrier\n 2 http://www.wikidata.org/entity/Q104843 cruiser         \n 3 http://www.wikidata.org/entity/Q161705 frigate         \n 4 http://www.wikidata.org/entity/Q170013 corvette        \n 5 http://www.wikidata.org/entity/Q174736 destroyer       \n 6 http://www.wikidata.org/entity/Q182531 battleship      \n 7 http://www.wikidata.org/entity/Q188924 galley          \n 8 http://www.wikidata.org/entity/Q207452 ship of the line\n 9 http://www.wikidata.org/entity/Q629990 bireme          \n10 http://www.wikidata.org/entity/Q640078 minelayer       \n# … with 45 more rows\n\n\nAnd subsequently different types of frigates operated by the Royal Navy\n\nq &lt;- '\nSELECT ?ship_class ?ship_classLabel ?service_entry ?followed_by ?followed_byLabel ?operator ?operatorLabel ?image ?service_retirement ?follows ?followsLabel ?service_entryLabel ?service_retirementLabel ?imageLabel WHERE {\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  ?ship_class wdt:P31 wd:Q559026; # instance of ship class\n    wdt:P279 wd:Q106070703. # subclass of frigate\n  ?ship_class wdt:P137 wd:Q172771. # operated by RN\n  OPTIONAL { ?ship_class wdt:P729 ?service_entry. }\n  OPTIONAL { ?ship_class wdt:P730 ?service_retirement. }\n  OPTIONAL { ?ship_class wdt:P155 ?follows. }\n  OPTIONAL { ?ship_class wdt:P156 ?followed_by. }\n  OPTIONAL { ?ship_class wdt:P137 ?operator. }\n  OPTIONAL { ?ship_class wdt:P18 ?image. }\n}\n'\nrn_frigates &lt;- WikidataQueryServiceR::query_wikidata(q)\n\nRows: 83 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (10): ship_class, ship_classLabel, followed_by, followed_byLabel, opera...\ndttm  (4): service_entry, service_retirement, service_entryLabel, service_re...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\nrn_frigates |&gt;\n  dplyr::filter(operatorLabel == \"Royal Navy\") |&gt;\n  dplyr::select(from = ship_classLabel, \n                to = followed_byLabel, \n                value = service_entry) |&gt;\n  dplyr::distinct() |&gt;\n  dplyr::filter(!is.na(to)) |&gt;\n  igraph::graph_from_data_frame() |&gt;\n  visNetwork::visIgraph()\n\n\n\n\n\nNext step. Extract data on type 26, type 23, type 22, type 21, leander class, rothesay-class, valour-class, whiteby-class and saisbury class.\nFuture intention is to compare to other nations where data are available."
  },
  {
    "objectID": "posts/20230326-using-wikidata/using-wikidata.html",
    "href": "posts/20230326-using-wikidata/using-wikidata.html",
    "title": "Using Wiki Data to Extract Data",
    "section": "",
    "text": "Objective\nExtract the knowledge graph for a Chinese strategic submarine.\n\n\nData\nWe use the wikidata API to extract the knowledge graph from wiki.\nThe approach is to search wikidata for the item of interest and select the best match from the list of search results that return.\n\n# function to search wiki data and return a tibble of search results\nsearch_wikidata &lt;- function(search){\n  base &lt;- \"https://www.wikidata.org\" \n  path &lt;- \"/w/api.php\"\n  query &lt;- list(\n    action=\"query\",\n    list=\"search\",\n    format = \"json\",\n    srsearch = search\n  )\n  \n  httr::GET(base, path = path, query = query) |&gt;\n    httr::content() |&gt;\n    purrr::pluck(\"query\", \"search\") |&gt;\n    purrr::map_df(~{\n      ul &lt;- unlist(.x)\n      name &lt;- names(ul)\n      value &lt;- as.character(ul)\n      dplyr::tibble(name, value) |&gt;\n        tidyr::pivot_wider()\n      })\n}\n\n(search_results &lt;- search_wikidata(\"Type-094 submarine\"))\n\n# A tibble: 2 × 6\n  ns    title    pageid  wordcount snippet                               times…¹\n  &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;                                 &lt;chr&gt;  \n1 0     Q1203377 1146175 0         nuclear-powered ballistic missile su… 2023-0…\n2 0     Q7008427 6886594 0         Wikimedia category                    2022-1…\n# … with abbreviated variable name ¹​timestamp\n\n# Extract the item title for the item of interest\nroot_item_title &lt;- search_results$title[1]\n\nWe then extract wikidata associated with the item.\n\n# extract the entity data for a chosen item.\nget_entity_data &lt;- function(item = \"Q1203377\"){\n  base &lt;- \"https://www.wikidata.org/\"\n  path &lt;- glue::glue(\"wiki/Special:EntityData/{item}.json\")\n  query &lt;- list(flavor = \"simple\")  \n  req &lt;- httr::GET(base, path = path, query = query)\n  \n  httr::content(req) |&gt;\n    purrr::pluck(\"entities\", item, \"claims\") |&gt;\n    purrr::map_df(~{\n      value &lt;- unlist(.x)\n      name &lt;- names(value)\n      dplyr::tibble(name, value) |&gt;\n        tidyr::pivot_wider() |&gt;\n        tidyr::unnest()\n      })\n}\n\nentity_data &lt;- get_entity_data(root_item_title)\n\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n\n\nWarning: Values from `value` are not uniquely identified; output will contain list-cols.\n* Use `values_fn = list` to suppress this warning.\n* Use `values_fn = {summary_fun}` to summarise duplicates.\n* Use the following dplyr code to identify duplicates.\n  {data} %&gt;%\n    dplyr::group_by(name) %&gt;%\n    dplyr::summarise(n = dplyr::n(), .groups = \"drop\") %&gt;%\n    dplyr::filter(n &gt; 1L)\n\n\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c(mainsnak.snaktype, mainsnak.property, mainsnak.hash, `mainsnak.datavalue.value.entity-type`, \n    `mainsnak.datavalue.value.numeric-id`, mainsnak.datavalue.value.id, \n    mainsnak.datavalue.type, mainsnak.datatype, type, id, rank)`\n\n\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n\n\nWarning: Values from `value` are not uniquely identified; output will contain list-cols.\n* Use `values_fn = list` to suppress this warning.\n* Use `values_fn = {summary_fun}` to summarise duplicates.\n* Use the following dplyr code to identify duplicates.\n  {data} %&gt;%\n    dplyr::group_by(name) %&gt;%\n    dplyr::summarise(n = dplyr::n(), .groups = \"drop\") %&gt;%\n    dplyr::filter(n &gt; 1L)\n\n\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c(mainsnak.snaktype, mainsnak.property, mainsnak.hash, `mainsnak.datavalue.value.entity-type`, \n    `mainsnak.datavalue.value.numeric-id`, mainsnak.datavalue.value.id, \n    mainsnak.datavalue.type, mainsnak.datatype, type, id, rank, \n    references.hash, references.snaks.P143.snaktype, references.snaks.P143.property, \n    references.snaks.P143.hash, `references.snaks.P143.datavalue.value.entity-type`, \n    `references.snaks.P143.datavalue.value.numeric-id`, references.snaks.P143.datavalue.value.id, \n    references.snaks.P143.datavalue.type, references.snaks.P143.datatype, \n    `references.snaks-order`)`\n\n\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n`cols` is now required when using unnest().\nPlease use `cols = c()`\n\n\nAnd the associated properties\n\nproperties &lt;- entity_data |&gt; \n  dplyr::pull(\"mainsnak.property\") |&gt;\n  unique()\n\nget_entity_id &lt;- function(id = \"P373\"){\n  if(length(id)&gt;1) id &lt;- paste(id, collapse = \"|\")\n  base &lt;- \"https://www.wikidata.org/\"\n  path &lt;- \"w/api.php\"\n  query &lt;- list(\n    action=\"wbgetentities\",\n    ids=id,\n    languages=\"en\",\n    props=\"labels\",\n    format=\"json\"\n    )\n  \n  req &lt;- httr::GET(base, path = path, query = query) \n  \n  if(req$status != 200) \n    return(stop(glue::glue(\"Error returned status: {req$status}\")))\n  \n  httr::content(req) |&gt;\n    purrr::pluck(\"entities\") |&gt;\n    purrr::map_df(~{\n      value &lt;- unlist(.x)\n      name &lt;- names(value)\n      dplyr::tibble(name, value) |&gt; tidyr::pivot_wider()\n    })\n}\n\n(prop_label &lt;- get_entity_id(properties))\n\n# A tibble: 16 × 5\n   type     datatype        id    labels.en.language labels.en.value      \n   &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;                \n 1 property string          P373  en                 Commons category     \n 2 property wikibase-item   P516  en                 powered by           \n 3 property string          P561  en                 NATO reporting name  \n 4 property wikibase-item   P31   en                 instance of          \n 5 property wikibase-item   P279  en                 subclass of          \n 6 property wikibase-item   P910  en                 topic's main category\n 7 property external-id     P646  en                 Freebase ID          \n 8 property time            P729  en                 service entry        \n 9 property wikibase-item   P156  en                 followed by          \n10 property wikibase-item   P155  en                 follows              \n11 property commonsMedia    P18   en                 image                \n12 property wikibase-item   P176  en                 manufacturer         \n13 property wikibase-item   P137  en                 operator             \n14 property monolingualtext P1813 en                 short name           \n15 property wikibase-item   P520  en                 armament             \n16 property wikibase-item   P495  en                 country of origin    \n\n\nGet the item data\n\nentity_data2 &lt;- entity_data |&gt;\n  dplyr::select(\n    mainsnak.property,\n    mainsnak.datavalue.type,\n    mainsnak.datavalue.value.id,\n    mainsnak.datavalue.value,\n    mainsnak.datavalue.value.text,\n    mainsnak.datavalue.value.time\n  ) |&gt;\n  dplyr::mutate(\n    value = dplyr::case_when(\n      !is.na(mainsnak.datavalue.value.id) ~ mainsnak.datavalue.value.id,\n      !is.na(mainsnak.datavalue.value) ~ mainsnak.datavalue.value,\n      !is.na(mainsnak.datavalue.value.time) ~ mainsnak.datavalue.value.time,\n      !is.na(mainsnak.datavalue.value.text) ~ mainsnak.datavalue.value.text\n    )\n  ) |&gt;\n  dplyr::select(property = 1, type = 2, value) |&gt;\n  dplyr::distinct()\n\nentity_data3 &lt;- entity_data2 |&gt;\n  dplyr::left_join(prop_label |&gt;\n  dplyr::select(\n    property = id, \n    property_label = labels.en.value\n  ))\n\nJoining, by = \"property\"\n\nitems &lt;- entity_data3 |&gt;\n  dplyr::filter(type == \"wikibase-entityid\") |&gt;\n  dplyr::pull(value) |&gt; \n  unique()\n\nitem_labels &lt;- get_entity_id(items)\n\n(item_property &lt;- entity_data3 |&gt;\n  dplyr::left_join(\n    item_labels |&gt;\n      dplyr::select(value = id, item_label = labels.en.value)\n  ) |&gt;\n  dplyr::mutate(item_label = dplyr::case_when(is.na(item_label)~value, \n                                              TRUE ~ item_label)) |&gt;\n  dplyr::select(property_label, item_label))\n\nJoining, by = \"value\"\n\n\n# A tibble: 17 × 2\n   property_label        item_label                                          \n   &lt;chr&gt;                 &lt;chr&gt;                                               \n 1 Commons category      Type 09IV submarines                                \n 2 powered by            nuclear marine propulsion                           \n 3 NATO reporting name   Jin                                                 \n 4 instance of           submarine class                                     \n 5 subclass of           ballistic missile submarine                         \n 6 subclass of           nuclear submarine                                   \n 7 topic's main category Category:Type 094 submarines                        \n 8 Freebase ID           /m/09wz47                                           \n 9 service entry         +2010-01-01T00:00:00Z                               \n10 followed by           Type 096 submarine                                  \n11 follows               Type 092 Daqingyu                                   \n12 image                 Jin (Type 094) Class Ballistic Missile Submarine.JPG\n13 manufacturer          Bohai Shipyard                                      \n14 operator              People's Liberation Army Navy                       \n15 short name            Type 094                                            \n16 armament              JL-2                                                \n17 country of origin     People's Republic of China                          \n\n\nGet wiki urls\n\nget_wikisites &lt;- function(item = \"Q1203377\"){\n  base &lt;- \"https://www.wikidata.org/\"\n  path &lt;- glue::glue(\"wiki/Special:EntityData/{item}.json\")\n  query &lt;- list(flavor = \"simple\")  \n  req &lt;- httr::GET(base, path = path, query = query)\n  \n  cont &lt;- httr::content(req) \n  cont |&gt;\n    purrr::pluck(\"entities\", item, \"sitelinks\") |&gt;\n    purrr::map_df(~{\n      value &lt;- unlist(.x)\n      name &lt;- names(value)\n      dplyr::tibble(name, value) |&gt;\n        tidyr::pivot_wider()\n      })\n}\n\n(wikiurl &lt;- get_wikisites(root_item_title) |&gt;\n  dplyr::filter(site == \"enwiki\") |&gt;\n  dplyr::pull(url))\n\n                                                   \n\"https://en.wikipedia.org/wiki/Type_094_submarine\" \n\n\nScrape the infobox from the wiki url\n\nscrape_infobox &lt;- function(\n    url =\"https://en.wikipedia.org/wiki/Type_094_submarine\"\n){\n  req &lt;- httr::GET(url)\n  req |&gt; \n    httr::content() |&gt; \n    xml2::xml_find_all(\"//table[@class='infobox']\") |&gt;\n    rvest::html_table() \n}\n\nscrape_infobox(\"https://en.wikipedia.org/wiki/Type_094_submarine\")\n\n[[1]]\n# A tibble: 22 × 2\n   X1                      X2                               \n   &lt;chr&gt;                   &lt;chr&gt;                            \n 1 Profile of the Type 094 Profile of the Type 094          \n 2 Type 094 submarine      Type 094 submarine               \n 3 Class overview          Class overview                   \n 4 Name                    Type 094 (Jin class)             \n 5 Builders                Bohai Shipyard, Huludao, China[2]\n 6 Operators               People's Liberation Army Navy    \n 7 Preceded by             Type 092 (Xia class)             \n 8 Succeeded by            Type 096                         \n 9 Cost                    $750 million per unit[1]         \n10 In commission           2007–present[2]                  \n# … with 12 more rows\n\n\nScrape wikitables\n\nscrape_wikitables &lt;- function(\n    url =\"https://en.wikipedia.org/wiki/Type_094_submarine\"\n){\n  req &lt;- httr::GET(url)\n  req |&gt; \n    httr::content() |&gt; \n    xml2::xml_find_all(\"//table[@class='wikitable']\") |&gt;\n    rvest::html_table()\n}\n\nscrape_wikitables(\"https://en.wikipedia.org/wiki/Type_094_submarine\")\n\n[[1]]\n# A tibble: 8 × 7\n  Name                `Hull no.`  Builder         Laid …¹ Launc…² Commi…³ Status\n  &lt;chr&gt;               &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; \n1 \"Type 094\"          \"Type 094\"  \"Type 094\"      \"Type … \"Type … Type 0… Type …\n2 \"\"                  \"411[2]\"    \"Bohai Shipyar… \"2001[… \"28 Ju… March … Active\n3 \"Changzheng 10[20]\" \"412[2]\"    \"Bohai Shipyar… \"2003[… \"2006[… 2010[2] Active\n4 \"Changzheng 11[20]\" \"413[2]\"    \"Bohai Shipyar… \"2004[… \"Decem… 2012[2] Active\n5 \"Changzheng 18[21]\" \"421[22]\"   \"\"              \"\"      \"\"      23 Apr… Active\n6 \"Type 094A\"         \"Type 094A\" \"Type 094A\"     \"Type … \"Type … Type 0… Type …\n7 \"\"                  \"\"          \"\"              \"\"      \"\"      2020[5] Active\n8 \"\"                  \"\"          \"\"              \"\"      \"\"      2020[5] Active\n# … with abbreviated variable names ¹​`Laid down`, ²​Launched, ³​Commissioned"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Blog",
    "section": "",
    "text": "Calculate Voluntary Job Separation Rates\n\n\n\n\n\n\n\nLabour Markets\n\n\nLabour Force Survey\n\n\n\n\nCalculate voluntary job separation rates from the two quarter labour force survey\n\n\n\n\n\n\nJan 29, 2024\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nNotes on Economics of Defence - Chapter 7 (Procurement)\n\n\n\n\n\n\n\nknowledge of economics\n\n\ndefence economics\n\n\nnotes\n\n\n\n\nNotes on Chapter 7 Procurement, Theories and Evidence from Sandler and Hartley’s economics of defence\n\n\n\n\n\n\nJan 28, 2024\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nNLP with Chat GPT\n\n\n\n\n\n\n\nlarge language models (LLM)\n\n\nevidence synthesis\n\n\nmethods\n\n\nnotes\n\n\n\n\nDemonstration using PAC data\n\n\n\n\n\n\nJan 27, 2024\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nOral evidence Defence equipment plan 2023-33, HC 451\n\n\n\n\n\n\n\n\n\n\n\n\nJan 22, 2024\n\n\n\n\n\n\n  \n\n\n\n\nRetrieval Augmented Generation\n\n\n\n\n\n\n\nlarge language models (LLM)\n\n\nevidence synthesis\n\n\nmethods\n\n\nnotes\n\n\n\n\nAn applied example using llama index\n\n\n\n\n\n\nNov 19, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nIran Sanctions - Sythetic Control\n\n\n\n\n\n\n\nevaluation\n\n\nsynthetic-control\n\n\nmethods\n\n\nnotes\n\n\n\n\nAn applied example of synthetic control\n\n\n\n\n\n\nAug 29, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nSynthetic Control Methods\n\n\n\n\n\n\n\nevaluation\n\n\nsynthetic-control\n\n\nmethods\n\n\nnotes\n\n\n\n\nNotes on Synthetic Control\n\n\n\n\n\n\nAug 29, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nRegression Discontinuity Design\n\n\n\n\n\n\n\nevaluation\n\n\nquasi-experimental\n\n\nmethods\n\n\nnotes\n\n\n\n\nNotes on Regression Discontinuity Design\n\n\n\n\n\n\nJun 18, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nSummarise Information in a Book\n\n\n\n\n\n\n\nNLP\n\n\n\n\nSummarise the Top 5 Setences by Section in Homo Deus\n\n\n\n\n\n\nMay 30, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nNatural Language Processing\n\n\n\n\n\n\n\nNLP\n\n\n\n\nExtract people from Guardian reporting on what we know on Ukraine.\n\n\n\n\n\n\nMay 18, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nProcess Guardian - What we know on Ukraine\n\n\n\n\n\n\n\napi\n\n\nNLP\n\n\n\n\nThis post uses API to extract Guardian What we Know data and LexR to extract top 3 points.\n\n\n\n\n\n\nMay 18, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nExtract UK Frigate Data\n\n\n\n\n\n\n\nwikipedia\n\n\n\n\nSearch and extract UK Frigate Data\n\n\n\n\n\n\nApr 1, 2023\n\n\nDefence Economist\n\n\n\n\n\n\n  \n\n\n\n\nExtract Type 23 Data\n\n\n\n\n\n\n\nwikipedia\n\n\nscrape\n\n\n\n\nExtract Type 23 Performance Data\n\n\n\n\n\n\nApr 1, 2023\n\n\nDefence Economist\n\n\n\n\n\n\n  \n\n\n\n\nUsing Wiki Data to Extract Data\n\n\n\n\n\n\n\nwikipedia\n\n\nscrape\n\n\n\n\nThis post shows how to access the wikipedia knowledge graph\n\n\n\n\n\n\nMar 26, 2023\n\n\nLuke Heley\n\n\n\n\n\n\n  \n\n\n\n\nExtract of UK Frigates and Their Precendents\n\n\n\n\n\n\n\nwikipedia\n\n\nscrape\n\n\n\n\nThis post shows how to access the wikipedia knowledge graph\n\n\n\n\n\n\nMar 26, 2023\n\n\nLuke Heley\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/20230401-extract-uk-frigate-data/20230401-extract-uk-frigate-data.html",
    "href": "posts/20230401-extract-uk-frigate-data/20230401-extract-uk-frigate-data.html",
    "title": "Extract UK Frigate Data",
    "section": "",
    "text": "Objective\nSearch for wikidata for different UK Frigates\n\n\nData\ntype 26, type 23, type 22, type 21, leander class, rothesay-class, valour-class, Whitby class and Sailsbury class\n\nfrigates &lt;- c(\n  \"Type 26\", \"Type 23\", \"Type 22\", \n  \"Type 21\", \"Leander Class\", \"Rothesay Class\", \n   \"Whitby Class\", \"Salisbury Class\"\n  ) |&gt;\n  paste(\"Frigate\")\n\nbase &lt;- \"https://www.wikidata.org\" \npath &lt;- \"/w/api.php\"\nquery &lt;- list(\n  action=\"query\",\n  list=\"search\",\n  format = \"json\"\n)\n\nsearch_results &lt;- frigates |&gt;\n  purrr::map(~{\n    query$srsearch = .x\n    httr::GET(base, path = path, query = query) |&gt;\n      httr::content()\n  })\n\n\nsearch_results_tidy &lt;- search_results |&gt;\n  purrr::map_df(~{\n     .x$query$search[1]; # extract first response\n    } ) |&gt;\n  dplyr::select(title, snippet) |&gt;\n  dplyr::mutate(search = frigates) |&gt;\n  dplyr::relocate(search)\n\nget wiki url\n\nbase &lt;- \"https://www.wikidata.org/\"\nreq &lt;- search_results_tidy$title |&gt;\n  purrr::map(~{\n    path &lt;- glue::glue(\"wiki/Special:EntityData/{.x}.json\")\n    httr::GET(url = base, path = path, query = list(flavor = \"simple\"))\n  })\n\n(wiki_url &lt;- req |&gt;\n  purrr::map_chr(~{\n    cnt &lt;- httr::content(.x)\n    cnt$entities[[1]]$sitelinks$enwiki$url\n  }))\n\n[1] \"https://en.wikipedia.org/wiki/Type_26_frigate\"        \n[2] \"https://en.wikipedia.org/wiki/Type_23_frigate\"        \n[3] \"https://en.wikipedia.org/wiki/Type_22_frigate\"        \n[4] \"https://en.wikipedia.org/wiki/Type_21_frigate\"        \n[5] \"https://en.wikipedia.org/wiki/Leander-class_frigate\"  \n[6] \"https://en.wikipedia.org/wiki/Rothesay-class_frigate\" \n[7] \"https://en.wikipedia.org/wiki/Whitby-class_frigate\"   \n[8] \"https://en.wikipedia.org/wiki/Salisbury-class_frigate\"\n\n\n\ninfobox &lt;- wiki_url |&gt;\n  purrr::map_df(~{\n    httr::GET(.x) |&gt;\n      httr::content() |&gt;\n      xml2::xml_find_all(\"//table[@class='infobox']\") |&gt;\n      rvest::html_table() |&gt;\n      purrr::pluck(1) |&gt;\n      dplyr::mutate(source = .x)\n  })\n\nvars &lt;- c(\"Displacement\", \"Length\", \"Beam\", \"Draught\")\n\nperformance &lt;- infobox |&gt;\n  dplyr::group_by(source) |&gt;\n  dplyr::mutate(X0 = ifelse(X1 == X2, X1, NA)) |&gt;\n  tidyr::fill(X0) |&gt;\n  dplyr::filter(X1 != X2) |&gt;\n  dplyr::filter(X1 %in% vars) |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::mutate(key = 1L:dplyr::n()) |&gt;\n  dplyr::group_by(source) |&gt;\n  dplyr::mutate(X2 = stringr::str_split(X2, \"\\n\")) |&gt;\n  tidyr::unnest(cols = \"X2\") |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::mutate(\n    X3 = ifelse(\n      test = stringr::str_detect(X2, \"^[0-9]\", negate = TRUE), \n      yes = substr(X2, 1, stringr::str_locate(X2, \":\")[,1]-1),\n      no = NA)\n  ) |&gt;\n   dplyr::mutate(\n    X2 = ifelse(\n      test = stringr::str_detect(X2, \"^[0-9]\", negate = TRUE), \n      yes = substr(X2, stringr::str_locate(X2, \":\")[,1]+2, nchar(X2)),\n      no = X2)\n  )  |&gt;\n  dplyr::mutate(\n    value = as.numeric(stringr::str_remove_all(substr(X2, 1, stringr::str_locate(X2, \"\\\\s\")[,1]-1), \",\"))\n  ) |&gt;\n  dplyr::mutate(\n    units = substr(X2, stringr::str_locate(X2, \"\\\\s\")[,1]+1, nchar(X2))\n  ) |&gt;\n  dplyr::mutate(\n    units = substr(units, 1, stringr::str_locate(units, \"\\\\s\")[,1]-1)\n  ) |&gt; \n  dplyr::mutate(\n    label = stringr::str_remove_all(source, \"https://en.wikipedia.org/wiki/\") |&gt;\n      stringr::str_replace_all(\"_\", \" \")\n    ) |&gt;\n  dplyr::filter(!is.na(value)) |&gt;\n  dplyr::group_by(key) |&gt;\n  dplyr::mutate(increment = 1:dplyr::n()) |&gt;\n  dplyr::select(key, increment, label, name = X1, value, units) |&gt;\n  dplyr::mutate(units = dplyr::case_when(\n    units %in% c(\"tonnes\", \"ton\", \"tonnes,\", \"tons\") ~ \"t\",\n    units %in% c(\"long\") ~ \"lt\",\n    units %in% c(\"metres\") ~ \"m\",\n    TRUE ~ units\n  )) |&gt;\n  dplyr::mutate(\n    value = dplyr::case_when(\n      units %in% \"lt\" ~ (value * 1.016047), \n      units %in% \"ft\" ~ (value * 0.3048),\n      TRUE ~ value\n    )\n  ) |&gt;\n  dplyr::mutate(\n    units = dplyr::case_when(\n       units %in% \"lt\" ~ \"t\",\n       units %in% \"ft\" ~ \"m\",\n       TRUE ~ units\n    )\n  ) |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::select(-units, -key, -increment) |&gt; \n  dplyr::group_by(label, name) |&gt;\n  dplyr::mutate(increment = 1:dplyr::n()) |&gt;\n  tidyr::pivot_wider(names_from = name, values_from = value) |&gt;\n  tidyr::fill(c(Length, Beam, Draught)) \n\nx &lt;- GGally::ggpairs(performance, lower= list(mapping = ggplot2::aes(colour = label)), columns = 3:6) \n\nRegistered S3 method overwritten by 'GGally':\n  method from   \n  +.gg   ggplot2\n\nplotly::ggplotly(x)\n\nWarning: Can only have one: highlight\n\nWarning: Can only have one: highlight\n\n\nWarning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :\nRemoved 3 rows containing missing values\n\nWarning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :\nRemoved 3 rows containing missing values\n\nWarning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :\nRemoved 3 rows containing missing values\n\n\nWarning: Removed 3 rows containing non-finite values (stat_density).\n\n\nWarning: Can only have one: highlight"
  },
  {
    "objectID": "posts/20230401-wikidata-type23/20230401-wikidata-type23.html",
    "href": "posts/20230401-wikidata-type23/20230401-wikidata-type23.html",
    "title": "Extract Type 23 Data",
    "section": "",
    "text": "Objective\nExtract Type 23 performance data from wikipedia\n\n\nData\n\nurl &lt;- \"https://en.wikipedia.org/wiki/Type_23_frigate\"\nreq &lt;- httr::GET(url) |&gt;\n  httr::content()\n\nvars &lt;- c(\"Name\", \"Displacement\", \"Length\", \"Beam\", \"Draught\")\n(df &lt;- req |&gt;\n  xml2::xml_find_all(\"//table[@class = 'infobox']\") |&gt;\n  rvest::html_table() |&gt;\n  purrr::pluck(1) |&gt;\n  dplyr::filter(X1 %in% c(vars)) |&gt;\n  t() |&gt; dplyr::as_tibble(.name_repair = \"minimal\") |&gt;\n  janitor::row_to_names(1) |&gt;\n  dplyr::mutate(dplyr::across(-1, ~stringr::str_sub(.x, 1, stringr::str_locate(.x, \"\\\\(\")[,1]-2))) |&gt;\n  tidyr::pivot_longer(-1) |&gt;\n  dplyr::rename(id = Name) |&gt;\n  dplyr::mutate(unit = substr(value, stringr::str_locate(value, \"\\\\s\")[,1]+1, nchar(value))) |&gt;\n  dplyr::mutate(value = stringr::str_remove_all(value, \"[a-z]|,\")) |&gt;\n  dplyr::mutate(value = stringr::str_trim(value)) |&gt;\n  dplyr::mutate(value = as.numeric(value))\n)\n\n# A tibble: 4 × 4\n  id              name          value unit \n  &lt;chr&gt;           &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;\n1 Type 23 frigate Displacement 4900   t    \n2 Type 23 frigate Length        133   m    \n3 Type 23 frigate Beam           16.1 m    \n4 Type 23 frigate Draught         7.3 m    \n\ndf |&gt; dplyr::select(-unit) |&gt; tidyr::pivot_wider()\n\n# A tibble: 1 × 5\n  id              Displacement Length  Beam Draught\n  &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;\n1 Type 23 frigate         4900    133  16.1     7.3\n\n\n\nlibrary(GGally)\n\nWarning: package 'GGally' was built under R version 4.2.3\n\n\nLoading required package: ggplot2\n\n\nRegistered S3 method overwritten by 'GGally':\n  method from   \n  +.gg   ggplot2\n\n# From the help page:\ndata(flea)\nggpairs(flea, columns = 2:4, ggplot2::aes(colour=species))"
  },
  {
    "objectID": "posts/20230518-Guardian-What-We-Know-Ukraine/20230518-Ukraine-What-We-Know-Guardian-NLP.html",
    "href": "posts/20230518-Guardian-What-We-Know-Ukraine/20230518-Ukraine-What-We-Know-Guardian-NLP.html",
    "title": "Process Guardian - What we know on Ukraine",
    "section": "",
    "text": "Code\napi_key &lt;- Sys.getenv(\"GUARDIAN_API\")\n\nbase &lt;- \"https://content.guardianapis.com/\"\npath &lt;- \"search\"\nquery = list(\n  tag = \"world/series/russia-ukraine-war-at-a-glance\",\n  `api-key` = api_key,\n  `page-size` = 50,\n  `show-fields` = \"trailText,headline,body\"\n)\n\nreq &lt;- httr::GET(base, path = path, query = query)\nback &lt;- httr::content(req)\n\npage1 &lt;- back$response$results |&gt;\n  purrr::map_df(~t(unlist(.x)) |&gt; dplyr::as_tibble())\n\npages &lt;- back$response$pages\nother_pages &lt;- purrr::map(2:pages, ~{\n  query$page = .x\n  req &lt;- httr::GET(base, path = path, query = query)\n  back &lt;- httr::content(req)\n   back$response$results |&gt;\n    purrr::map_df(~t(unlist(.x)) |&gt; dplyr::as_tibble())\n})\n\npages &lt;- page1 |&gt; dplyr::bind_rows(other_pages |&gt;\n  dplyr::bind_rows())\n#write.csv()\n\n\n\n\nCode\npages &lt;- readr::read_csv(\"2023-05-18-guardian-ukraine-what-we-know.csv\")\n\n\nRows: 440 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (12): id, type, sectionId, sectionName, webTitle, webUrl, apiUrl, field...\nlgl   (1): isHosted\ndttm  (1): webPublicationDate\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\nprocess_text &lt;- function(x){\n  xml2:::read_html(x) |&gt;\n    xml2::xml_find_all(\"//p\") |&gt;\n    xml2::xml_text() |&gt;\n    stringr::str_split(\"\\n\") |&gt;\n    unlist() |&gt;\n    stringr::str_trim() |&gt;\n    stringi::stri_remove_empty()\n}\n\nbody &lt;- purrr::map(pages$fields.body, ~process_text(.x)) \n\n\n\n\nCode\ntop3 &lt;- purrr::map(body, ~{\n  lexRankr::lexRank(.x,\n                    # only 1 article; repeat same docid for all of input vector\n                    docId = rep(1, length(.x)),\n                    # return 3 sentences\n                    n = 3,\n                    continuous = TRUE, \n                    Verbose = FALSE)\n})\n\ntop3_sent &lt;- purrr::map(top3, ~.x$sentence)\n\n\n\n\nCode\n# Summarise\npages |&gt;\n  dplyr::mutate(fields.headline = stringr::str_trim(fields.headline)) |&gt;\n  dplyr::mutate(day = stringr::str_extract(fields.headline, \"day [0-9]{1,3}\")) |&gt; \n  dplyr::mutate(day = stringr::str_remove_all(day, \"day \") |&gt; as.numeric()) |&gt;\n  dplyr::select(webPublicationDate, day,fields.trailText) |&gt;\n  reactable::reactable(\n    details = function(index){\n      top3_i &lt;- data.frame(top3_sent[[index]], stringsAsFactors = FALSE)\n      tbl &lt;- reactable::reactable(top3_i, outlined = TRUE, highlight = TRUE, fullWidth = TRUE)\n      htmltools::div(style = list(margin = \"12px 45px\"), tbl)\n    },\n    onClick = \"expand\",\n    rowStyle = list(cursor = \"pointer\")\n  )\n\n\n\n\n\n\n\nCode\n#write.csv(pages, paste0(Sys.Date(), \"-guardian-ukraine-what-we-know.csv\"), row.names = FALSE)"
  },
  {
    "objectID": "posts/20230530-Homo Deus NLP/homo_deus_nlp.html",
    "href": "posts/20230530-Homo Deus NLP/homo_deus_nlp.html",
    "title": "Summarise Information in a Book",
    "section": "",
    "text": "Load the Raw Data using PDFTOOLS\n\n\nCode\nraw &lt;- pdftools::pdf_text(\"homo_deus_chapter_1.pdf\")\n\n\n\n\nExtract the Manuscript\n\n\nCode\nmanuscript &lt;- paste(raw, collapse = \"\")\n\n\n\n\nSplit the manuscript into section heading and text.\n\n\nCode\nsection_text &lt;- dplyr::tibble(manuscript) |&gt; \n  dplyr::mutate(section = stringr::str_split(manuscript, \"\\n\\n\\n\")) |&gt; \n  tidyr::unnest(cols = \"section\") |&gt; \n  dplyr::select(-manuscript) |&gt; \n  dplyr::filter(!stringr::str_detect(section, \"\\n\\n\")) |&gt; \n  dplyr::slice(3:dplyr::n()) |&gt; \n  dplyr::mutate(section = stringr::str_trim(section)) |&gt; \n  tidyr::separate(section, c(\"section\", \"text\"), \"\\n\", extra = \"merge\") |&gt; \n  dplyr::mutate(section_id = 1:dplyr::n())\n\n\n\n\nLexrankr\n\n\nCode\nlex_top_3 &lt;- seq_along(section_text$text) |&gt; \n  purrr::map_df(~{\n    lexRankr::lexRank(\n      section_text$text[[.x]],\n      docId = .x, \n      n = 5, \n      continuous = TRUE, \n      Verbose = FALSE\n    ) }) |&gt; \n  tibble::as_tibble() |&gt; \n  dplyr::mutate(docId = as.numeric(docId))\n\n\n\n\nResults\n\n\nCode\ndplyr::left_join(section_text, lex_top_3, by = c(\"section_id\" = \"docId\")) |&gt; \n  dplyr::select(section_id, section, sentenceId, sentence, value) |&gt; \n  DT::datatable(options = list(pageLength = 5))"
  },
  {
    "objectID": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html",
    "href": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html",
    "title": "Iran Sanctions - Sythetic Control",
    "section": "",
    "text": "Code\nlibrary(tidysynth)\nlibrary(wbstats)"
  },
  {
    "objectID": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html#data-and-method",
    "href": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html#data-and-method",
    "title": "Iran Sanctions - Sythetic Control",
    "section": "Data and Method",
    "text": "Data and Method\nData Source: World Bank Development Indicators\nTime Period: 2003 - 2015\nCountries: Algeria, Angola, Bahrain, Ecuador, Egypt, Iran, Israel, Jordan, Lebanon, Morocco, Nigeria, Oman, and Saudi Arabia.\nOutcome Variable: military expenditure (current US$) per capita.\nControl Variables: total population, imports of goods and services (constant US$), GDP per capita (constant US$) and real GDP per capita growth rate.\nSpecial Variables: military spending per capita in years 2010, 2008, 2006 and 2004\n\nData\n\n\nCode\n# Load Data from World Bank\nwb_countries &lt;- wb_countries(\"en\")\ncountries &lt;- c(\n  \"Bahrain\", \"Ecuador\", \"Egypt, Arab Rep.\", \n  \"Iran, Islamic Rep.\", \"Israel\", \"Jordan\", \n  \"Lebanon\", \"Morocco\", \"Nigeria\", \n  \"Oman\",  \"Saudi Arabia\"\n  )\n\ncountry_iso2c &lt;- wb_countries |&gt;\n  dplyr::filter(country %in% countries) |&gt;\n  dplyr::pull(iso2c)\n\nind &lt;- wb_indicators(\"en\", include_archive = FALSE)\nvars &lt;- c(\n  \"MS.MIL.XPND.CD\",\"SP.POP.TOTL\", \n  \"NE.IMP.GNFS.KD\", \"NY.GDP.PCAP.KD\", \n  \"NY.GDP.PCAP.KD.ZG\", \"BM.GSR.GNFS.CD\"\n  )\n\nind |&gt;\n  dplyr::filter(indicator_id %in% vars)\n\n\n# A tibble: 6 × 8\n  indicator_id indicator unit  indicator_desc source_org topics source_id source\n  &lt;chr&gt;        &lt;chr&gt;     &lt;lgl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;list&gt;     &lt;dbl&gt; &lt;chr&gt; \n1 BM.GSR.GNFS… Imports … NA    Imports of go… Internati… &lt;df&gt;           2 World…\n2 MS.MIL.XPND… Military… NA    Military expe… Stockholm… &lt;df&gt;           2 World…\n3 NE.IMP.GNFS… Imports … NA    Imports of go… World Ban… &lt;df&gt;           2 World…\n4 NY.GDP.PCAP… GDP per … NA    GDP per capit… World Ban… &lt;df&gt;           2 World…\n5 NY.GDP.PCAP… GDP per … NA    Annual percen… World Ban… &lt;df&gt;           2 World…\n6 SP.POP.TOTL  Populati… NA    Total populat… (1) Unite… &lt;df&gt;           2 World…\n\n\nCode\ndf &lt;- wb_data(indicator = vars, country = country_iso2c, start_date = 2002, end_date = 2015)\n\n# Check all variables and countries are in the data frame.\nall(vars %in% names(df)) & all(country_iso2c %in% unique(df$iso2c))\n\n\n[1] TRUE\n\n\nCode\n# Process Data\nsanctions &lt;- df |&gt;\n  dplyr::mutate(\n    milspend_pc =MS.MIL.XPND.CD/SP.POP.TOTL,\n    realgdpgrowth_pc = NY.GDP.PCAP.KD/dplyr::lag(NY.GDP.PCAP.KD,1)-1,\n    country_id = match(iso2c, country_iso2c),\n    imports = ifelse(is.na(NE.IMP.GNFS.KD), BM.GSR.GNFS.CD,NE.IMP.GNFS.KD), ## TODO convert to constant prices.\n    ) |&gt;\n  dplyr::select(\n    country_id, \n    country, \n    year = date, \n    milspend_pc, \n    pop = SP.POP.TOTL, \n    imports,\n    realgdp_pc = NY.GDP.PCAP.KD,\n    realgdpgrowth_pc\n    ) |&gt;\n  dplyr::filter(year&gt;=2003) \n\n\nsanctions.csv\n\n\nMethod\n\n\nCode\nsanctions_out &lt;- sanctions %&gt;%\n  synthetic_control(outcome = milspend_pc, \n                    unit = country, \n                    time = year, \n                    i_unit = \"Iran, Islamic Rep.\", \n                    i_time = 2011, \n                    generate_placebos=T \n                    ) %&gt;%\n  generate_predictor(time_window = 2003:2011,\n                     pop = mean(pop),\n                     imports = mean(imports),\n                     realgdp_pc = mean(realgdp_pc),\n                     realgdpgrowth_pc = mean(realgdpgrowth_pc)) %&gt;%\n  generate_predictor(time_window = 2010,\n                     milspend_2010 = milspend_pc) %&gt;%\n  generate_predictor(time_window = 2008,\n                     milspend_2008 = milspend_pc) %&gt;%\n  generate_predictor(time_window = 2006,\n                     milspend_2006 = milspend_pc) %&gt;%\n  generate_predictor(time_window = 2004,\n                     milspend_2004 = milspend_pc) %&gt;%\n  generate_weights(optimization_window = 2003:2011, \n                   margin_ipop = .02,sigf_ipop = 7,bound_ipop = 6 \n  ) %&gt;%\n  generate_control()\n\n\nOnce the synthetic control is generated, one can easily assess the fit by comparing the trends of the synthetic and observed time series. The idea is that the trends in the pre-intervention period should map closely onto one another.\n\n\nCode\nsanctions_out %&gt;% plot_trends()\n\n\n\n\n\nTo capture the causal quantity (i.e. the difference between the observed and counterfactual), one can plot the differences using plot_differences()\n\n\nCode\nsanctions_out %&gt;% plot_differences()\n\n\n\n\n\nIn addition, one can easily examine the weighting of the units and variables in the fit. This allows one to see which cases were used, in part, to generate the synthetic control.\n\n\nCode\nsanctions_out %&gt;% plot_weights()\n\n\n\n\n\nAnother useful way of evaluating the synthetic control is to look at how comparable the synthetic control is to the observed covariates of the treated unit.\n\n\nCode\nsanctions_out %&gt;% grab_balance_table()\n\n\n# A tibble: 8 × 4\n  variable         `Iran, Islamic Rep.` synthetic_Iran, Islamic R…¹ donor_sample\n  &lt;chr&gt;                           &lt;dbl&gt;                       &lt;dbl&gt;        &lt;dbl&gt;\n1 imports                      1.66e+11                    5.34e+10     4.94e+10\n2 pop                          7.22e+ 7                    5.50e+ 7     3.25e+ 7\n3 realgdp_pc                   5.03e+ 3                    4.86e+ 3     1.16e+ 4\n4 realgdpgrowth_pc             2.89e- 2                    3.20e- 2     2.48e- 2\n5 milspend_2010                1.80e+ 2                    1.74e+ 2     6.17e+ 2\n6 milspend_2008                1.51e+ 2                    1.49e+ 2     5.94e+ 2\n7 milspend_2006                1.23e+ 2                    1.06e+ 2     4.77e+ 2\n8 milspend_2004                7.59e+ 1                    8.14e+ 1     4.16e+ 2\n# ℹ abbreviated name: ¹​`synthetic_Iran, Islamic Rep.`"
  },
  {
    "objectID": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html#inference",
    "href": "posts/20230828-Iran Sanctions SCM/iran-sanctions-scm.html#inference",
    "title": "Iran Sanctions - Sythetic Control",
    "section": "Inference",
    "text": "Inference\nFor inference, the method relies on repeating the method for every donor in the donor pool exactly as was done for the treated unit — i.e. generating placebo synthetic controls). By setting generate_placebos = TRUE when initializing the synth pipeline with synthetic_control(), placebo cases are automatically generated when constructing the synthetic control of interest. This makes it easy to explore how unique difference between the observed and synthetic unit is when compared to the placebos.\n\n\nCode\nsanctions_out %&gt;% plot_placebos()\n\n\n\n\n\nNote that the plot_placebos() function automatically prunes any placebos that poorly fit the data in the pre-intervention period. The reason for doing so is purely visual: those units tend to throw off the scale when plotting the placebos. To prune, the function looks at the pre-intervention period mean squared prediction error (MSPE) (i.e. a metric that reflects how well the synthetic control maps to the observed outcome time series in pre-intervention period). If a placebo control has a MSPE that is two times beyond the target case (e.g. “California”), then it’s dropped. To turn off this behavior, set prune = FALSE.\n\n\nCode\nsanctions_out %&gt;% plot_placebos(prune = FALSE)\n\n\n\n\n\nFinally, Adabie et al. 2010 outline a way of constructing Fisher’s Exact P-values by dividing the post-intervention MSPE by the pre-intervention MSPE and then ranking all the cases by this ratio in descending order. A p-value is then constructed by taking the rank/total.1 The idea is that if the synthetic control fits the observed time series well (low MSPE in the pre-period) and diverges in the post-period (high MSPE in the post-period) then there is a meaningful effect due to the intervention. If the intervention had no effect, then the post-period and pre-period should continue to map onto one another fairly well, yielding a ratio close to 1. If the placebo units fit the data similarly, then we can’t reject the hull hypothesis that there is no effect brought about by the intervention.\nThis ratio can be easily plotted using plot_mspe_ratio(), offering insight into the rarity of the case where the intervention actually occurred.\n\n\nCode\nsanctions_out %&gt;% plot_mspe_ratio()\n\n\n\n\n\nFor more specific information, there is a significance table that can be extracted with one of the many grab_ prefix functions.\n\n\nCode\nsanctions_out %&gt;% grab_significance()\n\n\n# A tibble: 11 × 8\n   unit_name      type  pre_mspe post_mspe mspe_ratio  rank fishers_exact_pvalue\n   &lt;chr&gt;          &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;int&gt;                &lt;dbl&gt;\n 1 Iran, Islamic… Trea…    115.      8667.      75.6      1               0.0909\n 2 Jordan         Donor    284.     13107.      46.1      2               0.182 \n 3 Saudi Arabia   Donor  16332.    706684.      43.3      3               0.273 \n 4 Oman           Donor  13643.    540223.      39.6      4               0.364 \n 5 Lebanon        Donor    218.      5839.      26.8      5               0.455 \n 6 Ecuador        Donor    118.      2857.      24.3      6               0.545 \n 7 Morocco        Donor     21.7      210.       9.69     7               0.636 \n 8 Bahrain        Donor  10509.     77008.       7.33     8               0.727 \n 9 Egypt, Arab R… Donor     57.6      365.       6.34     9               0.818 \n10 Israel         Donor 107344.    156612.       1.46    10               0.909 \n11 Nigeria        Donor   1072.      1503.       1.40    11               1     \n# ℹ 1 more variable: z_score &lt;dbl&gt;"
  },
  {
    "objectID": "posts/20231119-Retrieval Augmented Generation/20231119-Retrieval Augmented Generation.html",
    "href": "posts/20231119-Retrieval Augmented Generation/20231119-Retrieval Augmented Generation.html",
    "title": "Retrieval Augmented Generation",
    "section": "",
    "text": "Introduction\nThis examples shows how to load data from a pdf, create emeddings, and then query the data.\n\n\nLoad PDF\nWe load the major projects report 2015 into python using (smart_pdf_loader)[https://llamahub.ai/l/smart_pdf_loader].\n\nSmartPDFLoader is a super fast PDF reader that understands the layout structure of PDFs such as nested sections, nested lists, paragraphs and tables. It uses layout information to smartly chunk PDFs into optimal short contexts for LLMs.\n\n\n\nCode\nfrom llama_hub.smart_pdf_loader import SmartPDFLoader\n\nllmsherpa_api_url = \"https://readers.llmsherpa.com/api/document/developer/parseDocument?renderFormat=all\"\npdf_url = \"https://www.nao.org.uk/wp-content/uploads/2015/10/Major-Projects-Report-2015-and-the-Equipment-Plan-2015-2025.pdf\" # also allowed is a file path e.g. /home/downloads/xyz.pdf\n\npdf_loader = SmartPDFLoader(llmsherpa_api_url=llmsherpa_api_url)\ndocuments = pdf_loader.load_data(pdf_url)\ndocuments[0:2] # look at first 3 chunks \n\n\n[Document(id_='7adbabd4-1df8-4ea6-a5cb-ff56f550e0c6', embedding=None, metadata={'chunk_type': 'para'}, excluded_embed_metadata_keys=[], excluded_llm_metadata_keys=[], relationships={}, hash='7b2a550370ad85d6de2541a641003a5b2971d0115121e67f6ff2a3183be0b7c8', text='Report\\nby the Comptroller and Auditor General', start_char_idx=None, end_char_idx=None, text_template='{metadata_str}\\n\\n{content}', metadata_template='{key}: {value}', metadata_seperator='\\n'),\n Document(id_='3762c995-6cbd-4f15-9e16-491bcc9f1dad', embedding=None, metadata={'chunk_type': 'list_item'}, excluded_embed_metadata_keys=[], excluded_llm_metadata_keys=[], relationships={}, hash='bb8a396323dd4d9c61c79ed4882caa34151071ed1e48e554c8da9f00a2491810', text='Major Projects Report 2015 and the Equipment Plan 2015 to 2025\\nHC 488-I', start_char_idx=None, end_char_idx=None, text_template='{metadata_str}\\n\\n{content}', metadata_template='{key}: {value}', metadata_seperator='\\n')]\n\n\n\n\nCreate a Vector Store Index\nThe documentation on VectorStoreIndex feels a little light. My understanding (not least through reference to OpenAI billing) is that this step uses OpenAI ada model for embeddings and then stores the index.\n\n\nCode\nfrom llama_index import VectorStoreIndex\nindex = VectorStoreIndex.from_documents(documents)\nindex\n\n\n&lt;llama_index.indices.vector_store.base.VectorStoreIndex at 0x233c568edc0&gt;\n\n\n\n\nQuery\nWe then use GPT 3.5 is used to query the data.\n\n\nCode\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(\"Summarise this document.\")\nprint(response)\nresponse = query_engine.query(\"what are the main causes of schedule variation?\")\nprint(response)\n\n\nThe document is titled \"Major Projects Report 2015 and the Equipment Plan 2015 to 2025.\" It contains an executive project summary and an overview of cost, time, and performance. The report discusses the Department's ability to fund the Equipment Plan and suggests that the Affordability Statement should provide clearer information about uncertainties in costs and the range of possible cost outcomes. It also mentions the need to quantify risks not included in cost forecasts. The document is printed on Evolution Digital Satin paper, which is sourced from responsibly managed and sustainable forests certified by the FSC.\nThe main causes of schedule variation are the net 52-month deferment of the final stage of the Core Production Capability project and the net variation of 8 months in the remaining projects.\n\n\n\n\nNext Steps\n\nBeing able to search over multiple documents\nBeing able to cite sources."
  },
  {
    "objectID": "posts/20240127-NLP with ChatGPT/pac.html",
    "href": "posts/20240127-NLP with ChatGPT/pac.html",
    "title": "Oral evidence Defence equipment plan 2023-33, HC 451",
    "section": "",
    "text": "Questions 1 - 138\nWitnesses\nI: David Williams CB, Permanent Secretary, MoD; Tom Wipperman, Director of Strategic Finance and Investment Approvals, MoD; Andy Start, Chief Executive, Defence Equipment and Support, MoD; Lt General Sir Robert Magowan CB CBE, Deputy Chief of the Defence Staff (Financial and Military Capability), MoD.\nReport by the Comptroller and Auditor General"
  },
  {
    "objectID": "posts/20240127-NLP with ChatGPT/pac.html#examination-of-witnesses",
    "href": "posts/20240127-NLP with ChatGPT/pac.html#examination-of-witnesses",
    "title": "Oral evidence Defence equipment plan 2023-33, HC 451",
    "section": "Examination of witnesses",
    "text": "Examination of witnesses\nWitnesses: David Williams, Tom Wipperman, Andy Start and Sir Robert Magowan.\nQ1 Chair: Welcome to the Public Accounts Committee on Monday 22 January 2024. Today, we are looking at the defence equipment plan, which is something that the Ministry of Defence publishes every year. It sets out the spending and the capability requirements of the Ministry of Defence over the next decade that our Armed Forces need to operate. This latest plan is £16.9 billion over budget over that 10-year period. That is the largest deficit since the MoD first published the plan. It is a big difference from last year’s plan, with costs having risen by nearly £66 billion.\nFor a lot of us, it feels a bit like groundhog day as we come back and look at this challenge every year. It is quite right that we look at it over a 10-year period, but it is, nevertheless, a somewhat depressing picture. Some of the reasons for that, which we will go into, are around inflation and other costs, but we need to get to the bottom of what is happening and how the Ministry of Defence will work to bridge that gap.\nI am delighted to welcome our witnesses. We have David Williams, Permanent Secretary at the Ministry of Defence; Tom Wipperman, director of strategic finance and investment approvals at the Ministry of Defence; Andy Start, chief executive of defence equipment and support, often referred to as DE&S; and Lieutenant General Robert Magowan, Deputy Chief of the Defence Staff, who is responsible for financial and military capability. A very warm welcome to you all.\nBefore we go into our main session, we have just a couple of quick questions about other matters that might affect defence.\nQ2 Sarah Owen: Good afternoon, everyone. Mr Williams, I am going to ask a question about the Port Talbot steel closures and what assessment you have made of the possible impact that this will have on defence manufacturing going forward.\nDavid Williams: I have not yet reviewed any impact from the recent announcement. We do, however, take the security and sustainability of our supply chain seriously, including access to raw materials. As the Committee knows, the Department intervened just over a year ago to support Sheffield Forgemasters, so it is an area in which we are interested. To the extent that there are wider Government conversations on a response to the announcement, I would expect the Ministry of Defence to be engaged as an interested party, but I have not been involved in that.\nQ3 Sarah Owen: Are there any projects or specific programmes that are likely to be affected? What will happen with the shortfall of materials that is going to be needed? What are the possible options available to us with the closure of Port Talbot steelworks?\nDavid Williams: Mr Start may want to come in on this. The supply of steel is, in the first instance, a matter for our prime contractors who are producing equipment for us. I have not had any specific impacts from the Tata announcement flagged to me yet, but I am happy to take that away and write to the Committee, if that would be helpful.\nQ4 Sarah Owen: That would be great. Tata Steel UK currently provides high-tech steel to UK defence for engine and gearbox components on fixed-wing and rotary aircraft, and for hatch covers on armoured personnel carriers and nuclear submarines, so it would be great if we could get the specifics on those.\nDavid Williams: I am happy to follow up on that.\nQ5 Mr Francois: Good afternoon. That is a smart tie, Mr Start. Mr Williams, on Saturday, Larisa Brown, the excellent defence editor of The Times, had a front-page splash entitled, “Army numbers to drop below 70,000 ‘in two years’”. This is germane to an examination of the equipment plan, because, as you well know, unless you have suitably qualified and experienced personnel—SQEP, as the military calls them—to maintain your kit and keep it working, you can spend all the money that you want on very expensive equipment, and some of it in this plan is incredibly expensive, but, if you cannot maintain it, it is no good to anybody. It could be a ship left on the harbour wall, a tank in the tank park, or an aircraft that is a hangar queen. What are you doing to stop the absolute haemorrhaging of people leaving the Armed Forces?\nDavid Williams: The projection in that article is one from recent trends rather than our plan. It is an issue that all three services and the Department are taking seriously. Our approach is a combination of a range of short-term measures to increase attraction and retention. Some of that involves proposals around financial incentives, for example, as well as longer-term initiatives, including recommendations from the Haythornthwaite review from last summer about how we think about patterns of service and zigzag careers, and make sure that we are accessing the skills that we need.\nQ6 Chair: When you say “zigzag careers”, do you mean people coming in and out?\nDavid Williams: People coming in and out of service, yes.\nQ7 Mr Francois: Mr Williams, I am sorry to cut across you, but, as you are well aware, there is never enough time in these sessions, so apologies for keeping this tightly focused. At the moment, across all three services, people are leaving the Armed Forces at a ratio of three people leaving for every one who joins. I deliberately use the analogy of the National Health Service, where my wife works, but that is the equivalent of the patient bleeding out on the operating table. You cannot maintain that for long. If you do, you will have operational failure, because you will not have enough skilled personnel to make it work. What you have said is all very well, but I and the Committee detect no sense of urgency. They are leaving at a rate that you cannot sustain. What are you doing to stop the bleed?\nDavid Williams: I do not immediately recognise the one-to-three ratio.\nQ8 Mr Francois: That came directly from the fifth floor, privately.\nDavid Williams: On our most recent published statistics—and I accept that those are from the—\nChair: General Magowan is busily looking through his paperwork. We will come to you in a moment.\nDavid Williams: You are right that outflow is higher than inflow. On any numbers, that is the situation. I can assure the Committee that it is being taken very seriously. There is lots of ministerial interest in how the services are addressing this issue. It is probably the number one risk that we are routinely engaging with in senior management fora in the Department. There is a set of individual initiatives that each service is taking, as well as us, in thinking through those broader pay, attraction and retention measures.\nQ9 Mr Francois: For brevity, I will have one more go and then hand back. The Army is one example, but it is not just the Army. According to policy, it is going to reduce to 72,500 within the next couple of years. According to this article, it will be at 70,000 in two years. If you extrapolate the trend at which they are leaving, David, by the end of 2026, it will be at 68,000. If you extrapolate the line forward to a decade’s time, it will be at 52,000, meaning that, as a graphic example, you could fit the entire regular British army in the Etihad stadium. Some of them are Man U supporters who will not like that. This really is a crisis. Is the Secretary of State going to make an oral statement to Parliament to flesh out what he is doing to stop the bleeding?\nDavid Williams: Just to be precise, we are aiming for 73,000. There is an additional 500 from the National Cyber Force.\nQ10 Mr Francois: At the rate at which they are leaving, that is an academic point.\nDavid Williams: I get that. The numbers that you set out for where the trained strength of the Army would be by those dates is not our plan. I acknowledge that our current plan is not working in the way that we want. I am happy to pass your request about a statement back to Ministers. All I would say is that—and I am trying to think whether I have said this to this Committee before or to your sister Defence Select Committee—if I think about the risks that keep me awake in defence, the number one risk to delivering our programme is access now and over time to the right number of people in and not in uniform, with the skills that we need.\nMr Francois: In fairness, your Secretary of State is an intelligent man. He is now well aware of the problem. The question is whether he could come to Parliament and tell us what he is going to do about it. You have the point. I will leave it there.\nQ11 Chair: General Magowan, you were looking for the figures there, and I wondered whether you had any update.\nLt General Sir Robert Magowan: Our figures are five to eight rather than one to three, but that is by the bye. We accept the problem. As the Permanent Secretary has said, probably one of the top three of those critical problems is military capability, and people are part of that. We are not being complacent at all and we have the measures in place that the Permanent Secretary has just mentioned.\nThe only thing that I would add is that trends change, and can do so quite quickly, particularly around strategic events, which can be either a positive or a negative for recruiting, so I will leave it at that. Trends change in somebody’s head tomorrow morning, so we can extrapolate, but we need to be ready for changes.\nQ12 Chair: This is something that we look at in other sessions as well, as does our sister Committee. We want to look at the equipment plan and the affordability of it, and the simple question, Mr Williams, is this. After all this time that I and this Committee have been looking at it, we have a gap, which has significantly deteriorated since last year. Why?\nDavid Williams: As you set out, Chair, the excess on our current assumptions over budget over the 10-year period is just under £17 billion. Just to put that in context, that is around a 6% overall excess on a baseline budget assumption of just under £290 billion. There are two principal drivers of that change. One is the impact of adverse economic conditions, particularly the impact of extraordinary inflation, which has added around £11 billion to the cost of the programme as we previously envisaged that to be. Together with movement on foreign exchange rates of a couple of billion pounds, that is the bulk of the net increase.\nWe have also taken a decision linked to the context of the dangerous world in which we find ourselves, consistent with the integrated review and with the defence command paper, to seriously de-risk the nuclear enterprise in defence by ensuring that it is fully funded and de-risked, and so there has been a substantial increase in the cost of the nuclear enterprise over that period as well.\nAs we may come on to, I would describe this equipment plan as, effectively, a work in progress. We drew a line under it at the end of March 2023. There is more to be done on ensuring not only that the programme is affordable but that there is clarity on assumptions around budget, around the costs and around the content of the programme.\nQ13 Chair: At the moment, the spending review is scheduled for November of this year, but we will come to that later, because there are a number of uncertainties around that. You have this shortfall of nearly £17 billion. As you say, some of those pressures such as inflation and forex are difficult to control, but you are going to have to manage that shortfall nevertheless, so it is a balance between capability or efficiencies. How are you going to approach that? We stress that it is over a 10-year period, so there is front-loading and back-loading that you can do, but we have seen problems before when you have just moved issues to the right. Can you assure us that you are not going to do that, and what are you going to do to try to shrink the gap?\nDavid Williams: Let me say this in as reassuring a way as I can. One of the uncertainties that we are dealing with is the timing of the Government’s commitment to increase defence spending to 2.5% of GDP. On Monday last week, the Prime Minister said in the House that the timing and trajectory would be a matter for the next spending review. We are keen not to cut, defer or de-scope capability programmes unnecessarily in advance of clarity around that budget. That is one of the reasons why, in the material that we set out to the Committee, we talk about an upside and downside budget scenario.\nAs inflation changes, the forward costs over a 10-year programme will change as well. Inflation is coming down, so some of the assumptions about the costs of the programme in the later years will reduce.\nQ14 Chair: You still have the increase that you have had in recent years.\nDavid Williams: We still have the increase that we have had in recent years, and we are currently in the middle of a force design process, looking at the capabilities that we want to commit to. Some of those will be from the programme of record that we already have, as set out in this document, but we also want to reflect some of the new challenges and the learning set out in our defence command paper last summer, partly through lessons from Ukraine and partly around the pace of technological change.\nQ15 Chair: We are going to touch on capabilities in more detail in a moment. You have the gap in the equipment plan. You are saying you are going to wait until the spending review before making decisions about the 2.5%. Whether or not that happens, you are waiting. In the meantime, there are no real plans to cut projects and, if there are any that are not really going to deliver, they are going to keep costing money. Even if everything else is benign—you get an increase in defence spending, inflation decreases and a few other things work in your favour—there will still be a shortfall. Is there any realistic work going on about cutting or reducing a programme?\nDavid Williams: There is work underway right now, which is really looking at this problem in two parts. First, what are we going to do for the financial year 2024-25, maybe into 2025-26, and, secondly, what are our capability priorities across the 10-year period overall? Those are two somewhat different questions. It may well be that we need to take measures against existing programmes to manage through the first couple of years of that pressure. We have more choice when it comes to the decisions that we make over the 10-year period in terms of contractual commitment, although it starts higher and then tails off. Over the 10-year period, we are currently only about 25% on contract, so there is quite a lot of choice in the later years of the 10-year planning horizon about where we want to invest.\nQ16 Chair: So you are deferring the choices about making hard decisions.\nDavid Williams: We are deferring some choices where there are no-regrets decisions. For example, one of the key lessons from Ukraine is that we need to invest more in our munitions stockpiles. We will get on with that in advance of the next spending review. We are doing that already and, no doubt, we can talk a bit about that in this session.\nThe point is about not stopping things unnecessarily over the next 12 to 18 months, if it turns out that we are going to have funding headroom for it. What that means is quite an important focus on commitment control. As we are going through the approvals and putting new programmes on to contract, there is then a decision about being confident that we want those in the forward programme, come what may, given the budgetary and costing scenarios that we face. If not, we then take a decision on a case-by-case basis about whether it makes most sense to defer that programme.\nQ17 Chair: We are going to get into a long answer here. There are lots of words, but we are going to drill down on some of the capability issues a little later. A colleague will be picking up on those. One of the things about this report is that, when it came out, the Department’s public statement did not sound like it agreed with the National Audit Office’s take on this, which is well worked up. Can you just be clear that it is an agreed report?\nDavid Williams: It is an agreed report, and it is based on data that we shared with the National Audit Office. We worked closely with it on the production of the report. The distinction—and it is not a criticism of the NAO work but almost having set it an impossible task—is that we did not publish our own equipment plan this year, because of the uncertainty of how we would deal with inflation and the opportunity to think about new capabilities that we want in light of the defence command plan. That is why I described it as a work in progress. There are a set of issues that we still need to work through.\nThe NAO analysis is not very different to the approach taken every year. It is a view based on a set of data, which, for us, is still interim. That is really all that I mean. There is more to come.\nQ18 Sir Geoffrey Clifton-Brown: I am going to drill down a little further on the Chair’s questioning. You are holding everything in this 10-year defence plan, knowing that it is unaffordable. Is this a deliberate ploy to put pressure on the Treasury to give you that 2.5% more quickly than it would otherwise wish to?\nDavid Williams: No, not directly. The point is simply that, if you are looking to plan with a degree of precision over a 10-year period, it is helpful to know what your budget is. I have certainty about my budget only for the next 15 months before we are into the next spending review, so it is based on a set of assumptions.\nQ19 Chair: Was “the next 15 months” a slip of the tongue? The spending review is scheduled for November of this year, we believe.\nDavid Williams: I have budget certainty until the end of March 2025.\nChair: Then the new spending review will kick in. Forgive me. You are right.\nDavid Williams: There will then be a debate for 2025-26. My point is that the Government’s stated position is that, as economic and fiscal circumstances allow, the defence budget is going to increase. The core assumption here does not factor that in. My colleagues may correct me, but the upper scenario for our defence budget assumes growth towards 2.5% from 2027 through to 2032, but that is just an assumption from us.\nQ20 Sir Geoffrey Clifton-Brown: The point that the Chair was trying to make is that, without prejudging whether the Chancellor is going to give you that 2.5%, the content of this defence plan is unaffordable. Therefore, the responsible thing to do—and, indeed, any budget holder in any other Department would be widely criticised if they did not do this—would, surely, be to make a priority list and take out those items that were not an absolute priority. Otherwise, you are holding items in there, spending money, planning staff, working out budgets and everything else. You might then have to cancel them much later in the day, which would lead to very poor value for money for some of the other matters that remained in. You would get better value for money if you took out those that were not priorities, would you not?\nDavid Williams: First, depending on the timing of a move to 2.5% of GDP, the plan could well be affordable as currently set out. That definitely does not mean that we are being complacent about managing inflationary pressure where we can. We are going through that process, and General Magowan is leading the process at the moment to review our priorities against not only affordability but the kinds of capability lessons from Ukraine and the ambition that we set out in the defence command paper refresh last summer. We are doing that and, where there is a no-regrets move to either fund or stop, my expectation is that we would enact that quickly. Where it is something that makes sense to view in the round alongside a spending review process, those are decisions that we will take when we get into that cross-Government resource allocation event.\nQ21 Sir Geoffrey Clifton-Brown: I am going to switch to you, Mr Wipperman. Good afternoon. We have limited time, so shortish answers would be really helpful. I want to talk about two aspects of the plan. It says in the NAO report that you are planning to move quite substantially to inflation-linked contracts because of the recent spike in inflation, which is now coming down. What incentive does that give to your defence contractors to keep their costs down if you do that?\nTom Wipperman: The reason why we have moved towards that policy is that, going into this period of high inflation, around 25% of our contracts were firm price, and so the suppliers were taking the inflation risk. As we have moved into very high levels of inflation and very volatile movements in inflation, the cost to us of trying to put that risk on to suppliers has been too great. The value-for-money judgment is that we get better value for money by linking to the appropriate indices—and I am happy to talk about indices in a second—that mean that suppliers are not fully exposed to that risk and that we are doing some risk sharing. Which indices we might use for any particular contract will depend on the nature of what we are buying and the materials that go towards a product.\nQ22 Sir Geoffrey Clifton-Brown: One of my colleagues is going to ask about that. On the specific issue of contracts, you did not answer the second bit of my question about what incentive there is on your suppliers to keep their costs down, if you give them a full inflation-linked contract. It puts me in mind—and I am old enough to remember this—of the old cost‑plus contracts, where the MoD was well and truly ripped off by its suppliers because they knew that they could immediately pass every single increase in costs back to the taxpayer.\nTom Wipperman: Mr Start may want to comment on the details of the contracts, because he would be closer than I, but the indices that we would use will set out a set of costs and be independent of any particular behaviours. The indices are to do with market prices and the way that things are moving. Linking it to the contract, whether it is CPI, clothing and textile indices, or RPI, will be an escalator within the contract that we would have agreed.\nQ23 Sir Geoffrey Clifton-Brown: Surely, it is in all of our interests to try to keep inflation down. One way to do that is to put pressure on your suppliers, and one way to do that is by an incentivised contract rather than full inflation-linked contract.\nAndy Start: If I may, there is a value trade-off to be had around inflation volatility. If the inflation volatility is very high—\nSir Geoffrey Clifton-Brown: It has peaked and is coming down.\nAndy Start: It is, but it is still really quite volatile. At this point, that volatility means that, at the moment, on balance, we are better off using indices rather than fixed prices. Once it is stabilised, we will probably wish to go back to fixed prices. It depends on the nature of the individual contract as to the level of incentive to the supplier within the contract. If you are on a target cost incentive fee style contract, there becomes a strong incentive for the contractor to try to keep the cost down. If you are on a more straightforward single-source contract, there is less incentive within the contract.\nConversely, industry knows that the more it spends on a particular contract, the less there is to spend on other things. Its supply chain is not where it wants to spend the money. It wants to spend the money on generating more profit. Driving costs down and making the products that it has more exportable is more attractive, so there is an export incentive, although I would like that incentive to be stronger. That is the other dynamic that sits in this frame. It is not perfect, and every dynamic has a trade-off, but, at the moment, it is very clear to us that, if we try to cost in inflation with the level of volatility, we are just not getting good-value-for-money offers back.\nQ24 Sir Geoffrey Clifton-Brown: General, good afternoon. Can I come to you, please, on a completely different aspect? This is on how your top-level budget holders approach their budgets. Some approach it on a completely different basis to others. For example, the RAF and the Navy have unaffordable plans, because they include full predictive costs for the capabilities that Government expect them to deliver, while others, such as the Army and the strategic programmes directorate, have developed affordable plans by accepting greater risks that their capabilities will not meet Government’s objectives. Does that make any sense? Surely, they should all do their budgets on the same basis. Otherwise, you cannot compare apples with apples. You are comparing apples with pears.\nLt General Sir Robert Magowan: On the financial machinery, I will hand to Mr Wipperman. From the perspective of capability and the risk that we carry, it does not make any difference to me, because I can see what capabilities we need in each domain or across domains—multidomain, as we say—and whether that is costed in the programme. I compare that against the risk register that I hold, so how they report it and whether it is within or without their costed programme is not going to deflect me from understanding where the operational risk is. The machinery of the process is more in Mr Wipperman’s space.\nSir Geoffrey Clifton-Brown: I probably asked the question to the wrong person. I apologise.\nTom Wipperman: To build on what the general said, the first thing that we would really want to be clear on is that we are not saying to TLBs that they can go off and do whatever they want in terms of the way they build up their budgets and plan. Through the planning round, we set them a clear set of instructions about what they need to do. We set them clear parameters—for example, the inflation, forex or pay rates that they need to use. They have to build that within their equipment plan and the rest of their budget to make sure that there is consistency.\nWhere we see a difference is between the TLBs that put the cost of some projects that are within policy or within ambition in their plan and those that do not. Going back to what the Permanent Secretary said a short while ago, the plan represents a snapshot of a period in time and the capabilities that the Army knows it needs to develop came out through the DCPR work, which was undertaken after this plan closed on 31 March. Through the early part of this financial year, as we finalise the DCPR, we are now working through how we bring some of those capabilities and choices into the plan and the sorts of trade-offs that we might need to make elsewhere.\nQ25 Sir Geoffrey Clifton-Brown: Does it really? If they are doing it on a different basis, some are including the risks and some are not. How can that be fair? If I were CDS, I would be pretty miffed that others were doing it on a different basis to me and I would say, “If they are doing it on a different basis, I am going to do it on a different basis”.\nTom Wipperman: As the general said, we see clearly in their plans, which come back to us, the balance of financial and capability risk that they take. They are able to make different judgments within their own budgets and plans of the extent to which they want to balance those. We do not just accept what comes back to us. We are working closely with the general’s teams to say, “Are we comfortable that that balance of risk between each TLB is correct?” In some places, we might say that we want them to take less capability risk. In others, we might want them to take financial risk. It depends on the nature of the suppliers and of the contracts that they run, and whether they have flexibility.\nQ26 Chair: Could you give a precise example of each of the scenarios—one where there is more capability risk and one where there is more financial risk? We have really puzzled over why this was. When I first saw this last autumn, I could not understand it, and I still do not.\nLt General Sir Robert Magowan: I will leave the machinery to Mr Wipperman. To your point, Chair, about examples, one would be between the Navy and the Army. There are elements in the plan—and we can go through those—with regard to the shipbuilding pipeline into the 2030s that are not funded and so are a pressure within the Navy. As I have discussed at various Committees, the so-called four plus one, which we can go into, sits above the line in the Army as something that is not funded, but it is outside their EP.\nWhen I look at that, there is no advantage to the Navy or the Army as to whether it is above or below the line. I know that we have to commit more to our shipbuilding pipeline into the 2030s, and we know that we have to treat some of these operational risks that we are learning from Ukraine and the so-called four plus one in the Army. The deliberation of where we are going to make decisions and where we are going to hold operational risk is not manifest in terms of the decisions that we make.\nDavid Williams: For me, it is partly a function of timing. As Mr Wipperman said, quite a lot of the conversations about the Army increases were discussions that we worked through after we drew a line under this equipment plan in the context of our offering into the new NATO force model—what our contribution was going to be to the strategic reserve, rapid reaction forces, regional plans and so on. There is a debate now to be had about whether the Army is funding them from within its existing programme or whether that will be money allocated to it by us.\nThe challenge here is partly that it is about a set of risk judgments as to where you hold the balance of capability, financial and, indeed, delivery risk in a delegated system. That is something that we are looking at as part of our review of procurement and of the operating model. It is partly about the extent to which, in that delegated model, frontline commands in particular have the authority to make changes, or whether they need to refer back to us through processes that General Rob runs.\nI have absolutely no problem in accepting the recommendation from the NAO that we should try to make this more consistent. Although we can see the line, it is an additional challenge for us, which, all things being equal, I would rather we did not have, and it does make it quite difficult for you to hold us to account.\nQ27 Sir Geoffrey Clifton-Brown: You have anticipated my next question. As professionals, you may well understand why it is done on a different basis, but, in terms of transparency to the general public, surely it ought to be done on a consistent basis.\nDavid Williams: It would clearly make our equipment plan easier to interpret. As we think about how we reshape publication of equipment plan data for the future, views not only from the NAO but from this Committee will be most welcome. There is a question for us, notwithstanding where, formally, the numbers come out at the end of a planning round, as to whether we want to present it on a standardised basis, even if we would have to think about how we work our internal data with the NAO.\nQ28 Sir Geoffrey Clifton-Brown: That is long answer but you have given us a good hint for a recommendation.\nDavid Williams: I think it is a yes.\nQ29 Chair: It is just worth pointing out that paragraph 1.12 on page 19 in the NAO report highlights the Army’s approach. This why I was and still am puzzled, and I am heartened that you are saying that it would be good to get the same baseline. If that approach was taken, the estimate is that it would be around £12 billion more to fully provide the capabilities, which is potentially an added shortfall.\nDavid Williams: Some of that includes investment in ammunition stocks, for which we have said in the DCP that we will allocate another £2.5 billion. It is not all for the Army, but quite a lot of it will go in that direction. Some of it will be programmes that the Army will want to fund by prioritising new investment over old.\nQ30 Chair: To be fair, ammunitions are to be delivered in the short term.\nDavid Williams: We want to get to the situation of an always-on production line on munitions, so that we can surge when we need to.\nQ31 Chair: My point is that it is quicker to deliver munitions than a new aircraft carrier.\nLt General Sir Robert Magowan: Not necessarily. The whole point of munitions is not what you just said, Chair, if I may say. It is about a long-term commitment to industry. We are learning, through operational lessons and not just from Ukraine, that we need a stronger industrial base. Some, but not all, of those areas will need some time to get to a level of production that is suitable for the ability to deter state-on-state conflict.\nQ32 Chair: So we are not talking about just a few years; we are talking about a decade.\nLt General Sir Robert Magowan: In some cases, we can go quite quickly. Mr Start is much more of an expert than I am in facing industry. For others, it is going to take a period of time, but that is the business that we are in. We are in long-term commitment, long-term resilience and long-term deterrence.\nChair: We are beginning to get flesh on the bones of the picture.\nQ33 Mr Francois: Mr Williams, I have a general question that is very germane to this. The Secretary of State recently gave evidence to the Defence Committee, where he presaged a major announcement within the next few months on big changes to the way that we procure military equipment. As you know, you and the Defence Committee have had certain discussions on this. Can you give us a date for when that announcement is likely to be made? Can you promise us that it will be made to Parliament first and that we will not read about it on the newswires, not least because the Speaker is at about the limits of his tolerance on this? When can we expect this major new announcement about procurement reform? If you cannot answer that, maybe Mr Start can.\nDavid Williams: There is always a set of grid and parliamentary business processes to work through. As you know, normally when I give the Committee dates, they turn out not to be right. We are targeting an announcement before Easter.\nChair: We recognise that it is not entirely in your hands. We do understand that.\nQ34 Mr Francois: That is good, because the House rises on 26 March and is due back a little after that, but then we are in April and in purdah for the elections and all the rest of it. If it is not by then, you are probably talking about mid-May, realistically. We understand grid management. Can you just give us your commitment—and we respect you, David—that you will do your very best, subject to those extraneous factors, to have it made before we rise for the Easter recess on 26 March?\nDavid Williams: We are collectively being driven by the defence ministerial team for the work to be ready in that kind of timeframe.\nQ35 Mr Francois: That is as far as we can ask you to go. That is very good. Thank you very much. Moving on to some programme specifics, let us look at the Royal Navy. There have been many press reports that Type 23 frigates HMS Westminster and HMS Argyll, which have gone into refit, will not come back out, which would take us down to 15 available frigates and destroyers as opposed to the current number of 17 and what was, for very many years, a number of 19. Will Westminster and Argyll come back into active service from refit?\nLt General Sir Robert Magowan: The Secretary of State has not yet decided on those two particular vessels. We are in negotiation with the Navy so that we can provide the advice to the Secretary of State. He has not yet announced what is going to happen to Westminster and Argyll.\nQ36 Mr Francois: But you cannot tell us for definite that they are coming back. It is subject to final approval, one way or another, by the Secretary of State. It is, metaphorically, on his desk.\nLt General Sir Robert Magowan: Yes, exactly what you have just said, Mr Francois.\nQ37 Mr Francois: We know what that means, so we are down to 15. For the Type 31 programme and the Venturer class, is initial operating capability still late 2027?\nLt General Sir Robert Magowan: Yes, 2027.\nQ38 Mr Francois: For the Type 26 and HMS Glasgow, initial operating capability is still October 2028.\nLt General Sir Robert Magowan: That is correct.\nQ39 Mr Francois: So we are going to have to run the gauntlet of this gap for the best part of another three years, nearly four, when, even on a good day, we may have only 15 escorts available when you knock off the ones that are in refit or deep maintenance. In the Defence Committee’s public session, we asked the First Sea Lord, “How many escorts, including those already on active service, could you put to sea to fight tonight?” He said eight and a half. As he is the First Sea Lord, I presume that you agree with that figure.\nLt General Sir Robert Magowan: I will agree. On your first point, you made an assumption about Westminster and Argyll, and we will have to wait and see what the Secretary of State’s decision is on those two.\nQ40 Mr Francois: I understand that, but what I am saying is that you have not contradicted me, so we will make that the working assumption for this afternoon. That is eight and a half escorts that the Royal Navy could put to sea. How on earth can we deter Vladimir Putin with eight and a half escorts, when the destroyers’ power packs do not work very well and the Type 23 frigates are so old that they keep failing their MOT? Who are we kidding here?\nLt General Sir Robert Magowan: First of all, the high watermark of 13 Type 23 and six Type 45 does not translate to 19 escorts at what we call readiness level 0. You know, Mr Francois, that the system does not work like that.\nQ41 Mr Francois: Yes. Would that it did.\nLt General Sir Robert Magowan: That is the first point. Secondly, the United Kingdom is not facing down the Russian navy by itself. It is there to deter our adversaries along with an alliance called NATO. Thirdly, we accept that the Type 23s are coming to the end of their life, although some of them will be in service through to the 2030s, which is precisely why you have just given the dates.\nQ42 Mr Francois: How has this situation been allowed to develop? The Type 26 has slipped again and again. The cost of that one-year extension in time to the taxpayer is nearly £250 million. How old the Type 23s are is not a state secret. It is like that car that you keep putting through for an MOT and, every year, it gets more expensive. Why have we allowed the Type 26 programme to slip to the point where it takes 11 years to build a frigate, when some other nations can build the equivalent in three? How did that happen?\nAndy Start: First, we have to be careful with comparisons. I think that the example you are picking is Japan, which has got down to a three-year build cycle, but we should get down to a three-year build cycle with Type 31 as we come to the back end of the Type 31 build process. Type 26 is an absolutely top-end capability. It is pushing the boundaries of what has been done before in order to provide us with an asset that is as capable as possible to make it. That has had real technical issues in developing the ship.\nThe good news on Type 26 is that we now appear to have a stable programme. They are making decent progress. I am pleased to see the investment in the build hall. I was up there just before Christmas, and progress on the first ship is starting to really come on. It is disappointing that it takes that long, but the comparisons are not exactly like for like and, as I said, when we get to the back end of the Type 31 programme, we should be at that three-to-four-year build time.\nQ43 Mr Francois: To save time, the Type 26 is a world beater. We have exported it to Australia and Canada. In terms of the prosperity agenda, this is fantastic. The ship is so good that we are anxious to get it into service sooner rather than later. That is why we are beating you up about it a bit: we do not want to wait any longer than we have to for a world beating ship.\nLet us move on to Fort Victoria. If the carrier sails, it needs a support ship to carry some of its stores. The last one we have that can do that is Fort Victoria, which is nearly 30 years old. We have a competition to build some new ones. That has been delayed and delayed, so they are years away. If the carrier now sails without Fort Victoria, we have to beg, steal and borrow a support ship from another ally. We have spent £10 billion, including the aircraft, on a “sovereign” carrier capability that now hangs on borrowing a support ship from another nation. Why did Fort Victoria not sail? Was it because she is not technically ready to put to sea, or you cannot crew her?\nLt General Sir Robert Magowan: Fort Victoria is going through a scheduled maintenance period. We have the Tide class. They are oilers, but they have the capacity to support a carrier task group in addition to providing it with fuel across the range of logistics support that a carrier task group needs. That is why we are accelerating the FSS programme. You are right that it has had some difficulties, but we are on schedule.\nQ44 Mr Francois: What is the IOC for that?\nLt General Sir Robert Magowan: It is 2029 for the first phase.\nQ45 Mr Francois: Very quickly, yet again, General, we have a situation where we have a critical and very expensive capability—for the record, my father was in the Royal Navy and I am as pro carrier as you are going to find—that hangs on some extremely old warships, because the new warships to replace them are running years late. There is definitely a pattern here, is there not?\nLt General Sir Robert Magowan: I agree.\nQ46 Mr Francois: So why not do something about it?\nLt General Sir Robert Magowan: We are. That is why we have commissioned Type 31, Type 26 and FSS. That is why we are commissioning MRSS. We know that many, although not all, of our current maritime platform capabilities are coming to the end of their life. You are articulating the recapitalisation programme of our fleet. That is precisely why we are doing it. Are there some delays in some of those programmes? Yes, there are. We accept that, and that is why we are doing all that we can.\nQ47 Mr Francois: Forgive me, but we do not accept that. That is why we are here. I have two more quick questions and then I will come back to the Chair. For the LPDs or amphibious assault ships, the out-of-service date for Albion and Bulwark is 2034.\nLt General Sir Robert Magowan: It is 2032.\nMr Francois: It was 2034 in the PQ that I got the other day, but, if I am wrong, I will buy you a drink. I thought that it was 2034. We will argue about that later.\nChair: We will take the general’s date.\nQ48 Mr Francois: Is the reason that they now seem to be in play because they are old—they still have nearly the best part of a decade left, whichever one of the two of us you believe—or is it because you cannot crew them?\nLt General Sir Robert Magowan: If we go back to the Westminster/Argyll conversation, the Secretary of State has not made a decision about the future of Albion and Bulwark at the moment.\nQ49 Mr Francois: My question is why it is even an issue.\nLt General Sir Robert Magowan: At the very start of this Committee conversation, we accepted that we have workforce issues across the Armed Forces. Therefore, we need to look at the totality of those pressures when we look to start to crew some of these new capabilities that you have talked about.\nQ50 Mr Francois: So it is workforce issues and crewing.\nLt General Sir Robert Magowan: Crewing is definitely an issue within the Royal Navy. We accept that. As to whether that is the driver for whatever decision the Secretary of State makes with regards to the two LPDs, there are a range of issues associated with that.\nQ51 Mr Francois: I realise that you are sitting here in lovat green, so it is a difficult question, but thank you. Lastly, on SSNs or attack submarines, we will not talk about the deterrent in open session, but it is widely known and reported on all sorts of websites that, a few months ago, we did not have a single attack submarine at sea, because they were spotted all tied up either in Faslane or in Devonport. That has not happened for, crikey, half a century. Why did we not have a single attack submarine at sea?\nLt General Sir Robert Magowan: I am not going to get into the detail of the operational readiness of our SSN fleet.\nQ52 Mr Francois: Just give us a rough idea.\nLt General Sir Robert Magowan: We are quite clear on the numbers. We have one Trafalgar class left, and we have four at sea, with a fifth Astute class soon.\nQ53 Mr Francois: With respect, there was no operational readiness. That is the point. They were all tied up.\nLt General Sir Robert Magowan: The operational availability of these platforms and, in fact, the totality of their capability change on a weekly, monthly and yearly basis, depending on what the operational tasking is. I do not think that you would expect me to sit here and give a detailed account of the operational readiness of our SSNs.\nQ54 Mr Francois: General, I am very proud to have had a father at D-Day on a minesweeper. Across the Navy, it is the most godawful mess at the moment, is it not? We have just been through class by class. It is a mess, is it not?\nLt General Sir Robert Magowan: I would disagree. There is no doubt that we have we have workforce pressures, as the Permanent Secretary has said, including in the Navy, but, as the Secretary of State made clear yesterday and in his speech last week, we are about to launch Steadfast Defender, which sees something like 40% of the total commitment of that exercise across the alliance coming from United Kingdom Armed Forces, including the Royal Navy and a carrier task group.\nMr Francois: I will meet you halfway. You said, “We have workforce pressures”, which comes right back to where we started. They are leaving at three times the rate that we can replace them. The workforce pressures are more important than any programmatic that I have just mentioned. If there is no crew, no ship goes to sea.\nQ55 Mr Djanogly: Inflation has been covered, but we have also been talking about costing uncertainty. I am looking at paragraph 1.27 in the NAO Report, which says, “The MoD reflects this uncertainty by recording and monitoring two levels of risk”. The first is “risk inside cost (RIC), which is risk that the MoD judges will probably occur and so includes it in its forecast costs”. It then goes on to say, “RIC has increased from £13.2 billion in last year’s plan (5% of forecast costs) to £22.8 billion this year (8% of forecast costs)”. Mr Wipperman, what proportion of the RIC is inflation?\nTom Wipperman: I would not be able to say explicitly how much of that risk increase is just to do with inflation. The risk inside costing is available to projects within their specific budget to deal with problems or challenges that might emerge as they go through their programme. Some will reflect inflation for those projects that see that as a risk. Some will be other risks. The reason why it has gone up is partly a reflection, as the NAO points out, that we have a growing budget—and you would expect it to grow—but it is also a recognition by us and by projects that we have been in a more volatile economic context. As a result, the level of provision available to projects should go up. That is why you see an increase. As I said, some of it will be for inflation, and some for other risks and issues that we are dealing with.\nQ56 Mr Djanogly: But you cannot break those figures down.\nAndy Start: I cannot. I can break down inflation overall and where we are seeing inflation rises. We are seeing inflation in the equipment plan of about £11 billion. On top of that, we have about £2 billion of fuel and forex. While that does not directly translate into the risk, that is additional cost pressure that we are seeing through the plan. Outside the equipment plan, we have about another £5 billion of inflation forecast risk, which is to do with utilities and energy costs, and the cost of maintenance in the estate, as well as about £6 billion to do with the consequences of the consolidated pay awards. In big handfuls, it is equipment and materials, infrastructure, utilities and energy costs, forex and pay.\nQ57 Mr Djanogly: That is helpful. That is what I wanted. You said that it has gone up. It has gone up by 63%, which is rather significant. Do you currently expect a similar increase this year, given that inflation is coming down?\nTom Wipperman: We are in the process right now of putting together the planning round for this year. We are analysing returns from TLBs to see how costs are playing through to them. In this plan in front of you, on top of that risk provision, we are holding £4 billion of contingency available across the plan as a whole, which is not allocated to any project and is available to us to deploy, should further issues occur.\nQ58 Mr Djanogly: What do you mean when you say that you are working it out again at the moment?\nTom Wipperman: That is for this year’s plan.\nQ59 Mr Djanogly: At what point do you draw sticks on the inflation figure?\nTom Wipperman: Probably towards mid-February, given the way our planning works, we will need to take a snapshot and say that that is the point at which we take a view. We do that for other variables as well, such as forex.\nQ60 Sarah Owen: General Magowan, what are the capability consequences for our Armed Forces of the plan being unaffordable?\nLt General Sir Robert Magowan: As I have said to Committees before, it is about balancing the risk against the budget that we are given.\nQ61 Sarah Owen: What is that risk?\nLt General Sir Robert Magowan: The financial risk?\nSarah Owen: No, your capability risk.\nLt General Sir Robert Magowan: I have mentioned the operational capability risks publicly before. Those areas where, if I gave you my top four or five, we know that we need to invest more are lessons from not just Ukraine but operations that we are seeing unfolding around the world.\nIf I were allowed to say only one thing, it would be straight lethality, which the Permanent Secretary has already mentioned. You cannot deter major state-on-state conflict if you cannot prove that you can close with and kill the enemy. To do, that you need lethality, so we need greater munitions stockpiles. Related to that, we need a strong industrial base to be able to produce that, which is a sovereign capability. That would probably be my number one.\nIf I were allowed another two or three in answering your question—but we are balancing these—it is clear that the battlespace of today and tomorrow is such that there are a lot of things flying through the air and trying to do us harm. Therefore, we need the ability to deliver what we call IAMD—or integrated air missile defence. We have a missile defence capability within the UK Armed Forces and within NATO, but we all agree across NATO that it needs to be deeper and broader.\nQ62 Sarah Owen: How confident are you that those three priorities that you have set out are going to be included in what Mr Williams puts forward to Ministers and what will actually be delivered?\nLt General Sir Robert Magowan: This is a fundamental question. The point here is that we must demonstrate that the programme of record—and both Mr Wipperman and the Permanent Secretary have made it clear that there are uncommitted elements within the programme of record out to 10 years—is not fixed from now until 2034 as far as our budget is concerned. Therefore, we have to be flexible in identifying those areas that are uncommitted and whether they are a higher or lower priority than the areas that I have just articulated, and there are probably a couple of others.\nAs I have said here before, from a military capability perspective, we will have to make hard-edged decisions about deleting, de-scoping or potentially deferring—we will see—to ensure that there is headroom to get after the things that we have just been talking about, and we will do that.\nQ63 Sarah Owen: Given the international developments that you just alluded to in North Korea, Ukraine, China and the Middle East, do the Armed Forces currently have what they need to meet those demands?\nLt General Sir Robert Magowan: Yes. This is state-on-state deterrence. We are part of a broad alliance, and my firm judgment and those of my seniors is that we are deterring state-on-state conflict. NATO is not at war. It is deterring state-on-state conflict, and we are part of that. Does that mean that we are not carrying any operational risk? Does that mean that we not do not need to adjust the programme of record to meet those operational risks? No, absolutely not. There are things that we are going to need to invest in. Are we deterring today? Yes, we are. If we need to go to war tonight, we can.\nQ64 Sarah Owen: Earlier in the Committee, you said that we need to be ready for changes. Are we ready for those changes? Do we have enough resilience built into the system currently to deal with those international developments that we just spoke about?\nLt General Sir Robert Magowan: Yes, we do, and that is our challenge.\nQ65 Sarah Owen: In terms of the plan, as you had alluded to, we said that not all of the cost pressures that are developed into the new capabilities are costed. Mr Williams, why do you not know how much it would cost to deliver all the capabilities set out in the refreshed defence command paper?\nDavid Williams: I think that you are referring to a list at table 5 in the report. Some of the items on that list generally refer to areas where there are choices about what we might do. We have not yet decided, for instance, whether we go for a midlife upgrade of the Meteor long-range air-to-air missile and precisely what that means. The scope of any work is still a decision that we need to make. There are examples where there are decisions still to come.\nThere are examples where we have funded early-stage feasibility and development work, but are still to make a decision on the scale and timing of production. There are programmes where we are working with international partners, so the level of funding that they might bring to a programme is still in negotiation.\nTo the general point earlier—I will probably make the same offer as I did to Sir Geoffrey Clifton-Brown—in our internal view of the programme, we have a good sense of those kinds of decisions that are coming down the track. Over a 10-year period, we expect to have more headroom and choice in the budget in the back end of the programme, so we are thinking about how we can bring those in at the appropriate time, but I accept that it is not necessarily the most transparent part of our planning process in the documentation or the data that we set out.\nQ66 Sarah Owen: No, I would say it is as clear as mud. In terms of the 2.5% increase in defence spending, what happens if that gamble of yours does not pay off and you do not receive that before you need it to complete some of these programmes? Coming back to one of the points that you made earlier, you said, “How do we set a programme without knowing how much money we have?” Why do you not help the people setting the budget by telling them what your priorities are?\nDavid Williams: It is not a gamble. It is stated Government policy to increase the defence budget to 2.5% of GDP as economic conditions allow.\nQ67 Sarah Owen: That is like when I ask my mum, “When is dinner going to be ready?” and she says, “How long is a piece of string?” If you cannot give us a guaranteed time, or at least a timescale, for this increase in budget, how can you be certain that you are going to be able to deliver the programmes that you need to deliver?\nDavid Williams: To use your analogy, in quite a lot of the conversations that we have with the Treasury, as you might imagine, we are explaining that we are quite hungry now. In the end, it is a matter for the Prime Minister and for the Chancellor, and those are decisions about spending priorities for Government that are properly made in a spending review. Were the Government to change that and to come off 2.5% as their funding ambition, there would need to be conversations about the level of capability that we could buy for the budget that they then agree.\nQ68 Sarah Owen: How much wriggle room do you have if the spending review were to be delayed, say, for a general election?\nDavid Williams: We are working through some short-term pressure, as I said at the beginning. Last week in the House, the Prime Minister suggested that the spending review might be in 2025 rather than in late 2024, but we are talking about six months or so here or there.\nQ69 Chair: Just to be clear for people who might be tuning in, if there were a general election in the autumn, there could not be a spending review at that point. If whatever Government were elected would like to have a budget shortly after a general election, the next spending review is typically around six months after a budget. Is that the sort of thinking that you are going through in the Ministry of Defence?\nDavid Williams: There needs to be a local government financial settlement by December of each year.\nQ70 Chair: There have been previous examples not that long ago of rolling over an existing spending review by just carrying it on.\nDavid Williams: What I am particularly interested in is when we get to the point of a multi-year settlement, and that may well be at a period of time after a general election.\nQ71 Chair: So you are expecting to get to a multi-year settlement.\nDavid Williams: We had a multi-year settlement at the last spending review and, for defence, that makes sense.\nQ72 Chair: Just to be clear, you are planning on that basis.\nDavid Williams: Yes.\nLt General Sir Robert Magowan: Our overall priorities are articulated in the defence command paper refresh. We have said that, and we now need to go into a level of detail beneath that, but we have articulated those. From a military capability perspective, we need a long-term settlement. We need a five-year settlement to give us the confidence, particularly with industry, to get after that long-term deterrence that I have been talking about. We cannot live year on year.\nQ73 Sarah Owen: Absolutely, I completely understand that, but what you are asking for is completely unfunded at the moment.\nDavid Williams: It is not that it is completely unfunded, because we make a set of reasonable assumptions about how the budget might develop beyond the spending review period. Even on a multi-year settlement, there are going to be two or maybe three spending reviews over the period that we are looking at. In the separate information that I sent to the Committee, we set out a central assumption around the overall budget, a downside assumption and an upside assumption. They are simply that—assumptions. We are not looking for a completely blank sheet of paper, but the precise settlement is to be decided.\nQ74 Sarah Owen: But there is a blank space of £12 billion within that.\nDavid Williams: It depends very heavily on assumptions about the budget and the content of the programme, what that programme costs and how we need to deliver it.\nChair: That is a long way of saying that, at the moment, you want to do more than you have money for, which is why we are here today.\nQ75 Mrs Drummond: You said that you wanted a five-year contract so that you could give security to suppliers for the programmes, but should they not be taking the risk, rather than the Government?\nDavid Williams: Mr Start may want to come in on that, and maybe I will come back.\nAndy Start: Companies can reasonably take risk when they have a reasonable chance of an economic return. The challenge that we have at the moment is that there is incredible volatility in the nature of the threat. In the Ukraine conflict at the moment, we are seeing technological changes within a 90-day period. That means that, for the equipment that we think we need, we make our best guess now, but we need to be very adaptable and change it. The risk of that becomes a military rather than a commercial one.\nIf you are sitting in industry, you can take sensible risk-based decisions around skills. We are seeing that with very substantial investment in skills by the likes of BAE Systems, Babcock and others in terms of building underlying capability, but it is very hard to make firm decisions around production capacity or particular products.\nThat is exacerbated by the fact that, in the defence market, which is not a regular consumer market but one that is heavily influenced by Government policies in different countries, you can sell only when there is aligned Government support for the products that you need in terms of exports. It is not a natural market, and making a strategic investment choice is extremely difficult for industry to do without Government giving it very clear signals.\nIn the UK, we try to publish as much of the defence pipeline as we can, and we have been increasingly doing a better job of that. We try to do that by engaging industry early in terms of the requirements, and General Rob has been doing groundbreaking work in terms of involving industry at high levels of classification, so it has a better insight than it would have otherwise. In the NATO context, we are trying to do that through the Conference of National Armaments Directors.\nWithout Government giving it appropriate guidelines, the industry cannot make long-term commitments, because the chances of it developing something that does not get sold is high.\nQ76 Mrs Drummond: Why are we not buying off-the-shelf products from other countries that have already taken this risk, particularly if you need it quickly—as you said, a 90-day one?\nAndy Start: All countries have the same underlying dynamic problem. Together with our allies, we have to paint as clear a picture as we can of the future need. Wherever possible, we, as Governments, benefit from having interoperable and interchangeable products with other allies. We benefit from when we develop products together, as we are doing with things like GCAP.\nJust buying off the shelf leaves you in a situation where you might benefit in the very short term, but, over the longer term, you do not have the level of sovereign ability to adapt and change the military need. In times of conflict, if you do not have national capability, it is very difficult to adapt at speed.\nOur overall acquisition strategy has to be a blend of having onshore capability, so that we have that sovereign independence, economic growth and jobs, but, also for security reasons, a mixture of international partnerships and some things that we would buy off the shelf because it is much more economic to do.\nChair: We will touch more on the industrial strategy side of this shortly.\nQ77 Sir Geoffrey Clifton-Brown: Mr Start, I cannot help pondering the answer that you gave to the last question. I might refer you to Ajax, where you would have had a vehicle fully in operation by now if you had bought off the shelf, but we are not going to go there.\nMr Williams, going back to my earlier question, we have been over and over the nuclear enterprise funding gap in the budget of £7.9 billion and the total budget gap of £16.9 billion. How are we going to close that gap?\nDavid Williams: Yes, so £7.9 billion of the £16.9 billion is currently showing against the nuclear enterprise. Our initial experience within the nuclear ringfence that we have been operating this year is that our first set of cost estimations have been about right. We will deliver within that budget without deliberately having had to slow programmes down.\nPart of the way in which we manage that cost pressure will be through the exceptional flexibilities that we have agreed with the Treasury for the nuclear ring-fence, which will allow us both to commit spend at pace through more streamlined approvals processes and to bring money forward and backward to address risk as it begins to crystallise.\nIt reflects about 7% of the nuclear budget over the 10-year period. At this stage, my expectation is that that level of financial pressure will be broadly manageable.\nQ78 Sir Geoffrey Clifton-Brown: I am absolutely certain that the flexibility you have gained from the Treasury is very useful, but how likely is it that in next funding reviews you are going to need to come back and ask for more money for the nuclear enterprise?\nDavid Williams: I cannot rule it out, but part of the reason for the particular increase in this planning round is that we deliberately asked our colleagues working in the nuclear enterprise to make sure that they were being comprehensive and risk-aware in the numbers that they put in.\nThere are always adjustments up and down, but, in comparison to previous planning rounds, this is a much less financially risky position and a more comprehensive view not only within the Defence Nuclear Organisation but in allied top-level budget areas. Nuclear costs within the Royal Navy and Strategic Command have been included within that ring-fence.\nThere has been quite a lot of de-risking in this planning round. It is often in the nature of nuclear costs that they can move around, but this is a much healthier position than we have been in for a number of years, in my view.\nQ79 Sir Geoffrey Clifton-Brown: “We are in a much healthier position than we have been in for a number of years”. That is a really interesting statement.\nMr Wipperman, given that the nuclear enterprise budget is consuming such a large proportion of the total budget, how likely is it that, in order to fund it, you are going to have to further cut conventional weapons over the next 10 years?\nTom Wipperman: The answer to that partly goes back to what the Permanent Secretary has been saying about potential future funding scenarios. The letter that the Permanent Secretary sent to the Committee set out some of those scenarios. In one of those scenarios, the funding for nuclear that we receive from the Treasury continues. That leaves you with this £7.9 billion, which, as we have set out, we think is manageable over a £100 billion 10-year budget.\nQ80 Sir Geoffrey Clifton-Brown: That is predicated on, as Ms Owen says, the Treasury granting you this extra 2.5% of GDP. If you do not get that, does that answer still stand?\nTom Wipperman: I was going to go on to say that in the lower-bound scenarios that we set out, where we have a lower budget than we might currently forecast, we would have to work with Ministers about the sorts of choices available to them and where they would want to balance capabilities.\nDavid Williams: Just to be clear, in the central budget scenario, which generates the £7.9 billion, we have made no assumption about progress to the 2.5% as a policy choice. That is in our upside budget scenario.\nTom Wipperman: Yes.\nQ81 Sir Geoffrey Clifton-Brown: It does assume that £7.9 billion.\nDavid Williams: Yes.\nTom Wipperman: Yes, it does.\nQ82 Sir Geoffrey Clifton-Brown: Otherwise you will be left with a scenario where you will have to cut conventional spending, if you do not get that 2.5% of GDP expenditure.\nDavid Williams: Yes, if the nuclear enterprise is unable to manage the costs within the funding envelope that we expect to give it, and if at that point we choose to find savings in the non-nuclear side of the programme rather than deliver nuclear within the ring-fence. There are some variables there.\nQ83 Sir Geoffrey Clifton-Brown: That is understood. Mr Wipperman, very briefly because time is moving on, what capacity did the delivery agency and industry have to deliver the nuclear programme more quickly and therefore help save costs?\nTom Wipperman: Mr Start might be better placed on some of the industry, but, in terms of how we put together the plan, the forecast is based on the defence nuclear enterprise, the Defence Nuclear Organisation and the associated elements giving their judgment working with industry about its ability to deliver.\nAt the spring Budget this time, in March 2023, we received an extra £3 billion spend for nuclear, £1 billion for this year and £2 billion for next. We currently forecast that we are on track to spend that extra funding and to get that out through the supply chain. We did a lot of work with the DNO to get an assessment of realistic spend profiles. Currently, we think we will be able to deliver, but Mr Start may be better placed to talk about it more broadly.\nDavid Williams: If I can come in first, last year Ministers announced a nuclear skills taskforce looking at both defence and civil nuclear skills requirements in the round. Our assumptions going into that work, based on some earlier internal reviews, have been that across the defence nuclear enterprise over the course of around a 10-year period we will probably need an extra 10,000 or so apprentices, graduate engineers and so on to deliver on the totality of the defence nuclear ambition.\nThat skills taskforce made good progress over the back end of last year. A report will shortly be with Ministers for them to consider. The announcement on that will get to the heart of your question.\nQ84 Sir Geoffrey Clifton-Brown: This question is either to you, Mr Williams, or to Mr Start. We have talked about speeding up the defence nuclear enterprise to save money. Does the same argument still apply to the conventional weapons budget—that, if you could speed up some of the programmes, you would be able to save money and make the programme more affordable?\nDavid Williams: Yes. Both in hearings here and in the Defence Sub-Committee that Mr Francois chaired, there was a renewed and welcome emphasis on pace. That will be a key feature of the announcements by Ministers around our new procurement model. In a world of high inflation, delivering more quickly, or at least delivering on time, avoids inflationary cost pressures.\nIn the kind of uncertain world that we are in—we have talked in the defence command paper about sprinting to a 70% or 80% capability and then spiralling—getting usable capability into the hands of the warfighter more quickly is the capability ambition. That is the most important piece. It has the advantage of probably allowing you to deliver it more cheaply.\nQ85 Sir Geoffrey Clifton-Brown: Can you give us an exemplar—it will probably be one of those green projects in the GMPP—of a project that is well ahead of schedule at the moment and that you are proud of?\nDavid Williams: We only have one green project in the GMPP. No, we have two. I do not know whether General Rob wants to comment.\nLt General Sir Robert Magowan: Can I take it from the other angle? We accept the challenge that, with all the programmes here, in quarter 3, 11 of them are at red. Half of those are in the areas that you have just been talking about, so complex weapons or the nuclear enterprise.\nTo support what the Permanent Secretary said, there are a range of reasons for that.\nQ86 Sir Geoffrey Clifton-Brown: I was not really going into those. I just wanted one exemplar of which you are proud that it is being delivered on time or even ahead of budget.\nLt General Sir Robert Magowan: A number of the Air Force programmes are developing well. We have had F-35B success.\nQ87 Sir Geoffrey Clifton-Brown: That was a conventionally established programme.\nLt General Sir Robert Magowan: Yes, but you are asking for a major programme, a cat A programme, that is delivering to cost and time. We are rolling that out. We now have the second squadron up and running. We will have 48 F-35Bs certainly delivered from 2025. We are looking to grow that to 74. There is an example of a programme that is delivering operational capability today.\nAndy Start: Sir Geoffrey, if you look at some of the things we have done for Ukraine, we have tried to take these opportunities around acceleration that we are trying to build into the longer-term system. We have then been able to be very successful in delivering a lot of capability very quickly.\nAn example is the acquisition of Archer, where we replenished using an existing off-the-shelf capability at real speed. A second example is the way that we have introduced the use of both armed and unarmed drones, taking technology from concept through to operation in weeks and months rather than years and decades. There are some really exciting opportunities that we have demonstrated in that space.\nWe are trying to roll out that kind of approach, where we take more operational risk, get our capabilities out more quickly and then spiral up. We are doing that in the conventional weapons space, in particular in munitions. In the munitions space, we rolled out capabilities to protect our warships, equipping Lynx with a capability early for both FASGW-light and FASGW-heavy. Those are Martlet and Sea Venom, off the top of my head.\nLt General Sir Robert Magowan: It is Wildcat.\nAndy Start: In both cases, we got a capability out quickly and then we spiralled that capability up by increasing its capability over time. That is the approach that we need to use much more widely.\nWe are also trying to take approaches that are more modular. Within the Boxer programme, similar to the concept of the Type 31 programme, we get out the basic capability that is the underlying platform, and then we can enhance that platform with mission modules and enhanced capabilities over time. That gives us a solid basis but allows us to be flexible and spiral in capabilities more quickly.\nSir Geoffrey Clifton-Brown: We are used to asking critical questions in this Committee, but congratulations. The UK is recognised around the world as having got those capabilities out very quickly.\nQ88 Chair: Can I just go back to F-35, General Magowan? We have been following this for some time. We had the aircraft carriers without the aircraft, but we still have issues about the number that we need to have full capability. We are still quite far short of what we need to do. It is a programme that is beginning to deliver, but it is still behind where it ideally ought to be, given that we need those to make the carrier group operate fully and effectively. We also need the crew. That is another area that we have looked at, along with the training for pilots.\nLt General Sir Robert Magowan: Yes, for engineers, rather than pilots.\nQ89 Chair: There were also some pilot training issues.\nLt General Sir Robert Magowan: The extra 168 engineers has been the pinch point, which we have now funded. We are now growing those 168.\nQ90 Chair: When you say you are growing them, are you training them from within the service?\nLt General Sir Robert Magowan: Yes, so the headmark for us is two squadrons operationally deployed on Carrier Strike Group 25.\nQ91 Chair: With two squadrons, if you have any number of aircraft out of commission, you are struggling. You really need three, do you not, to make sure that you have full capability?\nLt General Sir Robert Magowan: The programme of record at the moment is designed to deliver three squadrons. We are rewriting the routine operating model at the moment. It is going to the Secretary of State in the next few weeks and months. There will be a ramp-up from what we originally said back in 2017. Either way, the headmark is for three operational squadrons by the early 2030s, but in the short to medium term there will be two squadrons operationally deployed with a training unit, an OCU, by 2025.\nChair: We are on schedule for that.\nLt General Sir Robert Magowan: Yes, we are.\nQ92 Mr Francois: Mr Start, for the record, when the Defence Sub-Committee looked at DNS, as you know, we were critical in a number of areas, but, on the principle of credit where it is due, we gave your organisation a lot of credit for everything you have done for the Ukrainians. Today, by the same token, for the record, it is worth recording in public session that, because your teams worked unbelievably hard, although we cannot quantify the number of Ukrainian lives you have saved, it will probably be in the thousands. Perhaps you will be kind enough to carry back the compliments of this Committee to all of your people at DE&S who pulled out all the stops to do that.\nAndy Start: Thank you, Mr Francois. It is much appreciated.\nQ93 Mr Francois: That was the good bit. Mr Williams, can I just check something that you said earlier just to make sure we understood what you said?\nYou have a problem. This is a 10-year plan, but you only know how much public spending that you have going forward three years. That is always a challenge. Am I right that you said from 2027, so the back end of this plan, the second half really, you were using more optimistic financial assumptions—i.e. that by then we will be spending about 2.5% of GDP on defence? Did I understand you correctly?\nDavid Williams: All of the analysis is based on data that we have shared with the NAO. That 16.9% budgetary pressure is based on a central assumption. I have made no assumptions in that about a trajectory to 2.5% of GDP at all.\nMr Francois: You have not.\nDavid Williams: We have an upside budget scenario. This is not based on any agreement with the Treasury. It is a set of assumptions that looks at what a growth of 2.5% of GDP by the end of the 10-year planning period, starting at the end of the next spending review period—let us say 2027-28—would look like.\nQ94 Mr Francois: If you get the “optimistic” outcome from your point of view, and mine too by the way, does that deficit disappear?\nDavid Williams: Yes, except that there is obviously a mismatch of profile because that gives you more money in the last five years of the plan.\nQ95 Mr Francois: It all fits, though.\nDavid Williams: It fits across the 10-year period.\nQ96 Mr Francois: I have one more, very quickly, and then I will go into some specifics. With the £17 billion deficit, what proportion of GDP are we spending on defence in that scenario? In your central assumption, what is your percentage assumption?\nChair: This is to fill the gap.\nMr Francois: Is it 2.2%, 2.25% or 2.3%?\nTom Wipperman: On the current assumptions that are built in this, based on the latest OBR forecast from November, by the end of the decade it will be about 2.1% of GDP.\nQ97 Mr Francois: This plan with the £17 billion “black hole”, to use media language, is based on us spending 2.1% of GDP on defence, plus Ukraine.\nTom Wipperman: No, it makes no assumption about the future of Ukraine. This financial year, we are forecasting 2.25% including Ukraine. Next year, we are forecasting 2.26% including Ukraine. We have no agreed funding for Ukraine.\nQ98 Mr Francois: All right, I have got that. When the agreed funding runs out, it is based on 2.1%.\nTom Wipperman: No, it will reach 2.1% in year 10 of this plan. It will be a downward trajectory year on year on that current forecast, but you would get to 2.1%, starting at 2.26%. It will be 2.26% in year 2 and 2.1% in year 10.\nQ99 Mr Francois: If it were to be 2.5% in an ideal world, that black hole disappears. I have got it. That is very clear.\nDavid Williams: Just taking this year, the difference between 2.25% and 2.5% of GDP is about £6 billion or £7 billion.\nQ100 Mr Francois: We get the point that many of the costs are frontloaded. We have got that. That is very helpful. Let us come on to the RAG ratings, the colours, very quickly.\nFor the benefit of our thousands of viewers abroad, the National Audit Office, which prepared this Report, is Parliament’s auditor, not the Government’s. The Government, since 2012, have had their own auditor called the Infrastructure Projects Authority, or IPA for short, nothing to do with a particular brand of beer. It goes through all the major Government infrastructure programmes, including in defence, and the biggest is Dreadnought. Then it assigns a RAG rating, red, amber or green, to each programme.\nWe have got into muddles in the past about which colours to use because sometimes you use slightly different colours. We are using the IPA colours, for the avoidance of doubt. It is page 37, paragraph 211. Of the 52 that it looked at, six were classified and so have not been rated, so 46 of the 52 had a rating. Five were red; 35 were amber; and two, only two, were green. Green is defined as, “Successful delivery on time, budget and quality appears highly likely”. By my maths, of the 52, that is barely 4%. That is awful, is it not, Mr Williams?\nDavid Williams: As we have discussed previously, we are absolutely not complacent about the number that are amber. There are a range of technical, commercial and delivery challenges in getting our most major and complex programmes delivered.\nThe proportion of red, amber and green is not materially out of kilter with the IPA’s reviews of more conventional programmes in terms of infrastructure and construction, Government transformation and IT delivery.\nQ101 Mr Francois: Mr Williams, forgive me. We understand that, but we are not going to deter Vladimir Putin with HS2, whether we have the extra leg or not.\nLet us come back to this point. The definition of amber—most of them are amber—is, “Delivery appears feasible but significant issues already exist, requiring management attention”. That is still something to worry about. Red, for the record, means, “Successful delivery appears to be unachievable”.\nThe red projects include the future combat air system, GCAP, Tempest, which is embarrassing, the core production capability for nuclear submarine reactors, which is embarrassing, MODNet Evolve—okay, that is still embarrassing—the Brimstone 3 air-to-surface weapon and the SPEAR cap 3 air-to-air weapon.\nWe have just signed a treaty with the Japanese and the Italians for the future combat air system, and yet the Government’s own auditor says the programme is red.\nChair: We should just be clear. The IPA is not quite an auditor. I know you are using shorthand, Mr Francois.\nDavid Williams: They are the programme delivery experts in Government.\nMr Francois: Red means, “Successful delivery appears to be unachievable”. We just signed an international treaty with two other nations. That is a bit embarrassing, is it not?\nDavid Williams: Colleagues may want to come in on the detail, particularly General Rob on GCAP. This is about the degree of difficulty in delivering against the planned 2035 in-service date.\nThere are examples—you will ask me now to give you one, and I will probably have to write to you—of programmes that are rated red, which, as a result of intervention, re-scoping or throwing additional resource at them, you can recover from red to amber.\nQ102 Mr Francois: David, I am sorry. I will save you a letter. F-35 was red last year, from memory.\nDavid Williams: Thank you, yes.\nMr Francois: It is now amber. That is right, is it not? There is still a long way to go, as Dame Meg was saying, but F-35 is slowly going in the right direction and not the wrong direction, is it not, General?\nLt General Sir Robert Magowan: Yes, absolutely.\nMr Francois: That is just to prove we were listening to you.\nLt General Sir Robert Magowan: Yes, it does not look good. It is very difficult to talk generically, though. There are 52 programmes in there and there are a range of reasons. We do have to get into the specifics of the programmes, which we can do. I have it all here.\nThere are some general trends, and the Permanent Secretary has already alluded to one of them, which is SQEP—you used the expression—suitably qualified and experienced personnel. That is true particularly across the nuclear space—there are a number of nuclear reds—and the technical spaces associated with defence, digital and complex weapons.\nSome of these are difficult international negotiations, which involve political conversations. That can lead to deliberation. Those would be my top three.\nQ103 Mr Francois: General Rob, you have said that it is difficult to generalise, but these have all been examined in great detail by the IPA. It has not generalised; it has scrutinised all of them individually and then given them a RAG rating. In that sense, they are not generalisations.\nEven if you take out the classified programmes, there are only two green out of 46, one of which, ironically, is the fleet solid support ship. By my maths, that is still less than 5%. In pub English, barely one in 20 of these procurement programmes is running to time and cost. That is appalling, is it not?\nDavid Williams: They are the 50 most complex things that we are trying to do, so it does not surprise me that at various points in project lives they are not really—\nQ104 Mr Francois: Mr Williams, the taxpayer employs you people on a lot more than we are getting in order to make these complex things go right, do they not?\nLt General Sir Robert Magowan: That complexity is the reason why we think P50 is an unsafe assumption.\nChair: Just explain P50. We understand it.\nLt General Sir Robert Magowan: As the Permanent Secretary says, these are the most complex projects. The nuclear ones are probably at the top of the list. We plan on the probability of us hitting our milestones being 50%, on a normal bell curve. Because of the complexity of the nuclear enterprise, and we are trying to get to a point where we are trying to be more realistic, we have now determined that it is better to be at P70.\nQ105 Mr Francois: That is good. We wanted P75.\nLt General Sir Robert Magowan: It is P70 for the nuclear enterprise.\nMr Francois: The problem with P50, again in pub English, is that you have half as much chance of being wrong as you have of being right. If I went to buy a car, I would not say to the car dealer, “Is there a P50 chance that it might start when I turn the key?” I would not buy the car.\nQ106 Chair: Mr Francois, you have quoted what amber is. Just to be clear, I will give the full definition so that we can get an answer from the witnesses about what they are doing in this respect. The definition of an amber project is, “Successful delivery appears feasible but significant issues already exist, requiring management attention” and then, crucially, “These appear resolvable at this stage and, if addressed promptly, should not present a cost/schedule overrun”. It might be helpful if you could pluck a couple of amber examples and tell us what you are doing to address them promptly so they do not cause a cost or schedule overrun.\nMr Francois: That is footnote 12 on page 37.\nChair: Yes, indeed. Mr Start, perhaps you would respond.\nAndy Start: I would be delighted to do so. If I may, I will speak to red briefly. What is helpful about this system is that it allows us as delivery agents to focus on where really senior management attention is needed.\nIn the case of the couple of reds that are within my portfolio, one of them is red because the supplier has some really difficult technical issues that it is wrestling with. That is making it late. It will get there, but that is making it late. I could take that particular capability to war, if I had to, but I would be doing so with increased risk. I do not want to do that unless I have to. That is red in terms of meeting the obligations that we have set on it, but I can fight with it if I need to.\nThe other one is red because I am waiting for a capability from an ally that I need to integrate that platform on to. I do not have a date from them yet because they are working on some other things. As a consequence, it is red because we just do not know a critical dependency. That makes it red. When we have resolved that, it will come off red. It is flagged as red because it is not within our control.\nIf I could take some amber ones, in general, we set pretty aggressive targets on our teams to deliver capability because our military wants capability as quickly as possible and within a timeframe. The targets that we set on the teams themselves are quite aggressive, and therefore I would expect most project managers to say they are struggling to hold the aggressive times that we give them.\nThe Defence Sub-Committee chaired by Mr Francois made the recommendation that, while we might still task the project teams that way, we should be holding reserves at a higher level and, in particular, doing so on schedule. We have accepted that recommendation and are implementing that across the board. We are moving to hold more contingency in terms of the overall schedules, but we will still drive the teams aggressively because we want to get the capability into the hands of users.\nQ107 Chair: You are in charge of that contingency. You are not giving it away easily.\nAndy Start: Yes, indeed. That is the key dynamic. If I may, why do we have so many?\nQ108 Chair: We asked for examples. Can you give us some examples?\nAndy Start: Let me take the example of Boxer. Boxer is currently amber. This is the MIV programme. On the Boxer programme, we are currently just holding the IOC—initial operating capability—dates that we have committed to, but they are under pressure. They are under pressure, as are most of the programmes here, because of issues with supply chain componentry. That is true in the land, sea and air domain and all of my international counterparts are having the same issues.\nAs we came out of Covid, as industry bounced back, the car industry, the commercial aviation industry and others sucked out a lot of the component capacity as they started to rebuild their industries. Suddenly, we went from a situation where our suppliers were assuming they could buy components in two weeks off the factor market and some of them have gone out to over two years.\nThat means they are suddenly under real pressure to maintain the schedule because they cannot get the components in the timeframe. That is starting to wash out at the component level and is now sitting at the subsystem and assembly level. Across our suppliers, we are seeing real issues in that space.\nThe second common issue that is driving all of them to feel pressure at the moment is skills. We have a very hot market globally for these engineering skills. Getting those skills into the defence industry is a real challenge. We need to work that skills issue in nuclear. My predecessor Sir Simon Bollom is working on that in the nuclear space. Through the Defence Suppliers Forum, we are also working with industry to try to get more apprenticeships and with higher education to pull more STEM resources into the defence industry.\nQ109 Mr Francois: You made the point about holding that reserve. Presumably, we will hear more about that and you will flesh that out in the statement, hopefully before 26 March.\nDavid Williams: Yes.\nQ110 Mr Francois: That is very helpful. My last one is about programmatics. Some of us have tabled a number of parliamentary questions about how many contracts your Department holds with Fujitsu. You have come back and said that that is commercial in confidence, which I have to say is an incredibly weak reply.\nIf you will not publish how many of those contracts you have—you were also asked about their duration and their contract value—as this is the Public Accounts Committee, would you give an undertaking to provide that information to the Committee in confidence?\nDavid Williams: Yes, in principle. I would need to check that.\nChair: We have previously had access to the entire strategic suppliers information. Admittedly, that was under a humble address of the House.\nMr Francois: You could save us going to all that trouble.\nChair: We may simply approach the Cabinet Office for the whole list.\nQ111 Mr Francois: Your in-principle answer is yes.\nDavid Williams: Yes.\nMr Francois: That will do. Thank you very much.\nDavid Williams: I know what the answer is and I do not particularly see any problem with sharing it with you.\nMr Francois: That is very good.\nDavid Williams: Finally, before we move on, having now read last year’s report again, I have one final point. As well as the F-35, five other programmes moved from red to amber in the latest published IPA review.\nIn terms of what we are doing on internal governance, the Minister for Defence Procurement has now started a regular GMPP review meeting with a particular focus on the reds and ambers trending down. At the delivery end in DE&S there is a programme of project review meetings led by non-executive directors on Mr Start’s board. We have followed up on some of the Sheldon recommendations about ensuring that senior responsible owners have a direct route into me or senior sponsors in head office where they are concerned about progress. We are taking the delivery governance seriously.\nLt General Sir Robert Magowan: Can I just add one extra thing to what Mr Start said, just to bring it to life further? You gave credit to DNS staff under Mr Start for what they have done in Ukraine.\nMr Francois: Yes, absolutely right.\nLt General Sir Robert Magowan: I can name three programmes in the DMPP that are red, which would go green tomorrow morning if we were going to war tomorrow night. We would be able to deliver FASGW-heavy, Brimstone 3 and SPEAR cap 3, if we needed to, but we are not prepared to take the level of risk that we are taking in Ukraine. We just need to ensure that we are comparing apples with apples.\nMr Francois: Can we take a bit more risk, then?\nChair: Let us not digress into other topics.\nQ112 Mr Djanogly: I will move on to supply chain constraints. I am going to start off with paragraph 2.5 of the NAO Report. It says, “The MoD is also facing supply chain risks and industry capacity constraints, mainly due to skills gaps, shortages of key components and an increased demand for defence equipment in other countries in response to the war in Ukraine”.\nIt then gives a series of examples, one of which is that the Army has said the lead time for the delivery of semiconductors has increased from one to three weeks to more than 50 weeks. Mr Williams, from your point of view, has the NAO report got it right? Are there these supply constraints that it is talking about? What impact are they having on delivery of equipment plan projects?\nDavid Williams: Yes, they have got it right. That specific example around the Army experience and access to semiconductors is directly relevant to the Boxer example that Mr Start talked about.\nWe have put in place a number of processes to give us better visibility below the prime contractor level of our supply chain, including up to around 700 companies that are active in the UK defence supply chain. We have been developing a measure of supply chain fragility or vulnerability. Given your role on the Defence Suppliers Forum, Mr Start, I wonder whether you might want to expand on that.\nAndy Start: This is a very different world to the one that we lived in five years ago. There is no doubt significantly more pressure on raw materials and raw material access. Because of the war in Ukraine, there is incredible demand for existing products and equipment. That is pressuring down through the supply chain.\nAs a consequence of that, we have been having to work with the large primes within the Defence Suppliers Forum. The DSF covers about 80 companies directly and then the whole of the supply chain through the trade associations. We have been working with the large companies to make sure their supply chain teams are discussing supply chain fragility.\nWe have also changed the defence conditions or DEFCONs. Within contracts, the primes now have to provide us with visibility of the supply chain at least four levels down. We have created a supply chain visibility toolset, which now allows us to map this very complex web of interrelated suppliers both onshore and offshore. We can now see where things map.\nQ113 Chair: That goes four tiers down.\nAndy Start: Yes. For the most critical products we have also started to place investment in the supply chain where there have been weaknesses and issues, particularly in things like munitions.\nWithin the Government’s commitment to £560 million over two years in terms of improving defence resilience, we have been spending that money on not only enhancing production capacity but also working down through the supply chain particularly around chemicals, chemical supply and so on.\nQ114 Mr Djanogly: I will come back to the foreign aspect, which we have not really covered yet, but to what extent are you reliant on delays that result in short-term savings but long-term overall cost increases? In the NAO Report, the Type 23 frigate, where repair costs have increased by £23 million to £100 million, is given as an example. To what extent are you using short-term savings but, as a result of that, then being hit for much larger costs down the line?\nAndy Start: We have to balance the budget in any particular year. That always creates pressures on spend-to-save things that we would like to do but just cannot. That is a dynamic of defence. We have to make those decisions. We try to prioritise the things that will give us the greatest benefit.\nThe other dynamic we are facing at the moment is that we are seeing a very high operational tempo of our use of military assets. That means a number of assets that should be in for scheduled maintenance are not because they are out on operational deployment. We are building up something of a maintenance debt that we are going to have to work through as well. There are a few of those dynamics.\nDavid Williams: It is reflected in our equipment plan, if you look at paragraphs 1.21 and 1.22 in the report. The phrase we use is “management adjustment for realism”.\nIn putting the plans together, frontline commands, in conjunction with Mr Start’s delivery teams or delivery teams elsewhere, will make an assessment of the realism of being able to deliver the programme in totality. Because we do not want to underspend—we want to get as much capability as we can for the budget—that is being factored in particularly within the early years of the programme.\nIt is not particularly a deliberate slowing down of any one programme but an assumption that the totality of the programme overall will probably arrive later than we have programmed.\nQ115 Mr Djanogly: It is certainly not deliberate in terms of the operational aspects you mentioned and things being used. General, what are the capability implications of equipment being used and therefore not being replaced?\nLt General Sir Robert Magowan: That is why we have a replenishment programme for Ukraine. Mr Start and the team have got at that, particularly with regards to some of our missile defence systems but more broadly as well. We know we have to either replenish or take operational risk. That is why we have been given additional funding to do that twice, in both the autumn statement and the spring statement.\nQ116 Mr Djanogly: Last week, on 15 January, as part of the “Defending the UK and Allies” statement, our colleague Jack Lopresti asked the Prime Minister, “Is it not time that we upscaled our industrial defence capacity so that we can continue to support our friends in Ukraine and replenish our own stocks?”\nThe Prime Minister’s reply was, “That is an excellent point. In a word, yes. That is why we have invested £2.5 billion in rebuilding our stockpiles. Beyond the money, we do need to build our defence industrial capability. That is a challenge shared across NATO that I have discussed extensively with partners, including the NATO Secretary-General. Of course, part of our agreement with Ukraine is how we can mutually help to support and grow our defence industrial complexes”.\nCould someone—is it one for Mr Start?—please explain what the Prime Minister meant when he said “mutually help to support and grow our defence industrial complexes”?\nAndy Start: One of my roles is to lead a programme called Project Hirst, which is our project of supporting Ukraine to build its defence industrial capability, its ability to domestically support the fight, while working in conjunction with UK industry.\nUsing a combination of UK funds and UK Export Finance, we are in the process of supporting UK industry to forum partnerships, joint ventures or other commercial arrangements with Ukrainian companies. Together with Ukraine, we are building industrial capacity for the fight. There are some real benefits to that.\nMr Djanogly: In Ukraine?\nAndy Start: It is building capability both here and in Ukraine. I was out in Kyiv just before Christmas running the first of a series of conferences between the UK defence industry and the Ukrainian defence industry. I was pleased to be joined by the Ukrainian Defence Minister and their Minister for strategic supply, as we worked together to build up that capacity together.\nI talked to you earlier on about the fact that in the fight some technologies are evolving every 90 days. The benefit that our industry gets from working with the Ukrainian industry is that real operational feedback into how its products are working and how it needs to adapt over time. That will make us more competitive in export as well as ensuring that our products adapt and remain relevant in the fight against Russia and others.\nQ117 Mr Djanogly: I totally get that in terms of the cutting edge, but not all of it is cutting edge, like NLAWs or 155-millimetre shells. I understand that the Ukraine provision is being paid for from a separate pot, in effect. However, it is still coming from the same factories. Is there enough to go around, even if we can pay for it?\nAndy Start: There is no question that industrial capacity across Europe is stretched, particularly in some areas like 155-millimetre munitions. Over the last 12 months, as part of the Ukraine Defense Contact Group, I have been working with my national armament director colleagues to build that capacity in both physical continental Europe and the US to increase industrial capacity.\nAn example of that in the UK was our investment in increasing the capacity of our 155-millimetre munition manufacturing capability with BAE Systems, under our long-term partnering agreement with BAE Systems. We have increased that capacity eightfold by investing in its underlying manufacturing capacity to support both our need and the need for Ukraine.\nQ118 Mr Djanogly: As things stand, can the British public be satisfied that, if there was a war tomorrow, we would have enough 155-millimetre shells?\nAndy Start: In conjunction with our allies—we have pooled capacity in those critical munitions with allies—we have enough capability to fight, if we needed to.\nIt is important to recognise that one of the reasons for that is that the adversary that is identified as our highest threat is currently engaged in a war with Ukraine. That is attritting its capability. Anything that we do to support Ukraine degrades our greatest potential adversary.\nMr Djanogly: General Magowan, would you like to add to that?\nLt General Sir Robert Magowan: Yes, a couple of things. First of all, we would have to have a closed session, understandably, on where we hold risk in the so-called TSR—the total stockpile requirement—against the state-on-state threat that Mr Start has been talking about. We are very happy to do that. Clearly, we would not want to do that in public.\nThe second point I would make is that I hate to predict the future, but I do not think NATO would be fighting in the way that the Ukrainians, unfortunately, are having to fight against the Russians in their own country. It would be a different fight. There would be a different demand on 155. That is all I would say at this point.\nMy role in Mr Start’s plan is to ensure that, as much as possible, there is a commonality of operational requirements between our requirements and Ukraine’s because that adds to industrial resilience.\nLastly, to answer your point directly about whether the British public should be confident that we can produce these stockpiles, we should think of an exponential curve going that way. It is going to take some time to ramp up from where we were five years ago to where we need to be. It is accelerating, but it is going to take a number of years, in certain cases, to get to the level that we need to reach against the total stockpile requirement for full warfighting.\nQ119 Mr Djanogly: Looking at it from the other side of the coin, from the manufacturers’ point of view, they also need confidence that, if they are going to build new plants, those are going to be used. From your conversations with them, Mr Start, are they feeling confident about increasing their capability?\nAndy Start: As per my conversation earlier on with Mrs Drummond, the industry is looking for a long-term commitment from Government to help it underpin its investment strategy. Together with industry, we have developed a munitions strategy that allows it to get the visibility that it needs. Our intent is to underwrite that in the long-term plan, which then creates the ability for it to scale up capability to meet the UK need.\nTo meet the Ukrainian need, we are working with it to provide as much visibility as we can about what Ukraine needs and sharing that with our other allies to help create the stimulus where they can invest. Certainly, in my conversations with chief execs, they are keen to invest, if we can give them enough clarity and certainty, and we are working hard to do that.\nLt General Sir Robert Magowan: The munitions strategy that Mr Start just mentioned was co-written between us and industry.\nQ120 Mr Djanogly: Does it become easier if, as the Prime Minister said, we are going to be working across NATO?\nAndy Start: It is absolutely easier if we do it across NATO. We are doing that as far as is possible within the current commitments under the Conference of National Armaments Directors, on which I sit.\nWe are keen to see the nations continue to work together to give a clear signal around their long-term commitment to Ukraine over the next five years or so. The stronger we can make those commitments, the easier it is for industry to make the investments it needs and to ramp up the capacity that we would all like to see.\nQ121 Gary Sambrook: Permanent Secretary, if I may take you back to recruitment and retention, it is clearly a big problem at the moment. You must be looking at different assessments and at the way in which you can review what is going on and what the problems are at the core in the Department at the moment.\nThere are significant numbers of people leaving. When you are walking around the Department, you must be looking at people and thinking, “Why are they leaving?”\nDavid Williams: There are a range of issues. I do not have with me the annual survey, AFCAS, but as part of that we ask a series of questions about which aspects of service life are retention-positive and which are retention-negative. We get quite a good feel from across the service population about the factors of their experience and, within the Armed Forces, what drives people to stay or to go. That is published. I would be happy to share it with the Committee, but I do not have it with me today.\nThere is a question around the wider economic situation. This is not an excuse, but we saw exit levels drop off quite markedly during Covid. More people were staying than is usual. Some of the effect that we are seeing is a correction of that period, but it is now stabilising at a level that is higher than the historic norm.\nQ122 Gary Sambrook: From the answers we have been given today, a lot of the problems that people have been focusing on are caused by issues of retention and recruitment. The findings of that report should probably be imprinted at the forefront of your mind when walking around, making decisions and informing Ministers.\nHow far is your work to improve the number of senior responsible owners undermined by the inability to provide them with supporting teams?\nDavid Williams: It is important to get the right support for SROs in terms of both the direct support that they get from programme directors in their immediate teams and the wider support that they get from delivery teams in Mr Start’s organisation as well. That is part of the issue there.\nAs part of our work on the broader procurement model, the broader operating model, there are other challenges for SROs around their direct control of projects in their programmes, which does not sit neatly with the way in which money flows around the organisation in our current setup, and the range of influence they have across all of the lines of development that go to make successful programme delivery. That is one factor but only one factor.\nWe have made good progress over the past year in increasing the proportion of SRO time that is spent on delivering programmes. We are now up at the 90% mark for SROs who are spending at least 50% of their time on major programmes. Where it is lower, they will be dealing with programmes that are allied or related capabilities. We are supporting them through training and accreditation, including of their programme directors. It is a live issue, but one that we are taking steps to address.\nQ123 Gary Sambrook: Last week we learned that the Royal Navy’s support arm was being forced to use Serco to recruit deckhands. This is the first time in history that the Royal Fleet Auxiliary is not going to be directly employing people on Navy and Royal Marines vessels. This is going to cost you more money and it is not particularly conducive to keeping a good workforce in order either. This is not sustainable, is it?\nDavid Williams: My understanding of that particular case is that we have a contract with Serco for certain port and dockside capabilities. I do not think that job advert is indicative of the health of recruiting potential in the RFA.\nQ124 Chair: Just to be clear, Mr Williams, you are saying that the story was not accurate.\nDavid Williams: Yes, I think that is what I am saying.\nQ125 Chair: Let us call a spade a spade. Let us be clear that we are not asking private companies to provide people to serve on Royal Fleet Auxiliary ships.\nLt General Sir Robert Magowan: Again, the Permanent Secretary referred to this at the beginning. One of the major recruitment challenges is that we need to invoke greater flexibility in Armed Forces careers. We are in a different environment to when I joined the Royal Marines, 525 years ago.\nWe are in a position where we have to offer zig-zag careers or whatever it might be. Again, we do not have the report here, but quite often the reason people give for leaving is “inability to manage my own life”. That answer is more prevalent now than it was decades ago. We are getting after that. That is what the Haythornthwaite review identified.\nQ126 Gary Sambrook: General, we are not alone in this challenge. There are reports of similar challenges with recruitment in the US. You want the best of the best. You want to be able to serve alongside the best of the best. In recent years, has there been too much emphasis on equality of output rather than equality of opportunity in terms of recruitment?\nChair: Do you want to explain what you mean by that?\nGary Sambrook: We have been looking at a more diverse range of people to go into the forces in particular, which is on one hand a good thing. When that becomes the sole focus of a recruitment campaign, that does not necessarily always yield results.\nLt General Sir Robert Magowan: Let me bring it home to the Royal Marines. About four or five years ago, the Royal Marines, along with the other frontline capability in the Armed Forces, welcomed women to join. Our view in the Royal Marines is that a diverse team is a stronger team. There is quite a lot of evidence that a narrow team can develop groupthink. Greater diversity, whatever it might be, whether it be gender or race, delivers a stronger and more challenging team.\nI would refute that it is a distraction. It is something we should absolutely be getting after. History shows that it is a strength.\nQ127 Gary Sambrook: Finally, Mr Start, the report states that you have identified 20 roles where you do not have the number of skilled staff you need, which included project managers, commercial staff, data scientists, business analysts and engineers. These are all highly competitive roles. Why can we not keep them or even recruit them?\nAndy Start: We are able to recruit them. If we are focusing on the Civil Service, we are able to recruit them, but we do have a slow and steady attrition of this skillset. Why do we have a slow and steady attrition? It is because these are very attractive skills that are wanted in many industries that are currently vibrant. There are very low levels of unemployment. There is a lot of competition for these kinds of jobs. Fundamentally, we need more, coming out of our colleges and universities, to meet the national demand. It is an overall supply and demand issue.\nWhat are we doing about it? We are trying to be clear that, while other people may pay more in some circumstances, we offer a competitive package that is a mixture of a good salary, a good pension and, most importantly, work that is genuinely meaningful, rewarding and enjoyable. We are hoping that message attracts more and more not just to DNS but to the wider defence industry, which is desperately in need of more skills.\nQ128 Sarah Owen: Mr Start, General Magowan said earlier that we need a much stronger industrial base and you have said there is an assembly issue with some projects. We are seeing a decline in the UK manufacturing base as a whole. We have heard the news about Port Talbot steelworks closing. What is the MoD doing to secure the defence manufacturing sector in the future, particularly around bringing in skilled workers, such as apprentices, welders and platers, to secure the supply chain in the future?\nAndy Start: Defence overall has an underlying industrial strategy that articulates its aspiration and then breaks that down into sector strategies covering each of the major areas of defence. In the shipbuilding space, for example, we have the National Shipbuilding Office, which is trying to blend the needs of UK military with the private sector.\nWe have done pretty well in shipbuilding. If you go back a decade, we had one plant that was actively manufacturing defence warships for the nation. We now have three. Each of those is building in more skills with skills academies that underpin them. Within that sector, there has been a really good story.\nThere are challenges. For example, there are not enough master welders to teach the apprentices. That creates a challenge for us. There is a rite of passage that you have to go through and learning takes time, but we are trying to work that as actively as we can with industry to help stimulate it. Where appropriate, Government have been doing their best to support them.\nQ129 Chair: You say “stimulate”. If it is a question of time, you cannot just rush people through the training to become a master welder.\nAndy Start: Yes. The dynamic is about working with them to create the academies, to encourage as many master welders into the system as we can and to be flexible where necessary to bring capabilities from partners and allies. For example, when we have managed to sell our design to an overseas shipyard, we work collaboratively with that shipyard but also encourage them to bring skills and capabilities into the UK and enhance our capabilities. That is what we have been doing in the maritime domain, which has been quite strong.\nIn the land sector, we have the land industrial strategy. To be honest, we have seen a renaissance in our capability from almost nothing in the UK, where we had seen it wither on the vine, to a capability where we are now very active with the building of Boxer. There are multiple manufacturing plants working on the Boxer programme. The Challenger 3 programme is very active and so on.\nWe are seeing good efforts. We are trying to work with industry through both our industrial strategy and the Defence Suppliers Forum in order to have a coherent plan with industry. It is a big job of work. The truth of the matter is that it is a challenging global environment. That is going to drive overall increased spending in this sector, and therefore we have to build industrial capacity.\nSarah Owen: I know time is tight, but I would really welcome if you could write to the Committee and explain some of those challenges, particularly the shortfalls around master welders and the very high-skilled jobs in defence manufacturing that we are looking at, and how we are going to get through that.\nChair: It is an important pillar of defence strategy to have an industrial strategy. When you talked about volatility earlier, Mr Start, there is volatility, but some of this is about long-term planning and pipelines, which is of concern to us.\nQ130 Sir Geoffrey Clifton-Brown: I have two very brief things to mop up. Mr Wipperman, on figure 14, further to the questions by Mr Djanogly and Ms Owen on building manufacturing capacity, is that £5.01 billion a commitment in the budget? The NAO Report says that the MoD “intends” to invest. Which is it? Is it a commitment or an intention?\nTom Wipperman: On figure 14, the £560 million is agreed funding from the Treasury. The £1.95 billion is agreed funding from the Treasury. The £2.5 billion is a commitment that was made in the defence command paper refresh in July, which we will invest into the future. That does not represent new funding; it represents how we will reprioritise within the existing budget.\nQ131 Sir Geoffrey Clifton-Brown: It will come out of the budget in due course.\nTom Wipperman: Yes, that is right.\nQ132 Sir Geoffrey Clifton-Brown: Over what timeframe?\nTom Wipperman: We are already getting after munitions generally. We are working through that now and we would start to see it in future plans. It might be next year; it might be the year after.\nAndy Start: Just to put that in context, against that £560 million, over £400 million of it is already on contract. Against the wider number, we have already spent over £1 billion on replenishment, which is already on contract. A lot of this is underway and there is more to come.\nQ133 Sir Geoffrey Clifton-Brown: I have another question for you, Mr Start. In the dreaded GMPP list of red projects—I am asking this question carefully and no doubt you will want to answer it carefully—is there a problem with complex digital communication systems across a range of defence equipment?\nAndy Start: I am going to carefully answer the question by saying that is delivered within Defence Digital and it would be unfair for me to comment. I will let David take the wider question.\nDavid Williams: There are a range of challenges, and we have had hearings before this Committee before on the digital programme.\nChair: We had a whole set of sessions.\nDavid Williams: Some of the programmes that are particularly challenging are, in my view, at the more basic end of our IT and digital infrastructure.\nQ134 Sir Geoffrey Clifton-Brown: The basic end?\nDavid Williams: Let me take the example of the MODNet Evolve programme. We bent out of shape in order to support hybrid and working from home during Covid. It is a programme that includes the delivery of laptops, for instance. We did a really good job in supporting that.\nAs a result, some of the other elements of the programme around the management of printed services and moving some of the secret domain to the cloud are taking longer than originally thought. This is not the most technical end, but it is fundamental underpinning infrastructure that has been disrupted through real-world events.\nQ135 Sir Geoffrey Clifton-Brown: I wonder whether you are putting a bit of a gloss on that. Let me give you another example. Morpheus does involve complex digital communications. It is not the only one. There are others with complex digital communications.\nDavid Williams: On digital transformation programmes generally, we are not alone in Government in this.\nChair: We have covered this. Just to be clear, we have done a separate report on this. You can keep your answer brief. We do not need to revisit it.\nDavid Williams: Yes, there is a challenge. Some of the ones that are red are not at the most challenging end of the spectrum. That is all I meant.\nSir Geoffrey Clifton-Brown: They are not the most challenging.\nDavid Williams: Not all of them, no.\nQ136 Chair: We have an interesting challenge here, if I can put it politely, with the equipment plan. If we look back to last year, there was a £4.3 billion contingency in the plan and the worst-case deficit was just over £7 billion. If you add those two together, it does not even hit the size of £17 billion. It is not enough to close the gap, yet you have been quite buoyant today, as a team. Mr Williams, why are you so buoyant that you can manage this?\nDavid Williams: The Defence Secretary gave a speech this time last week around the challenges in the international environment. I am loath to feel buoyant about that. Those are very real and present threats.\nAgainst the Government’s commitment—although the timeframe is to be decided—that defence spending should increase over time, and against the headmark in capability terms around the exploitation of technology and the changes to our procurement system that we have pointed the way for in the defence command paper refresh last summer, we have a pretty clear idea of where we need to get to and a reasonable chance of having the wherewithal to get there.\nIs it a challenging environment? Yes, absolutely. Based on the set of assumptions that we had when this snapshot plan was produced last year, there are a range of affordability challenges that we need to deal with, but we have work in hand to think about our priorities. We are making the case for our budget.\nQ137 Chair: I just need to pick up on that. You are making a case, but you are waiting for the spending review as a major part of achieving this, and there is this assumption that you are going to get 2.5% of GDP for defence spending. You sound very optimistic that those two elements will be part of it, but yet we have not really had any discussion about reducing capability in order to meet the demands of the overall programme.\nDavid Williams: We are working through what we need to do next year and maybe the year after to get us to the spending review. My point is simply that deliberately taking things out of the programme against an expectation and a Government policy that the budget will go up is not good value for money or a sensible set of decisions to take from a capability perspective. It is about managing that uncertainty over the next 18 months.\nQ138 Chair: If you do not get the money, you are going to have to take capability out, are you not?\nDavid Williams: Yes, but then a spending review is the proper process by which to have conversations with the Prime Minister and the Chancellor about how much is being invested in defence and what they get back for that investment.\nChair: We can go round and round on this. As I said at the beginning, it is a bit like groundhog day. The capability needs and the budget never seem to balance. We have gone over it a lot. We will revisit it again next year, whatever iteration of this Committee there is at that point. If it is in a year’s time, there will have been a general election in between. We know that for sure, by today’s date.\nThank you very much indeed for your time. The transcript of this session will be available on the website uncorrected in the next couple of days and we will be producing a Report before the Easter recess. Thank you very much indeed."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "",
    "text": "The chapter reviews literature on defence contracts and competitive procurement, exploring various contract types and the decision-making processes in defence equipment acquisition.\nThe complexity of contracting involves transaction costs related to acquiring information, organizing competitions, bargaining, and enforcing contracts.\nThe government, as a buyer or principal, must specify requirements and ensure that contractors pursue the principal’s goals.\nContracts that cannot detail all buyer requirements may lead to discretionary behaviour by contractors, influenced by their preferences.\nMonitoring and enforcing contracts require measurable outputs, and incentives and penalties in contracts impact the behaviour of agents.\nThe chapter reviews traditional approaches to defence contracting, cost-estimating relationships, and various contract types, including recent theoretical developments.\nFocus is given to market features, agent behaviour, and responses to contractual incentives and regulatory constraints."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#defining-competition",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#defining-competition",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "Defining Competition",
    "text": "Defining Competition\n\nCharacteristics of Defence Markets\n\nDefence markets differ from perfectly competitive models.\nOften characterized by a single buyer, a few large suppliers, non-profit-maximizing firms, uncertainty, imperfect information, and barriers to entry/exit.\n“Opening-up” the market to foreign firms can increase the number of potential suppliers.\n\nEconomic Case for Competition\n\nStandard economic case: competition spurs efficiency, alters attitudes, and lowers prices.\nAttitudes toward competition have evolved over time.\nIn the 1970s, US initially viewed competition less favorably, but policies changed in favor of competition.\nLegislative acts in the USA and similar trends in the UK promoted more competitive procurement.\n\nPrinciples of Competition in Project Life Cycle\n\nClassification system for competition at different stages in a project’s life cycle (Table 5.2).\nCompetition can be introduced at the design, development, production, in-service support, and disposal stages.\nPotential for domestic or international competition.\nVarious forms of competition, including winner-takes-all, dual sourcing, and storing options.\nTrade-offs between benefits (incentives to reduce costs, increase quality) and costs (set-up costs, technology transfer, failure to exploit learning economies).\n           Competition possible at                                      | Type of competition &lt;br&gt; Non-price |      Risks - uncertainty      |\n|:———————-:|:———————-:|:———————-:| | 1 Design stage | Non-price | Maximum | | 2 Development stage - prototype | Non-price;  budget limit | Great to prototype  stage | | 3 Production stage  all production work  (winner takes all)  batches (dual sourcing) | Price  Price | Little-none | | 4 In-service support, repairs,  servicing, mid-life up-dates | Price | Some-none | | 5 Disposal | Price | None to great  (nuclear) |\n\nAnalysis of Costs and Benefits\n\nNeed for detailed analysis of costs and benefits of competition.\nIssues include R & D, technology transfer, scale, and learning economies."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#research-and-development",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#research-and-development",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "Research and Development",
    "text": "Research and Development\n\nResearch and Development (R&D) Impact on Competition Policy:\n\nEquipment procurement is a multi-stage process (design, development, initial production, full production).\nSole source procurement leads to vigorous competition in the development stage but potential monopoly profits later.\nCompetition at the initial award stage influences winning bids and long-term profits.\nExpectation of a second source reduces aggressiveness in initial production contract bidding.\nInitial competitive contract awards may not significantly improve weapons procurement.\n\nCompetition’s Adverse Effect on Innovation:\n\nProfits/prizes on production contracts are seen as rewards for earlier innovation.\nRent-seeking firms invest in winning production contracts through innovative activities.\nCompetitive procurement policies (dual or second sourcing) may reduce economic profits on contracts.\nReduction in economic profits can potentially lead to a decrease in innovation.\n\nReference:\n\nRiardon and Sappington (1989), Leitzel (1992), Rogerson (1989)."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#technology-transfer",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#technology-transfer",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "Technology Transfer",
    "text": "Technology Transfer\n\nTechnology Transfer in Production Stage:\n\nCompetition at the production stage necessitates technology transfer.\nCreating an alternative producer involves transferring technology from the initial developer.\nCosts can arise from legal disputes over intellectual property rights.\nEnsuring the second source fully understands the initial developer’s information can be challenging.\nThe original supplier may have incentives to hoard valuable information.\nExperience with international co-production programs suggests feasible technology transfer at modest cost (Hall and Johnson, 1967).\n\nIndirect Costs of Technology Transfer:\n\nThe CICA of 1984 initially required bidders to relinquish proprietary technical data rights.\nPrivate developers limiting government’s data rights faced elimination from competition.\nSuch requirements affected entry and exit, particularly for firms with high-value commercial markets.\nCICA was modified in 1988 to prevent disadvantage for contractors relying on privately developed products.\nModification aimed to incentivize private industry investment in risky new technology (Brunette, 1989).\n\nReferences:\n\nHall and Johnson (1967), Brunette (1989)."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#economies-of-scale-and-learning",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#economies-of-scale-and-learning",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "Economies of Scale and Learning",
    "text": "Economies of Scale and Learning\n\nCompetition at Production Stage:\n\nForms of competition: dual sourcing (simultaneous production from two suppliers) and second sourcing (creating a new supplier via technology transfer).\nInitial production work by the original developer provides a unit cost advantage.\nSetup costs for a second supplier increase the advantage of the incumbent.\nCompetitive procurement aims to limit sole source monopoly profits and reduce X-inefficiency.\nOptimal replacement of the incumbent may occur, even with higher production costs for the new entrant (Demski et al., 1987).\n\nLearning Curve Analysis:\n\nLearning curve used to evaluate single source vs. competitive procurement in production (figure 5.4).\nUnit costs and savings analyzed based on quantity and production batches.\nSole source producer’s response to entry threat considered in figure 5.5.\nFramework raises questions about assumptions, counterfactuals, cost activity, pricing, and external influences.\n\nFigure 5.4 and 5.5 Analysis:\n\nFigure 5.4: Compares unit costs under sole source and competitive scenarios.\nFigure 5.5: Introduces contestability, shifting sole source cost curve with rivalry.\nQuestions raised about assumptions, unit costs, and the impact of external influences.\n\n\n \n\nEvidence on Savings and Competition:\n\nResearchers estimate savings using learning curves, with prices reflecting contractor costs.\nUS empirical literature suggests average savings due to competition range from 11% to 53%, with a median saving of 33%.\nDual sourcing found to be more expensive in one study, and savings realization is not always obvious.\nSecond source often wins competitions, but empirical studies on competitive savings are considered flawed (Anton and Yao, 1990).\n\nReferences:\n\nBurnett (1987), Leitzel (1992), Anton and Yao (1987, 1990), Demski et al. (1987), Gansler (1989a)."
  },
  {
    "objectID": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#performance-indicators",
    "href": "posts/20240127-Notes on Hartley and Sandler/20240127-Notes on Hartley and Sandler.html#performance-indicators",
    "title": "Notes on Economics of Defence - Chapter 7 (Procurement)",
    "section": "Performance Indicators",
    "text": "Performance Indicators\n\nPerformance Indicators in Procurement:\n\nEvidence on fixed-price contracts, cost escalation, and profitability.\nTotal package procurement in the 1960s (e.g., Lockheed C-5A, Grumman F-14) led to underestimation of costs, massive overruns, and losses.\nFixed-price contracts with technological uncertainties may result in disputes and difficulties in enforcement.\nContract and contractor performance assessed by cost control, delivery schedules, and equipment performance.\nImpact of 1970s Packard Initiatives, hardware competition, and competitive programs on performance and cost growth.\nProfitability as an indicator of contractor performance and its relationship with competition.\n\nComparative Studies and Analysis:\n\nPrice reduction curve (figure 5.6) predicts lower prices with competition, influenced by a shift effect and a rotation effect.\nGreer and Liao suggest that competition, especially dual sourcing, results in net savings when industry capacity utilization is below 80 percent.\nEmpirical studies on the impact of the UK’s competitive procurement policy: claims of efficiency improvement, export performance, and a wider supplier base.\nStudies also highlight concerns about reduced market concentration, increased competition, exits from the industry, bidding costs, decision delays, and reluctance to invest in private venture R & D.\n\n\n\n\nReferences:\n\nKovacic (1991), Udis (1992), Fox (1974), Dews et al. (1979), Greer and Liao (1986), Hartley (1991b), HCP 189 (1991), Smith (1990), Willett (1993), Bittleston (1990)."
  }
]