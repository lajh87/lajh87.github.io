{
  "hash": "47c4ce6374796877e6e9317ae2b04f27",
  "result": {
    "markdown": "---\ntitle: \"Retrieval Augmented Generation\"\ndescription: \"An applied example using pinecone and langchain\"\nauthor: \"Luke Heley\"\ndate: \"19 Nov 23\"\nfreeze: true\nexecute:\n  eval: true\nformat:\n  html:\n    toc: true\n    code-fold: show\ncategories:\n - large language models (LLM)\n - evidence synthesis\n - methods\n - notes\neditor_options:\n  chunk_output_type: console\n---\n\n# Build the Knowledge Base\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nfrom llama_hub.smart_pdf_loader import SmartPDFLoader\nllmsherpa_api_url = \"https://readers.llmsherpa.com/api/document/developer/parseDocument?renderFormat=all\"\n\npdf_url = \"https://www.nao.org.uk/wp-content/uploads/2015/10/Major-Projects-Report-2015-and-the-Equipment-Plan-2015-2025.pdf\" # also allowed is a file path e.g. /home/downloads/xyz.pdf\n\nurl2 = \"https://www.nao.org.uk/wp-content/uploads/2010/10/1011489_I.pdf\"\nurls = [url2, pdf_url]\n\npdf_loader = SmartPDFLoader(llmsherpa_api_url=llmsherpa_api_url)\n\ndocuments = []\nfor url in urls:\n        documents.extend(pdf_loader.load_data(url))\n\ndocuments[0:2] # look at first 3 chunks \n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```\n[Document(id_='973aa561-4e5e-42d5-a10f-602c934b9453', embedding=None, metadata={'chunk_type': 'para'}, excluded_embed_metadata_keys=[], excluded_llm_metadata_keys=[], relationships={}, hash='6fa95392555c5abf74e02cb5d3c6d5604298d7bbae4b2ab079e79be852b9a322', text='The Major Projects Report 2010 > RepoRt by the CoMptRolleR anD auDitoR GeneRal > hC 489-i SeSSion 2010–2011\\nThe National Audit Office scrutinises public spending on behalf of Parliament.\\nThe Comptroller and Auditor General, Amyas Morse, is an Officer of the House of Commons.\\nHe is the head of the National Audit Office which employs some 900 staff.\\nHe and the National Audit Office are totally independent of Government.\\nHe certifies the accounts of all Government departments and a wide range of other public sector bodies; and he has statutory authority to report to Parliament on the economy, efficiency and effectiveness with which departments and other bodies have used their resources.\\nOur work leads to savings and other efficiency gains worth many millions of pounds: £890 million in 2009-10.', start_char_idx=None, end_char_idx=None, text_template='{metadata_str}\\n\\n{content}', metadata_template='{key}: {value}', metadata_seperator='\\n'),\n Document(id_='67179a0e-b422-45cb-91df-ad32e7f19696', embedding=None, metadata={'chunk_type': 'para'}, excluded_embed_metadata_keys=[], excluded_llm_metadata_keys=[], relationships={}, hash='771d33ae2a3747256565d6efe59ebf6977fa15673a504470ccf289d2882492af', text='The Major Projects Report 2010 > RepoRt by the CoMptRolleR anD auDitoR GeneRal > hC 489-i SeSSion 2010–2011\\nOur vision is to help the nation spend wisely.', start_char_idx=None, end_char_idx=None, text_template='{metadata_str}\\n\\n{content}', metadata_template='{key}: {value}', metadata_seperator='\\n')]\n```\n:::\n:::\n\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nfrom llama_index import VectorStoreIndex\nindex = VectorStoreIndex.from_documents(documents)\nindex\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\n<llama_index.indices.vector_store.base.VectorStoreIndex at 0x1e5c2014eb0>\n```\n:::\n:::\n\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(\"List the Major Project Reports available in this context.\")\nprint(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe Major Project Reports available in this context are the Major Projects Report 2010 and the Major Projects Report 2015.\n```\n:::\n:::\n\n\n",
    "supporting": [
      "20231120-RAG with Multiple PDFs_files"
    ],
    "filters": [],
    "includes": {}
  }
}